webpackJsonp([6],{443:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},453:function(t,e,n){var a,i;a=[n(19),n(4),n(21),n(430),n(41)],void 0!==(i=function(t,e,n,a,i){function o(t,n){var a={conditionFn:t,loadFn:n};u.push(a),1===u.length&&e.on("window:throttledScroll",c),s()}function r(e,a,i){n.read(function(){var n=t(e);o(function(){var t=n.offset(),e=t.top-a,i=t.top+t.height+a;return l.top>e&&l.bottom<i},i)})}var s,u=[],l={top:0,bottom:0},c=function(){l.top=window.pageYOffset,l.bottom=l.top+t.viewport().height,u=a(u,function(t){if(!t.conditionFn())return!0;t.loadFn()}),0===u.length&&e.off("window:throttledScroll",c)};return s=i(c,2e3),{add:r}}.apply(e,a))&&(t.exports=i)},454:function(t,e,n){(function(t){var a,i;a=[n(138)],void 0!==(i=function(t){function e(e){for(var n in e)e.hasOwnProperty(n)&&t.set(i+"."+n,e[n])}function n(e){return!1!==t.get(i+"."+e)}function a(t){return!0===n(t)}var i="accessibility";return{KEY_PREFIX:i,saveState:e,isOn:a}}.apply(e,a))&&(t.exports=i)}).call(e,n(443)(t))},482:function(t,e,n){var a,i;a=[n(66),n(32),n(11),n(2)],void 0!==(i=function(t,e,n,a){function i(i){var l=!0;if(!i)return l;var d=c.call(i),f=i.length;return d==r||d==u||(a.argsClass?d==o:e(i))||d==s&&"number"==typeof f&&n(i.splice)?!f:(t(i,function(){return l=!1}),l)}var o="[object Arguments]",r="[object Array]",s="[object Object]",u="[object String]",l=Object.prototype,c=l.toString;return i}.apply(e,a))&&(t.exports=i)},506:function(t,e,n){var a,i;a=[n(21),n(454),n(20)],void 0!==(i=function(t,e,n){function a(a){e.isOn("flashing-elements")?a&&a():t.write(function(){n("body").addClass("disable-flashing-elements"),a&&a()})}return{shouldHideFlashingElements:a}}.apply(e,a))&&(t.exports=i)},629:function(t,e,n){var a,i;a=[t,e,n(20),n(0),n(31),n(63),n(7),n(196),n(681),n(682)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var d=c(n),f=c(a),h=c(i),p=c(o),v=c(r),g=c(u),m=c(l),w=function(){return-1!==["uk/business","us/business","au/business"].indexOf(f.default.page.pageId)},y=function(){return(0,h.default)("/business-data/stocks.json",{mode:"cors"}).catch(function(t){(0,p.default)(t,{feature:"stocks"})})},_=function(t){return t>0?"+"+t:""+t},b=function(t){var e=t.stocks.map(function(t){return(0,v.default)(g.default,{name:t.name,deltaClass:"stocks__stock-value--"+t.trend,price:t.price,change:_(t.change),closed:t.closed?'<div class="stocks__closed">closed</div>':"",closedInline:t.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:(0,s.inlineSvg)("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:(0,s.inlineSvg)("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:(0,s.inlineSvg)("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return(0,v.default)(m.default,{stocks:e})};e.default=function(){var t=(0,d.default)(".js-container--first .js-container__header");w()&&t&&y().then(function(e){e.stocks.length>0&&t.append(b(e))})},t.exports=e.default}.apply(e,a))&&(t.exports=i)},641:function(t,e,n){var a,i;a=[e,n(46),n(65),n(203),n(202),n(15),n(20),n(0),n(4),n(422),n(45)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l,c){"use strict";function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.GeoMostPopularFront=void 0;var f=d(e),h=d(n),p=d(a),v=d(i),g=d(o),m=d(r),w=d(s),y=d(u),_=d(l),b=d(c),k=function(t){(0,m.default)(".js-tabs-content",t).addClass("tabs__content--no-border"),(0,m.default)(".js-tabs",t).addClass("u-h")};t.GeoMostPopularFront=function(t){function e(){(0,f.default)(this,e);var t=(0,p.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return _.default.begin("most-popular"),t.endpoint="/most-read-geo.json",t.isNetworkFront="Network Front"===w.default.page.contentType,t.isVideoFront="video"===w.default.page.pageId,t.isInternational="international"===w.default.page.pageId,t.manipulationType="html",t}return(0,v.default)(e,t),(0,h.default)(e,[{key:"prerender",value:function(){this.elem=(0,g.default)(".headline-list",this.elem)[0]}},{key:"go",value:function(){var t=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=(0,g.default)(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront||this.isVideoFront?k(this.parent):(this.tab=(0,g.default)(t,this.parent)[0],this.fetch(this.tab,"html")))}},{key:"ready",value:function(){this.isNetworkFront&&k(this.parent),_.default.end("most-popular"),y.default.emit("modules:geomostpopular:ready")}}]),e}(b.default)}.apply(e,a))&&(t.exports=i)},642:function(t,e,n){var a,i;a=[e,n(46),n(65),n(30),n(20),n(31),n(4),n(63),n(19)],void 0!==(i=function(t,e,n,a,i,o,r,s,u){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchTool=void 0;var c=l(e),d=l(n),f=l(a),h=l(i),p=l(o),v=l(r),g=l(s),m=(l(u),{13:"enter",38:"up",40:"down",27:"escape"});t.SearchTool=function(){function t(e){(0,c.default)(this,t);var n=e.container;this.apiUrl=e.apiUrl,this.bindElements(n),this.bindEvents(),this.oldQuery="",this.newQuery="",this.inputTmp=""}return(0,d.default)(t,[{key:"bindElements",value:function(t){this.$list=(0,h.default)(".js-search-tool-list",t),this.$input=(0,h.default)(".js-search-tool-input",t)}},{key:"bindEvents",value:function(){f.default.on(document.body,"keyup",this.handleKeyEvents.bind(this)),f.default.on(document.body,"click",this.handleClick.bind(this)),v.default.on("autocomplete:toggle",this.toggleControls.bind(this))}},{key:"hasInputValueChanged",value:function(){return this.oldQuery.length!==this.newQuery.length}},{key:"handleClick",value:function(e){var n=(0,h.default)(e.target).hasClass("js-search-tool-input"),a=t.nearestLinkNode(e.target);n?(e.preventDefault(),v.default.emit("autocomplete:toggle",!0)):a?(e.preventDefault(),(0,h.default)(".active",this.$list).removeClass("active"),(0,h.default)(a).addClass("active"),this.pushData()):v.default.emit("autocomplete:toggle",!1)}},{key:"toggleControls",value:function(t){var e=(0,h.default)(".js-search-tool-input")[0],n=(0,h.default)(".js-search-tool"),a=(0,h.default)(".js-close-location"),i=(0,h.default)(".js-edit-location");t?(this.inputTmp=e.value,n.addClass("is-editing"),e.setSelectionRange(0,e.value.length),a.removeClass("u-h"),i.addClass("u-h")):(n.removeClass("is-editing"),this.clear(),this.setInputValue(this.inputTmp),a.addClass("u-h"),i.removeClass("u-h"))}},{key:"pushData",value:function(){var t=(0,h.default)(".active",this.$list),e="set";if(0===t.length){if(""!==this.$input.val())return;e="remove"}var n={id:t.attr("data-weather-id"),city:t.attr("data-weather-city"),store:e};v.default.emit("autocomplete:fetch",n),this.setInputValue(),this.inputTmp=n.city,this.$input.blur(),setTimeout(this.destroy.bind(this),50)}},{key:"getListOfResults",value:function(t){if(this.newQuery=t.target.value,!t.target.value.match(/\S/))return this.clear(),void(this.oldQuery="");this.hasInputValueChanged()&&this.fetchData()}},{key:"fetchData",value:function(){var t=this;return(0,p.default)(""+this.apiUrl+this.newQuery,{mode:"cors"}).then(function(e){t.renderList(e,5),t.oldQuery=t.newQuery}).catch(function(t){(0,g.default)(t,{feature:"search-tool"})})}},{key:"handleKeyEvents",value:function(t){var e=m[t.which||t.keyCode];(0,h.default)(t.target).hasClass("js-search-tool-input")&&("down"===e?(t.preventDefault(),this.move(1)):"up"===e?(t.preventDefault(),this.move(-1)):"enter"===e?this.pushData():"escape"===e?this.toggleControls():this.getListOfResults(t))}},{key:"move",value:function(t){var e=(0,h.default)(".active",this.$list),n=parseInt(e.attr("id"),10);isNaN(n)&&(n=-1),e.removeClass("active"),this.getNewId(n+t)<0?this.setInputValue(this.oldQuery):((0,h.default)("#"+this.getNewId(n+t)+"sti",this.$list).addClass("active"),this.setInputValue())}},{key:"getNewId",value:function(t){var e=(0,h.default)("li",this.$list).length,n=t%e;return n<-1?n=e-1:t===e&&(n=-1),n}},{key:"setInputValue",value:function(t){var e=t||(0,h.default)(".active",this.$list).attr("data-weather-city");this.$input.val(e)}},{key:"renderList",value:function(t,e){var n=document.createDocumentFragment(),a=t.length-e;t.slice(0,a).forEach(function(t,e){var a=document.createElement("li");a.className="search-tool__item",a.innerHTML='<a role="button" href="#'+t.id+'" id="'+e+'sti" class="js-search-tool-link search-tool__link'+(0===e?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+t.id+'" data-weather-city="'+t.city+'">'+t.city+' <span class="search-tool__meta">'+t.country+"</span></a>",n.appendChild(a)}),this.clear().append(n)}},{key:"clear",value:function(){return this.$list.html("")}},{key:"destroy",value:function(){this.clear()}}],[{key:"nearestLinkNode",value:function(t){return(0,h.default)(t).hasClass("js-search-tool-link")?t:h.default.ancestor(t,"js-search-tool-link")}}]),t}()}.apply(e,a))&&(t.exports=i)},643:function(t,e,n){var a,i;a=[e,n(30),n(63),n(20),n(0),n(31),n(4),n(138),n(642)],void 0!==(i=function(t,e,n,a,i,o,r,s,u){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t._=t.Weather=void 0;var c=l(e),d=l(n),f=l(a),h=l(i),p=l(o),v=l(r),g=l(s),m=null,w=null,y=!1,_="weather-location",b=function(){return["uk","us","au","international"].includes(h.default.page.pageId)};t.Weather={init:function(){if(!h.default.switches||!h.default.switches.weather||!b())return!1;this.getDefaultLocation()},getUserLocation:function(){var t=g.default.get(_);if(t&&t.id)return t},getWeatherData:function(t){return(0,p.default)(t,{mode:"cors"})},saveUserLocation:function(t){g.default.set(_,{id:t.id,city:t.city})},getDefaultLocation:function(){var t=this,e=this.getUserLocation();return e?this.fetchWeatherData(e):this.getWeatherData(h.default.page.weatherapiurl+".json").then(function(e){t.fetchWeatherData(e)}).catch(function(t){(0,d.default)(t,{feature:"weather"})})},fetchWeatherData:function(t){var e=this,n=h.default.page.weatherapiurl,a=h.default.page.edition;return this.getWeatherData(n+"/"+t.id+".json?_edition="+a.toLowerCase()).then(function(n){e.render(n,t.city),e.fetchForecastData(t)}).catch(function(t){(0,d.default)(t,{feature:"weather"})})},clearLocation:function(){g.default.remove(_),null!==w&&w.setInputValue()},fetchForecastData:function(t){var e=this;return this.getWeatherData(h.default.page.forecastsapiurl+"/"+t.id+".json?_edition="+h.default.page.edition.toLowerCase()).then(function(t){e.renderForecast(t)}).catch(function(t){(0,d.default)(t,{feature:"weather"})})},saveDeleteLocalStorage:function(t){var e=this;"set"===t.store?(this.saveUserLocation(t),this.fetchWeatherData(t).then(function(){return e.toggleForecast()})):"remove"===t.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){var t=this;c.default.on(document.body,"click",".js-toggle-forecast",function(e){e.preventDefault(),t.toggleForecast()}),v.default.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){(0,f.default)(".weather").toggleClass("is-expanded")},addSearch:function(){w=new u.SearchTool({container:(0,f.default)(".js-search-tool"),apiUrl:h.default.page.locationapiurl})},render:function(t,e){this.attachToDOM(t.html,e),y||(this.bindEvents(),y=!0),null===w?this.addSearch():w.bindElements((0,f.default)(".js-search-tool"))},attachToDOM:function(t,e){m=(0,f.default)("#headlines .js-container__header"),(0,f.default)(".js-weather",m).remove(),m.append(t.replace(new RegExp("<%=city%>","g"),e))},renderForecast:function(t){var e=(0,f.default)(".js-weather-forecast"),n=t.html;e.empty().html(n)}},t._={isNetworkFront:b}}.apply(e,a))&&(t.exports=i)},644:function(t,e,n){var a,i;a=[e,n(46),n(65),n(19),n(21),n(15),n(20),n(0),n(31),n(4),n(63),n(311),n(138),n(528)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l,c,d,f,h){"use strict";function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t._=t.init=void 0;var v=p(e),g=p(n),m=p(a),w=p(i),y=p(o),_=p(r),b=p(s),k=p(u),j=p(l),C=p(c),x=p(d),S=p(f),M=p(h),$="js-button-text",D=Object.freeze({displayed:"displayed",loading:"loading",hidden:"hidden"}),F=function(t){var e=S.default.get("section-states",{type:"session"});return e&&e[t]?D.displayed:D.hidden},I=function(t,e){var n=S.default.get("section-states",{type:"session"})||{};e!==D.displayed?delete n[t]:n[t]="more",S.default.set("section-states",n,{type:"session"})},L=function(t,e){var n="/"+t+"/show-more/"+e+".json";return(0,x.default)(5e3,(0,k.default)(n,{mode:"cors"}))},E=function(t){return(0,M.default)((0,y.default)(".js-fc-item",t),function(t){return(0,m.default)(t).attr("data-id")})},T=function(t,e){var n=E(t),a=m.default.create(e);return(0,_.default)(".js-fc-item",a).each(function(t){var e=(0,m.default)(t);e.attr("data-id")in n&&e.remove()}),a},O=function(){function t(e,n){(0,v.default)(this,t),this.id=n.attr("data-id"),this.state=F(this.id),this.$el=e,this.$container=n,this.isLoaded=!1,this.$iconEl=(0,_.default)(".i",this.$el),this.$placeholder=(0,_.default)(".js-show-more-placeholder",this.$container),this.$textEl=(0,_.default)("."+$,this.$el),this.state===D.displayed&&this.loadShowMoreForContainer(),this.messages=new Map([[D.hidden,(0,_.default)(".js-button-text",this.$el).text()],[D.displayed,"Less"],[D.loading,"Loading&hellip;"]])}return(0,g.default)(t,[{key:"setState",value:function(t){this.$textEl.html(this.messages.get(t)),this.$el.attr("data-link-name",t===D.displayed?"less":"more").toggleClass("button--primary",t!==D.displayed).toggleClass("button--tertiary",t===D.displayed).toggleClass("collection__show-more--loading",t===D.loading),this.$container.toggleClass("fc-show-more--hidden",t!==D.displayed).toggleClass("fc-show-more--visible",t===D.displayed),this.state=t}},{key:"loadShowMoreForContainer",value:function(){var t=this;w.default.write(function(){t.setState(D.loading)}),L(b.default.page.pageId,this.id).then(function(e){var n=void 0,a=e.html.trim();a&&(n=T(t.$container,a)),w.default.write(function(){n&&t.$placeholder.replaceWith(n),t.setState(D.displayed),I(t.id,t.state),j.default.emit("modules:show-more:loaded")}),t.isLoaded=!0}).catch(function(e){w.default.write(function(){t.setState(D.hidden)}),t.showErrorMessage(),(0,C.default)(e,{feature:"container-show-more"},!1)})}},{key:"hideErrorMessage",value:function(){var t=this;w.default.write(function(){null!=t.$errorMessage&&t.$errorMessage.addClass("show-more__error-message--invisible")})}},{key:"showErrorMessage",value:function(){var t=this;this.$errorMessage&&this.$errorMessage.remove(),this.$errorMessage=(0,m.default)(m.default.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),w.default.write(function(){null!=t.$errorMessage&&(t.$errorMessage.insertAfter(t.$el),setTimeout(function(){t.hideErrorMessage()},5e3))})}}]),t}(),P=function(t){w.default.write(function(){t.setState(t.state===D.hidden?D.displayed:D.hidden),I(t.id,t.state)})},N=function(t){w.default.write(function(){t.$container.addClass("fc-show-more--hidden").removeClass("js-container--fc-show-more").toggleClass("fc-show-more--hidden",t.state===D.hidden),t.setState(t.state)})};t.init=function(){w.default.read(function(){var t=(0,y.default)(".js-container--fc-show-more").map(m.default),e=t.map(function(t){var e=(0,_.default)(".js-show-more-button",t);return e?new O(e,t):null}).filter(function(t){return null!=t});e.forEach(N),j.default.on("module:clickstream:click",function(t){var n=e.find(function(e){return e.$el[0]===t.target});n&&n.state!==D.loading&&(n.isLoaded?P(n):(n.$errorMessage&&n.$errorMessage.hide(),n.loadShowMoreForContainer()))})})},t._={itemsByArticleId:E,dedupShowMore:T}}.apply(e,a))&&(t.exports=i)},645:function(t,e,n){var a,i;a=[e,n(19),n(18)],void 0!==(i=function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resizeForFootballSnaps=void 0;var i=a(e),o=a(n);t.resizeForFootballSnaps=function(t){if("mobile"!==o.default.getBreakpoint()&&t){var e=(0,i.default)(t);e.css("height",e.parent().css("height"))}}}.apply(e,a))&&(t.exports=i)},647:function(t,e,n){var a,i;a=[],void 0!==(i=function(){function t(t){for(var e=-1,n=t?t.length:0,a=[];++e<n;){var i=t[e];i&&a.push(i)}return a}return t}.apply(e,a))&&(t.exports=i)},656:function(t,e,n){var a,i;a=[n(95),n(10)],void 0!==(i=function(t,e){function n(n){return t(n,16,e(arguments,1))}return n}.apply(e,a))&&(t.exports=i)},662:function(t,e,n){var a,i;a=[n(34),n(155)],void 0!==(i=function(t,e){function n(n,a,i,o){return e(n,a,"function"==typeof i&&t(i,o,2))}return n}.apply(e,a))&&(t.exports=i)},664:function(t,e,n){var a,i;a=[],void 0!==(i=function(){function t(t){return void 0===t}return t}.apply(e,a))&&(t.exports=i)},681:function(t,e){t.exports='<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'},682:function(t,e){t.exports='<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'},706:function(t,e){t.exports='<button class="fc-container__toggle" data-link-name="<%=dataLink%>">\n    <%=icon%>\n    <span class="fc-container__toggle__text"><%=text%></span>\n</button>\n'},707:function(t,e){t.exports='<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'},798:function(t,e,n){var a,i;a=[n(19),n(15),n(20),n(0),n(18),n(4),n(139),n(16),n(248),n(506),n(436),n(629),n(641),n(887),n(644),n(888),n(889),n(890),n(891),n(643),n(656)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l,c,d,f,h,p,v,g,m,w,y,_){var b={showSnaps:function(){m.init(),o.on("modules:container:rendered",m.init)},showContainerShowMore:function(){o.addListeners({"modules:container:rendered":p.init,"page:front:ready":p.init})},showContainerToggle:function(){var t=function(t){n(".js-container--toggle",n(t||document)[0]).each(function(t){new h(t).addToggle()})};o.addListeners({"page:front:ready":t,"modules:geomostpopular:ready":_(t,".js-popular-trails")})},upgradeMostPopularToGeo:function(){a.switches.geoMostPopular&&(new f.GeoMostPopularFront).go()},showWeather:function(){a.switches.weather&&o.on("page:front:ready",function(){y.Weather.init()})},showLiveblogUpdates:function(){i.isBreakpoint({min:"desktop"})&&o.on("page:front:ready",function(){g.show()})},finished:function(){o.emit("page:front:ready")}};return{init:function(){r.catchErrorsWithContext([["f-accessibility",l.shouldHideFlashingElements],["f-snaps",b.showSnaps],["f-show-more",b.showContainerShowMore],["f-container-toggle",b.showContainerToggle],["f-geo-most-popular",b.upgradeMostPopularToGeo],["f-lazy-load-containers",v],["f-stocks",d],["f-sponsorship",w],["f-weather",b.showWeather],["f-live-blog-updates",b.showLiveblogUpdates],["f-finished",b.finished]])}}}.apply(e,a))&&(t.exports=i)},887:function(t,e,n){var a,i;a=[n(30),n(19),n(21),n(20),n(4),n(138),n(7),n(196),n(706)],void 0!==(i=function(t,e,n,a,i,o,r,s,u){return function(t){function l(t){p=t,n.write(function(){c["displayed"===p?"removeClass":"addClass"]("fc-container--rolled-up"),d.attr("data-link-name",h["displayed"===p?"hidden":"displayed"]),f.text(h[p])})}var c=e(t),d=e(e.create(r(u,{text:"Hide",dataLink:"Show",icon:s.inlineSvg("arrowicon")}))),f=a(".fc-container__toggle__text",d[0]),h={hidden:"Show",displayed:"Hide"},p="displayed",v=function(t,e){var n=o.get("container-states"),a=t;"displayed"===e?delete n[a]:(n||(n={}),n[a]="closed"),o.set("container-states",n)},g=function(t){var e=o.get("container-states");e&&e[t]&&l("hidden")};o.remove("front-trailblocks"),this.addToggle=function(){var t=c.attr("data-id"),e=a(".js-container__header",c[0]);n.write(function(){e.append(d),c.removeClass("js-container--toggle").addClass("fc-container--has-toggle"),g(t)}),i.on("module:clickstream:click",function(e){e.target===d[0]&&(l("displayed"===p?"hidden":"displayed"),v(t,p))})}}}.apply(e,a))&&(t.exports=i)},888:function(t,e,n){var a,i;a=[n(21),n(15),n(18),n(4),n(257)],void 0!==(i=function(t,e,n,a,i){function o(t){var e=t.nextElementSibling.getBoundingClientRect().top;return-s<e&&e<2*s}function r(t){t.classList.remove("fc-container--lazy-load")}var s=n.getViewport().height;return function(){var n=e(".js-container--lazy-load"),s=i(function(){0===n.length?a.off("window:throttledScroll",s):t.read(function(){var e=n.reduce(function(t,e){return t[o(e)?"in":"out"].push(e),t},{in:[],out:[]});n=e.out,t.write(function(){e.in.forEach(r)})})},500);a.on("window:throttledScroll",s),s()}}.apply(e,a))&&(t.exports=i)},889:function(t,e,n){var a,i;a=[n(19),n(429),n(20),n(18),n(50),n(31),n(4),n(16),n(7),n(707),n(647),n(664),n(142),n(41),n(430),n(482)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l,c,d,f,h,p,v){function g(t){var n=(t||{}).publishedDateTime;return!!n&&e.makeRelativeDate(new Date(n))||""}function m(t,e,n){var a=g(e);return a=a.match(/yesterday/i)?a.toLowerCase():a?"Latest update "+a+" ago":"Updated just now",u(l,{ariaHidden:!e.isNew,href:"/"+t+"#"+e.id,relativeTime:a,text:c([e.title,e.body.slice(0,500)]).join(". "),index:n+1})}function w(e,n,a,o){var r=d(o);f(n,function(n){var s=!1,u=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],l=a.slice(0,2).map(function(t,n){return!s&&(t.publishedDateTime>o||r)&&(t.isNew=!0,s=!0,u.push("fc-item__liveblog-blocks__inner--offset")),m(e,t,n)}).slice(0,s?2:1),c=t.create('<div class="'+u.join(" ")+'">'+l.join("")+"</div>"),d=t(n);i.write(function(){d.append(c)}).then(function(){s&&y(c[0])})})}function y(t){_(t).then(function(e){var n;e||(n=h(function(){_(t,!0).then(function(t){t&&r.off("window:throttledScroll",n)})},C),r.on("window:throttledScroll",n))})}function _(e,n){return i.read(function(){return e.getBoundingClientRect().top}).then(function(a){if(a>0&&a<I)return setTimeout(function(){var n=t(e);i.write(function(){n.removeClass("fc-item__liveblog-blocks__inner--offset")})},n?0:j),!0})}function b(t){return p(t,function(t){return t.id&&t.publishedDateTime&&t.body&&t.body.length>=10})}function k(){return i.read(function(){var t={};return n($).each(function(e){var n=e.getAttribute(D);n&&(t[n]=t[n]||[],t[n].push(e))}),t}).then(function(t){var e;v(t)||(e=s.session.get(F)||{},f(t,function(t,n){o("/"+n+".json?rendered=false",{mode:"cors"}).then(function(a){var i=a&&b(a.blocks);i&&i.length&&(w(n,t,i,e[n]),e[n]=i[0].publishedDateTime,s.session.set(F,e))}).catch(function(){})}),M&&(M-=1,setTimeout(function(){k()},1e3*x),x*=S))})}var j=2e3,C=500,x=30,S=1,M=5,$=".js-liveblog-blocks",D="data-article-id",F="gu.liveblog.block-dates",I=a.getViewport().height;return{show:k}}.apply(e,a))&&(t.exports=i)},890:function(t,e,n){var a,i;a=[n(30),n(19),n(21),n(20),n(18),n(54),n(4),n(7),n(248),n(453),n(63),n(429),n(645),n(197),n(243)],void 0!==(i=function(t,e,n,a,i,o,r,s,u,l,c,d,f,h,p){function v(){u(a(".facia-snap-embed")).forEach(b),u(a(".js-snappable.js-snap")).filter(function(t){var e=a(t).hasClass("facia-snap-embed"),n=t.getAttribute("data-snap-type");return!e&&n&&k.indexOf(n)>-1}).filter(function(t){return t.getAttribute("data-snap-uri")}).forEach(_)}function g(t,e){m(t,e),a(t).hasClass("facia-snap--football")&&f.resizeForFootballSnaps(t)}function m(t,a){var i,o,r=e(t);o=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){i=t.offsetWidth}),n.write(function(){o.map(function(t,e,n){var o=i>=t.width&&(!n[e+1]||i<n[e+1].width);return t.action=o?"addClass":!!a&&"removeClass",t}).filter(function(t){return t.action}).forEach(function(t){r[t.action]("facia-snap-point--"+t.name)})})}function w(t){var a=e(t).offset(),i=Math.ceil((a.width||0)/2),o=t.getAttribute("data-snap-uri"),r=Math.min(Math.max(a.height||0,i),400),s=e.create('<div style="width: 100%; height: '+r+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],u=e.create('<iframe src="'+o+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];e(s).append(u),j.push(u),C(),n.write(function(){e(t).empty().append(s)})}function y(t,i){o(t.getAttribute("data-snap-uri"),{mode:"cors"}).then(function(t){return t.ok?i?t.json().then(function(t){return t.html}):t.text():Promise.reject(new Error("Fetch error: "+t.statusText))}).then(function(i){a.create(i).each(function(a){n.write(function(){e(t).html(a)})}),d.init(t)}).catch(function(t){c(t,{feature:"snaps"})})}function _(t){l.add(t,1500,function(){switch(n.write(function(){e(t).addClass("facia-snap-embed")}),g(t),t.getAttribute("data-snap-type")){case"document":w(t);break;case"fragment":y(t);break;case"json.html":y(t,!0)}i.isIOS||r.on("window:throttledResize",function(){g(t,!0)})})}function b(t){g(t),i.isIOS||r.on("window:throttledResize",function(){g(t,!0)})}var k=["document","fragment","json.html"],j=[],C=h(function(){t.on(window,"message",function(t){var n,a=p(j,function(e){return e.contentWindow===t.source});a&&(n=JSON.parse(t.data),"set-height"===n.type&&e(a).parent().css("height",n.value))})});return{init:v}}.apply(e,a))&&(t.exports=i)},891:function(t,e,n){var a,i;a=[n(30),n(19),n(21),n(15),n(240),n(662)],void 0!==(i=function(t,e,n,a,i,o){function r(){return new Promise(function(e){var n=function(a){c.push(a.keyCode),o(d.slice(0,c.length),c)?c.length===d.length&&(e(),t.off(document,"keydown",n)):c=[]};t.on(document,"keydown",n)})}function s(t,e){return Math.floor(Math.random()*(e-t+1))+t}function u(){return f[s(0,f.length-1)]}function l(){var t=i(a(".js-fc-item"),e);setInterval(function(){n.write(function(){t.forEach(function(t){f.forEach(function(e){t.removeClass(e)}),t.addClass(u())})})},1e3)}var c=[],d=[38,38,40,40,37,39,37,39,66,65],f=i(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(t){return"tone-"+t+"--item"});return function(){r().then(l)}}.apply(e,a))&&(t.exports=i)}});
//# sourceMappingURL=graun.facia.js.map