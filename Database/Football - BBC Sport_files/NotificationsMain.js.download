/*! Build 3.8.0 at Wed May 17 2017 12:25:23 GMT+0000 (UTC) for live */
define(function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n=window.notifWebpackP;window.notifWebpackP=function(e,i,a){for(var r,s,c=0,u=[];c<e.length;c++)s=e[c],o[s]&&u.push(o[s][0]),o[s]=0;for(r in i)t[r]=i[r];for(n&&n(e,i);u.length;)u.shift()()};var i={},o={0:0};return e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(r);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}if(0===o[t])return Promise.resolve();if(o[t])return o[t][2];var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,a.src=e.p+""+t+".NotificationsMain.js";var r=setTimeout(n,12e4);a.onerror=a.onload=n,i.appendChild(a);var s=new Promise(function(e,n){o[t]=[e,n]});return o[t][2]=s},e.m=t,e.c=i,e.oe=function(t){throw t},e.p="",e(e.s=33)}([function(t,e,n){var i;!function(o,a){"use strict";function r(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function s(t,e){for(var n,i=e.length,o=t.length;i>o;)n=e[--i],e.splice(i,1),n.unmount()}function c(t,e){Object.keys(t.tags).forEach(function(n){var i=t.tags[n];R(i)?v(i,function(t){N(t,n,e)}):N(i,n,e)})}function u(t,e,n){var i,o=t._root;for(t._virts=[];o;)i=o.nextSibling,n?e.insertBefore(o,n._root):e.appendChild(o),t._virts.push(o),o=i}function f(t,e,n,i){for(var o,a=t._root,r=0;r<i;r++)o=a.nextSibling,e.insertBefore(a,n._root),a=o}function l(t,e,n,i,o,a,r){q(e.root)||(t?a(e,i,n,r.childNodes.length):i.insertBefore(e.root,n.root))}function d(t,e,n){P(t,"each");var i,o=typeof S(t,"no-reorder")!==rt||P(t,"no-reorder"),a=L(t),d=et[a]||{tmpl:_(t)},h=dt.test(a),p=t.parentNode,y=document.createTextNode(""),b=A(t),m="option"===a.toLowerCase(),v=[],w=[],k="VIRTUAL"==t.tagName;n=mt.loopKeys(n),p.insertBefore(y,t),e.one("before-mount",function(){t.parentNode.removeChild(t),p.stub&&(p=e.root)}).on("update",function(){var _=mt(n.val,e),T=document.createDocumentFragment();R(_)||(i=_||!1,_=i?Object.keys(_).map(function(t){return r(n,t,_[t])}):[]);for(var E=0,P=_.length;E<P;E++){var x=_[E],S=o&&typeof x==st&&!i,O=w.indexOf(x),A=~O&&S?O:E,C=v[A];x=!i&&n.key?r(n,x,E):x,!S&&!C||S&&!~O||!C?(C=new g(d,{parent:e,isLoop:!0,hasImpl:!!et[a],root:h?p:t.cloneNode(),item:x},t.innerHTML),C.mount(),k&&(C._root=C.root.firstChild),E!=v.length&&v[E]?(l(k,C,v[E],p,v,u,t),w.splice(E,0,x)):k?u(C,T):T.appendChild(C.root),v.splice(E,0,C),A=E):C.update(x,!0),A!==E&&S&&v[E]&&(B(_,w[E])&&l(k,C,v[E],p,v,f,t),n.pos&&(C[n.pos]=E),v.splice(E,0,v.splice(A,1)[0]),w.splice(E,0,w.splice(A,1)[0]),!b&&C.tags&&c(C,E)),C._item=x,j(C,"_parent",e)}if(s(_,v),p.insertBefore(T,y),m&&yt&&!p.multiple)for(var N=0;N<p.length;N++)if(p[N].__riot1374){p.selectedIndex=N,delete p[N].__riot1374;break}b&&(e.tags[a]=v),w=_.slice()})}function h(t,e,n,i){H(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||S(t,"each")?1:0,n){var o=A(t);o&&!t.isLoop&&n.push(I(o,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!i||V(t,e,[])}})}function p(t,e,n){function i(t,e,i){mt.hasExpr(e)&&n.push(D({dom:t,expr:e},i))}H(t,function(t){var n,o=t.nodeType;if(3==o&&"STYLE"!=t.parentNode.tagName&&i(t,t.nodeValue),1==o)return(n=S(t,"each"))?(d(t,e,n),!1):(v(t.attributes,function(e){var n=e.name,o=n.split("__")[1];if(i(t,e.value,{attr:o||n,bool:o}),o)return P(t,n),!1}),!A(t)&&void 0)})}function g(t,e,n){function i(){var t=y&&g?f:d||f;v(T.attributes,function(e){if(!(e.name in A)){var n=e.value;l[x(e.name)]=mt.hasExpr(n)?mt(n,t):n}}),v(Object.keys(A),function(e){l[x(e)]=mt(A[e],t)})}function o(t){for(var e in b)typeof f[e]!==ct&&U(f,e)&&(f[e]=t[e])}function r(t){v(Object.keys(t),function(e){var n=!ht.test(e)&&B(C,e);(typeof f[e]===ct||n)&&(n||C.push(e),f[e]=t[e])})}function s(t){f.update(t,!0)}function c(t){if(v(k,function(e){e[t?"mount":"unmount"]()}),d){var e=t?"on":"off";g?d[e]("unmount",f.unmount):d[e]("update",s)[e]("unmount",f.unmount)}}var u,f=Z.observable(this),l=$(e.opts)||{},d=e.parent,g=e.isLoop,y=e.hasImpl,b=F(e.item),_=[],k=[],T=e.root,S=T.tagName.toLowerCase(),A={},C=[];t.name&&T._tag&&T._tag.unmount(!0),this.isMounted=!1,T.isLoop=g,T._tag=this,j(this,"_riot_id",++Q),D(this,{parent:d,root:T,opts:l},b),j(this,"tags",{}),v(T.attributes,function(t){var e=t.value;mt.hasExpr(e)&&(A[t.name]=e)}),u=vt(t.tmpl,n,g),j(this,"update",function(t,e){return t=F(t),g&&r(f.parent),t&&E(b)&&(o(t),b=t),D(f,t),i(),f.trigger("update",t),m(_,f),e&&f.parent?f.parent.one("updated",function(){f.trigger("updated")}):_t(function(){f.trigger("updated")}),this}),j(this,"mixin",function(){return v(arguments,function(t){var e,n,i=[];t=typeof t===rt?Z.mixin(t):t,e=w(t)?new t:t;var o=Object.getPrototypeOf(e);do i=i.concat(Object.getOwnPropertyNames(n||e));while(n=Object.getPrototypeOf(n||e));v(i,function(t){if("init"!=t){var n=Object.getOwnPropertyDescriptor(e,t)||Object.getOwnPropertyDescriptor(o,t),i=n&&(n.get||n.set);!f.hasOwnProperty(t)&&i?Object.defineProperty(f,t,n):f[t]=w(e[t])?e[t].bind(f):e[t]}}),e.init&&e.init.bind(f)()}),this}),j(this,"mount",function(){i();var e=Z.mixin(nt);if(e)for(var n in e)e.hasOwnProperty(n)&&f.mixin(e[n]);if(f._parent&&f._parent.root.isLoop&&r(f._parent),t.fn&&t.fn.call(f,l),p(u,f,_),c(!0),t.attrs&&G(t.attrs,function(t,e){O(T,t,e)}),(t.attrs||y)&&p(f.root,f,_),f.parent&&!g||f.update(b),f.trigger("before-mount"),g&&!y)T=u.firstChild;else{for(;u.firstChild;)T.appendChild(u.firstChild);T.stub&&(T=d.root)}j(f,"root",T),g&&h(f.root,f.parent,null,!0),!f.parent||f.parent.isMounted?(f.isMounted=!0,f.trigger("mount")):f.parent.one("mount",function(){q(f.root)||(f.parent.isMounted=f.isMounted=!0,f.trigger("mount"))})}),j(this,"unmount",function(t){var e,n=T,i=n.parentNode,o=tt.indexOf(f);if(f.trigger("before-unmount"),~o&&tt.splice(o,1),i){if(d)e=M(d),R(e.tags[S])?v(e.tags[S],function(t,n){t._riot_id==f._riot_id&&e.tags[S].splice(n,1)}):e.tags[S]=a;else for(;n.firstChild;)n.removeChild(n.firstChild);t?(P(i,at),P(i,ot)):i.removeChild(n)}this._virts&&v(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),f.trigger("unmount"),c(),f.off("*"),f.isMounted=!1,delete T._tag}),h(u,this,k)}function y(t,e,n,i){n[t]=function(t){var a,r=i._parent,s=i._item;if(!s)for(;r&&!s;)s=r._item,r=r._parent;t=t||o.event,U(t,"currentTarget")&&(t.currentTarget=n),U(t,"target")&&(t.target=t.srcElement),U(t,"which")&&(t.which=t.charCode||t.keyCode),t.item=s,e.call(i,t)===!0||/radio|check/.test(n.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(a=s?M(r):i,a.update())}}function b(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function m(t,e){v(t,function(t,n){var i=t.dom,o=t.attr,a=mt(t.expr,e),r=t.parent||t.dom.parentNode;if(t.bool?a=!!a:null==a&&(a=""),t.value!==a){if(t.value=a,!o)return a+="",void(r&&(t.parent=r,"TEXTAREA"===r.tagName?(r.value=a,gt||(i.nodeValue=a)):i.nodeValue=a));if("value"===o)return void(i.value!==a&&(i.value=a,O(i,o,a)));if(P(i,o),w(a))y(o,a,i,e);else if("if"==o){var s=t.stub,c=function(){b(s.parentNode,s,i)},u=function(){b(i.parentNode,i,s)};a?s&&(c(),i.inStub=!1,q(i)||H(i,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(s=t.stub=s||document.createTextNode(""),i.parentNode?u():(e.parent||e).one("updated",u),i.inStub=!0)}else"show"===o?i.style.display=a?"":"none":"hide"===o?i.style.display=a?"none":"":t.bool?(i[o]=a,a&&O(i,o,o),yt&&"selected"===o&&"OPTION"===i.tagName&&(i.__riot1374=a)):(0===a||a&&typeof a!==st)&&(z(o,it)&&o!=ot&&(o=o.slice(it.length)),O(i,o,a))}})}function v(t,e){for(var n,i=t?t.length:0,o=0;o<i;o++)n=t[o],null!=n&&e(n,o)===!1&&o--;return t}function w(t){return typeof t===ut||!1}function _(t){if(t.outerHTML)return t.outerHTML;var e=K("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function k(t,e){if(typeof t.innerHTML!=ct)t.innerHTML=e;else{var n=(new DOMParser).parseFromString(e,"application/xml");t.appendChild(t.ownerDocument.importNode(n.documentElement,!0))}}function T(t){return~pt.indexOf(t)}function E(t){return t&&typeof t===st}function P(t,e){t.removeAttribute(e)}function x(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function S(t,e){return t.getAttribute(e)}function O(t,e,n){var i=lt.exec(e);i&&i[1]?t.setAttributeNS(ft,i[1],n):t.setAttribute(e,n)}function A(t){return t.tagName&&et[S(t,at)||S(t,ot)||t.tagName.toLowerCase()]}function C(t,e,n){var i=n.tags[e];i?(R(i)||i!==t&&(n.tags[e]=[i]),B(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function N(t,e,n){var i,o=t.parent;o&&(i=o.tags[e],R(i)?i.splice(n,0,i.splice(i.indexOf(t),1)[0]):C(t,e,o))}function I(t,e,n,i){var o=new g(t,e,n),a=L(e.root),r=M(i);return o.parent=r,o._parent=i,C(o,a,r),r!==i&&C(o,a,i),e.root.innerHTML="",o}function M(t){for(var e=t;!A(e.root)&&e.parent;)e=e.parent;return e}function j(t,e,n,i){return Object.defineProperty(t,e,D({value:n,enumerable:!1,writable:!1,configurable:!0},i)),t}function L(t){var e=A(t),n=S(t,"name"),i=n&&!mt.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return i}function D(t){for(var e,n=arguments,i=1;i<n.length;++i)if(e=n[i])for(var o in e)U(t,o)&&(t[o]=e[o]);return t}function B(t,e){return~t.indexOf(e)}function R(t){return Array.isArray(t)||t instanceof Array}function U(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===ct||n&&n.writable}function F(t){if(!(t instanceof g||t&&typeof t.trigger==ut))return t;var e={};for(var n in t)ht.test(n)||(e[n]=t[n]);return e}function H(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)H(t,e),t=t.nextSibling}}function G(t,e){for(var n,i=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=i.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function q(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function K(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(t)}function Y(t,e){return(e||document).querySelectorAll(t)}function W(t,e){return(e||document).querySelector(t)}function $(t){return Object.create(t||null)}function J(t){return S(t,"id")||S(t,"name")}function V(t,e,n){var i,o=J(t),a=function(a){B(n,o)||(i=R(a),a?(!i||i&&!B(a,t))&&(i?a.push(t):e[o]=[a,t]):e[o]=t)};o&&(mt.hasExpr(o)?e.one("mount",function(){o=J(t),a(e[o])}):a(e[o]))}function z(t,e){return t.slice(0,e.length)===e}function X(t,e,n){var i=et[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",i&&t&&(i=new g(i,{root:t,opts:n},o)),i&&i.mount&&(i.mount(),B(tt,i)||tt.push(i)),i}var Z={version:"v2.6.8",settings:{}},Q=0,tt=[],et={},nt="__global_mixin",it="riot-",ot=it+"tag",at="data-is",rt="string",st="object",ct="undefined",ut="function",ft="http://www.w3.org/1999/xlink",lt=/^xlink:(\w+)/,dt=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ht=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,pt=["altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"],gt=0|(o&&o.document||{}).documentMode,yt=o&&!!o.InstallTrigger;Z.observable=function(t){function e(t,e){for(var n=t.split(" "),i=n.length,o=0;o<i;o++){var a=n[o];a&&e(a,o)}}t=t||{};var n={},i=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(i,o){return"function"!=typeof o?t:(e(i,function(t,e){(n[t]=n[t]||[]).push(o),o.typed=e>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,o){return"*"!=i||o?e(i,function(t,e){if(o)for(var i,a=n[t],r=0;i=a&&a[r];++r)i==o&&a.splice(r--,1);else delete n[t]}):n={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(o){for(var a,r=arguments.length-1,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c+1];return e(o,function(e,o){a=i.call(n[e]||[],0);for(var r,c=0;r=a[c];++c)r.busy||(r.busy=1,r.apply(t,r.typed?[e].concat(s):s),a[c]!==r&&c--,r.busy=0);n["*"]&&"*"!=e&&t.trigger.apply(t,["*",e].concat(s))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(t){function e(t){return t.split(/[\/?#]/)}function n(t,e){var n=new RegExp("^"+e[E](/\*/g,"([^/?#]+?)")[E](/\.\./,".*")+"$"),i=t.match(n);if(i)return i.slice(1)}function i(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function a(t){p=i(l,1),A[k](P,p),A[k](x,p),C[k](j,d),t&&l(!0)}function r(){this.$=[],t.observable(this),D.on("stop",this.s.bind(this)),D.on("emit",this.e.bind(this))}function s(t){return t[E](/^\/|\/$/,"")}function c(t){return"string"==typeof t}function u(t){return(t||I.href)[E](v,"")}function f(t){return"#"==g[0]?(t||I.href||"").split(g)[1]||"":(I?u(t):t||"")[E](g,"")}function l(t){var e,n=0==U;if(!(O<=U)&&(U++,R.push(function(){var e=f();(t||e!=y)&&(D[S]("emit",e),y=e)}),n)){for(;e=R.shift();)e();U=0}}function d(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[T]("download")||!e[T]("href")||e.target&&"_self"!=e.target||e.href.indexOf(I.href.match(v)[0])==-1||e.href!=I.href&&(e.href.split("#")[0]==I.href.split("#")[0]||"#"!=g[0]&&0!==u(e.href).indexOf(g)||"#"==g[0]&&e.href.split(g)[0]!=I.href.split(g)[0]||!h(f(e.href),e.title||C.title))||t.preventDefault()}}function h(t,e,n){return N?(t=g+s(t),e=e||C.title,n?N.replaceState(null,e,t):N.pushState(null,e,t),C.title=e,B=!1,l(),B):D[S]("emit",f(t))}var p,g,y,b,m,v=/^.+?\/\/+[^\/]+/,w="EventListener",_="remove"+w,k="add"+w,T="hasAttribute",E="replace",P="popstate",x="hashchange",S="trigger",O=3,A="undefined"!=typeof o&&o,C="undefined"!=typeof document&&document,N=A&&history,I=A&&(N.location||A.location),M=r.prototype,j=C&&C.ontouchstart?"touchstart":"click",L=!1,D=t.observable(),B=!1,R=[],U=0;M.m=function(t,e,n){!c(t)||e&&!c(e)?e?this.r(t,e):this.r("@",t):h(t,e,n||!1)},M.s=function(){this.off("*"),this.$=[]},M.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?b:m)(s(t),s(e));if("undefined"!=typeof n)return this[S].apply(null,[e].concat(n)),B=!0},this)},M.r=function(t,e){"@"!=t&&(t="/"+s(t),this.$.push(t)),this.on(t,e)};var F=new r,H=F.m.bind(F);H.create=function(){var t=new r,e=t.m.bind(t);return e.stop=t.s.bind(t),e},H.base=function(t){g=t||"#",y=f()},H.exec=function(){l(!0)},H.parser=function(t,i){t||i||(b=e,m=n),t&&(b=t),i&&(m=i)},H.query=function(){var t={},e=I.href||y;return e[E](/[?&](.+?)=([^&]*)/g,function(e,n,i){t[n]=i}),t},H.stop=function(){L&&(A&&(A[_](P,p),A[_](x,p),C[_](j,d)),D[S]("stop"),L=!1)},H.start=function(t){L||(A&&("complete"==document.readyState?a(t):A[k]("load",function(){setTimeout(function(){a(t)},1)})),L=!0)},H.base(),H.parser(),t.route=H}(Z);var bt=function(t){function e(t){return t}function n(t,e){return e||(e=v),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?u:"")}function i(t){if(t===y)return b;var e=t.split(" ");if(2!==e.length||h.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(p,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:b[4],e),e[5]=n(t.length>3?/\\({|})/g:b[5],e),e[6]=n(b[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+d,u),e[8]=t,e}function o(t){return t instanceof RegExp?s(t):v[t]}function a(t){(t||(t=y))!==v[8]&&(v=i(t),s=t===y?e:n,v[9]=s(b[9])),m=t}function r(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:a,get:function(){return m},enumerable:!0}),c=t,a(e)}var s,c,u="g",f=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,d=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,h=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),p=/(?=[[\]()*+?.^$|])/g,g={"(":RegExp("([()])|"+d,u),"[":RegExp("([[\\]])|"+d,u),"{":RegExp("([{}])|"+d,u)},y="{ }",b=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+d,u),y,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],m=t,v=[];return o.split=function(t,e,n){function i(t){e||r?u.push(t&&t.replace(n[5],"$1")):u.push(t)}function o(t,e,n){var i,o=g[e];for(o.lastIndex=n,n=1;(i=o.exec(t))&&(!i[1]||(i[1]===e?++n:--n)););return n?t.length:o.lastIndex}n||(n=v);var a,r,s,c,u=[],f=n[6];for(r=s=f.lastIndex=0;a=f.exec(t);){if(c=a.index,r){if(a[2]){f.lastIndex=o(t,a[2],f.lastIndex);continue}if(!a[3])continue}a[1]||(i(t.slice(s,c)),s=f.lastIndex,f=n[6+(r^=1)],f.lastIndex=s)}return t&&s<t.length&&i(t.slice(s)),u},o.hasExpr=function(t){return v[4].test(t)},o.loopKeys=function(t){var e=t.match(v[9]);return e?{key:e[1],pos:e[2],val:v[0]+e[3].trim()+v[1]}:{val:t.trim()}},o.array=function(t){return t?i(t):v},Object.defineProperty(o,"settings",{set:r,get:function(){return c}}),o.settings="undefined"!=typeof Z&&Z.settings||{},o.set=a,o.R_STRINGS=l,o.R_MLCOMMS=f,o.S_QBLOCKS=d,o}(),mt=function(){function t(t,i){return t?(s[t]||(s[t]=n(t))).call(i,e):t}function e(e,n){t.errorHandler&&(e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler(e))}function n(t){var e=i(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function i(t){var e,n=[],i=bt.split(t.replace(l,'"'),1);if(i.length>2||i[0]){var o,r,s=[];for(o=r=0;o<i.length;++o)e=i[o],e&&(e=1&o?a(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[r++]=e);e=r<2?s[0]:"["+s.join(",")+'].join("")'}else e=a(i[1],0,n);return n[0]&&(e=e.replace(d,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function a(t,e,n){function i(e,n){var i,o=1,a=h[e];for(a.lastIndex=n.lastIndex;i=a.exec(t);)if(i[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:a.lastIndex}if(t=t.replace(f,function(t,e){return t.length>2&&!e?c+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,a=[],s=0;t&&(o=t.match(u))&&!o.index;){var l,d,p=/,|([[{(])|$/g;for(t=RegExp.rightContext,l=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];d=(o=p.exec(t))[1];)i(d,p);d=t.slice(0,o.index),t=RegExp.rightContext,a[s++]=r(d,1,l)}t=s?s>1?"["+a.join(",")+'].join(" ").trim()':a[0]:r(t,e)}return t}function r(t,e,n){var i;return t=t.replace(g,function(t,e,n,o,a){return n&&(o=i?0:o+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+p+n,o&&(i="."===(a=a[o])||"("===a||"["===a)):o&&(i=!y.test(a.slice(o)))),t}),i&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(i?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(i?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var s={};t.haveRaw=bt.hasRaw,t.hasExpr=bt.hasExpr,t.loopKeys=bt.loopKeys,t.clearCache=function(){s={}},t.errorHandler=null;var c=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,f=RegExp(bt.S_QBLOCKS,"g"),l=/\u2057/g,d=/\u2057(\d+)~/g,h={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},p='"in this?this:'+("object"!=typeof o?"global":"window")+").",g=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,y=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=bt.version="v2.4.2",t}(),vt=function kt(){function kt(n,i,o){var a=n&&n.match(/^\s*<([-\w]+)/),r=a&&a[1].toLowerCase(),c=K("div",o&&T(r));return n=e(n,i),s.test(r)?c=t(c,n,r):k(c,n),c.stub=!0,c}function t(t,e,n){var i="o"===n[0],o=i?"select>":"table>";if(t.innerHTML="<"+o+e.trim()+"</"+o,o=t.firstChild,i)o.selectedIndex=-1;else{var a=r[n];a&&1===o.childElementCount&&(o=W(a,o))}return o}function e(t,e){if(!n.test(t))return t;var r={};return e=e&&e.replace(o,function(t,e,n){return r[e]=r[e]||n,""}).trim(),t.replace(a,function(t,e,n){return r[e]||n||""}).replace(i,function(t,n){return e||n||""})}var n=/<yield\b/i,i=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,o=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,a=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,r={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},s=gt&&gt<10?dt:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return kt}(),wt=function(t){if(!o)return{add:function(){},inject:function(){}};var e=function(){var t=K("style");O(t,"type","text/css");var e=W("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),n=e.styleSheet,i="";return Object.defineProperty(t,"styleNode",{value:e,writable:!0}),{add:function(t){i+=t},inject:function(){i&&(n?n.cssText+=i:e.innerHTML+=i,i="")}}}(Z),_t=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var n=0;e=function(t){var e=Date.now(),i=Math.max(16-(e-n),0);setTimeout(function(){t(n=e+i)},i)}}return e}(o||{});Z.util={brackets:bt,tmpl:mt},Z.mixin=function(){var t={},e=t[nt]={},n=0;return function(i,o,a){if(E(i))return void Z.mixin("__unnamed_"+n++,i,!0);var r=a?e:t;if(!o){if(typeof r[i]===ct)throw new Error("Unregistered mixin: "+i);return r[i]}w(o)?(D(o.prototype,r[i]||{}),r[i]=o):r[i]=D(r[i]||{},o)}}(),Z.tag=function(t,e,n,i,o){return w(i)&&(o=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(w(n)?o=n:wt.add(n)),t=t.toLowerCase(),et[t]={name:t,tmpl:e,attrs:i,fn:o},t},Z.tag2=function(t,e,n,i,o){return n&&wt.add(n),et[t]={name:t,tmpl:e,attrs:i,fn:o},t},Z.mount=function(t,e,n){function i(t){var e="";return v(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+at+'="'+t+'"],['+ot+'="'+t+'"]')}),e}function o(){var t=Object.keys(et);return t+i(t)}function a(t){if(t.tagName){var i=S(t,at)||S(t,ot);e&&i!==e&&(i=e,O(t,at,e),O(t,ot,e));var o=X(t,i||t.tagName.toLowerCase(),n);o&&c.push(o)}else t.length&&v(t,a)}var r,s,c=[];if(wt.inject(),E(e)&&(n=e,e=0),typeof t===rt?("*"===t?t=s=o():t+=i(t.split(/, */)),r=t?Y(t):[]):r=t,"*"===e){if(e=s||o(),r.tagName)r=Y(e,r);else{var u=[];v(r,function(t){u.push(Y(e,t))}),r=u}e=0}return a(r),c},Z.update=function(){return v(tt,function(t){t.update()})},Z.vdom=tt,Z.Tag=g,typeof e===st?t.exports=Z:"function"===ut&&typeof n(41)!==ct?(i=function(){return Z}.call(e,n,e,t),!(i!==a&&(t.exports=i))):o.riot=Z}("undefined"!=typeof window?window:void 0)},function(t,e,n){"use strict";var i=void 0,o=n(4),a=new o;window.require&&window.require(["istats-1"],function(t){i=t});var r=[];t.exports={track:function(t){return a.each(t,function(t,e){i.track(e,t)}),this},log:function(t,e,n){i&&i.log(t,e,n)},serialiseTopic:function(t){var e=void 0;return e=t.slice(0,5).join("!").replace(/urn:bbc:/g,"").replace(/:/g,"-"),e=t.length>5?e.concat("!more than 5"):e},logNewNotifications:function(t,e){var n=this;"shown"===e.getDrawerState()&&t.forEach(function(t){"new"===t.status&&r.indexOf(t.id)===-1&&(n.log("seen","notifications-item",{notifications_id:t.id,notifications_state:"blueDot",notifications_priority:(t.priority||"normal").toLowerCase(),notifications_product:t.product.toLowerCase(),notifications_type:t.type.toLowerCase(),notifications_title:t.notification.title,topic_name:n.serialiseTopic(t.topic)}),r.push(t.id))})}}},function(t,e,n){function i(t){if(t.status>=200&&t.status<400)return t;var e=new Error("HTTP request failed "+t.statusText);throw e.response=t,e}var o=n(9),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(1),s=n(8),c=n(3),u=void 0,f=["IPLAYER","MUSIC"],l={IPLAYER:"iPlayer",MUSIC:"Music"},d=["tv","music","radio","e2etest"],h=n(11);t.exports={friendlyProductNames:l,get:function(){return u},filterSubscriptionDomains:function(t){if(!t.topic)return!1;var e=t.topic.split(":");return!("urn"!==e[0]||"bbc"!==e[1]||!e[2])&&d.indexOf(e[2])!==-1},fetch:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e===!1&&u?Promise.resolve(u):o.refreshToken()["catch"](function(t){throw r.log("error-refresh-token","notifications-error"),t}).then(function(){return s(c.env.preferencesUrls.get,{credentials:"include"})})["catch"](function(t){throw t}).then(function(e){if(u=e,u.key)throw new Error(u);return u.preferences||(u.preferences={readFilter:"undefined"!=typeof h.filter?JSON.stringify(h.getCleanArray()):null}),u.preferences.productsEnabled||(u.preferences.productsEnabled=f.map(function(t){return{product:t,enabled:!0}})),u.subscriptions&&(u.subscriptions=u.subscriptions.filter(t.filterSubscriptionDomains)),u})},set:function(t){var e=this;if(!u)return!1;var n=a(u.preferences||{},t.preferences);return u.preferences=n,delete u.preferences.lastRead,delete u.preferences.currentDateTime,o.refreshToken()["catch"](function(t){throw t}).then(function(){return fetch(c.env.preferencesUrls.postPreference,{method:"POST",credentials:"include",headers:{Accept:"*/*","Content-Type":"application/json"},body:JSON.stringify(u.preferences)})}).then(i)["catch"](function(t){throw t}).then(function(){delete u.preferences.onboardingFlag,e.fetch()})},updateRead:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.set({preferences:{readFilter:"undefined"!=typeof h.filter?JSON.stringify(h.getCleanArray()):null,lastReadFlag:t}})},countActiveSubscriptions:function(){var t=0;return u.subscriptions&&u.subscriptions.forEach(function(e){e.enabled&&t++}),t},updateUserOnBoarding:function(t){var e=u.preferences||{};e||(e={lastReadFlag:!0,productsEnabled:[],readFilter:h.getCleanArray()},f.forEach(function(t){e.productsEnabled.push({product:t,enabled:!0})})),e.hasOnboarded=!0,e.onboardingFlag=!0,e.lastReadFlag=!0,this.set(u).then(t)["catch"](function(e){throw t(e),e})}}},function(t,e){"use strict";var n={feedBaseUrl:"//notifications.files.bbci.co.uk/",feedAggregatedInitialFeed:"latest.json",feedTopicInitialFeed:"latest.json",feedTopicMaxSubscriptions:12,preferencesUrls:{get:"https://preferences.notifications.api.bbc.co.uk/subscriptions",postPreference:"https://preferences.notifications.api.bbc.co.uk/preference",postPreferenceRelay:"https://preferences.notifications.api.bbc.co.uk/preference/relay",idcta:"https://ssl.bbc.co.uk/idcta/init"},under13s:{moreInfo:"http://www.bbc.co.uk/usingthebbc/account/what-are-child-permissions/"},idcta:{urls:{signin:"https://ssl.bbc.co.uk/id/signin",register:"https://ssl.bbc.co.uk/id/register"}},notificationsPollingInterval:6e5,preferencesPollingInterval:6e5,lockExpiry:3e4,cacheTimeout:6e5,visibleChunkAmount:10,maxNotificationAge:5};t.exports={env:n}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){};i.prototype={handledParse:function(t,e,n){try{return JSON.parse(t)}catch(i){return"function"==typeof n&&n(),e||null}},extend:function(){function t(t,n){e[o][n]=s.isObject(t)?s.extend(e[o][n],t,a):t}var e,n,i,o,a,r=Array.prototype.slice.call(arguments),s=this;if(0===r.length)return{};i=r[r.length-1],a=i===!0,"boolean"==typeof i&&r.pop();for(var c=0;c<r.length;c++)if(n=s.keys(r[c]),0!==n.length)for(var u in r[c])a&&!r[c].hasOwnProperty(u)||(e=e||{},s.isArray(r[c][u])&&a?"undefined"!=typeof e[u]&&s.isArray(e[u])?(o=u,s.forEach(r[c][u],t)):e[u]=r[c][u].slice():s.isObject(r[c][u])&&a?e[u]=s.isObject(e[u])?s.extend(e[u],r[c][u],a):s.extend(r[c][u],a):null!==r[c][u]&&void 0!==r[c][u]&&(e[u]=r[c][u]));return e},forEach:function(t,e,n){n=n||null;for(var i=0,o=t.length;i<o;i++)i in t&&e.call(n,t[i],i,t)},truncate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=t.substring(0,e+1);return t.length>e?n.indexOf(" ")==-1?n.substring(0,n.length-1).trim()+"...":n.substr(0,Math.min(n.length,n.lastIndexOf(" "))).trim()+"...":t},each:function(t,e,n){n=n||null;if(this.isObject(t))for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)},bind:function(t,e){if("function"==typeof t)return t.bind?t.bind(e):function(){t.apply(e,arguments)}},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},keys:function o(t){var o=[];for(var e in t)t.hasOwnProperty(e)&&o.push(e);return o},isObject:function(t){return"object"===("undefined"==typeof t?"undefined":n(t))&&null!==t}},t.exports=i},function(t,e,n){var i,o;!function(a,r){i=[e,n(0)],o=function(t,e){r(a.i18n=t,e)}.apply(e,i),!(void 0!==o&&(t.exports=o))}(this,function(t,e){function n(){this._entities={},this._default=i,this._language=this._default;var t=e.observable();this.on=t.on,this.off=t.off,this.trigger=t.trigger,this.on("lang",this.setLanguage)}var i="en";n.prototype.dictionary=function(t){this._entities=t},n.prototype.defaultLanguage=function(t){this._default=t},n.prototype.localise=function(t,e){function n(t,e,i,o){o=o||"",e=e||{},i=i||0;var a=t&&!t.length,r=a?Object.keys(t).length:0;if(a&&r>0){var s;for(s in t)o.split(".").length>i&&(o=o.split(".").splice(0,i).join(".")),o=0==i?s:o+"."+s,e=n(t[s],e,i+1,o)}else e[o]=t;return e}var i,o;if(this._entities[this._language]||(i=t),i||(o=n(this._entities[this._language]),i=o[t]?o[t]:t),e){var a,r=n(e);for(a in r)i=i.replace(new RegExp("{"+a+"}","g"),r[a])}return i},n.prototype.setLanguage=function(t){this._language=t||this._default,this.trigger("update")},n.prototype.getLanguage=function(){return this._language};var o,a=new n;for(o in a)t[o]=a[o];e.mixin("i18n",{i18n:t}),e.tag2("i1-8n",'<span name="localised"></span> <span name="original" class="original"><yield></yield></span>','i1-8n,[riot-tag="i1-8n"] { display: inline-block; } i1-8n .original,[riot-tag="i1-8n"] .original { display: none; }',"",function(t){this.mixin("i18n"),this.i18n.on("update",function(){this.update()}.bind(this)),this.on("mount update",function(){this.localised.innerHTML=this.i18n.localise(this.original.innerHTML)})})})},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={isMatchingKeyEvent:function(t,e,i){if(t.type===e||"any"===e){var o=t.which||t.charCode;return"object"!==("undefined"==typeof i?"undefined":n(i))&&(i=[i]),i.indexOf(o)!==-1}return!1},addEvent:function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])))},removeEvent:function(t,e,n){t&&(t.removeEventListener?t.removeEventListener(e,n,!1):(t.detachEvent("on"+e,t[e+n]),t[e+n]=null))},triggerEvent:function(t,e,n,i){var o=document.createEvent("Event");i=i||!1,""===o.type&&o.initEvent(e,!0,i),o.data=n||{},t.dispatchEvent(o)}}},function(t,e){"use strict";function n(t,e,n){if("function"==typeof Array.prototype.find)return t.find(e,n);n=n||this;var i,o=t.length;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(i=0;i<o;i++)if(e.call(n,t[i],i,t))return t[i]}t.exports=n},function(t,e,n){"use strict";function i(t){try{JSON.parse(t)}catch(e){return!1}return!0}function o(t){if(!t)return null;if(i(t))return JSON.parse(t);var e=t;return e=e.substring(e.indexOf("(")+1),e=e.substring(0,e.length-1),JSON.parse(e)}function a(t){if(t.status>=200&&t.status<500)return t;var e=new Error("HTTP request failed "+t.statusText);throw e.response=t,e}n(12),t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="bbc-notifications-"+t;return n&&sessionStorage.getItem(i)?new Promise(function(t){
t(JSON.parse(sessionStorage.getItem(i)))}):fetch(t,e).then(a).then(function(t){return 404===t.status?null:t.text()}).then(function(t){var e=o(t);return n&&e&&sessionStorage.setItem(i,JSON.stringify(e)),e})["catch"](function(t){throw t})}},function(t,e,n){function i(){return new Promise(function(t){a?t(a):window.require(["idcta/idcta-1"],function(e){a=e,t(a)})})}function o(){return new Promise(function(t,e){window.require(["idcta/idcta-1"],function(n){n.initiateTokenRefresh(void 0,void 0,!0).then(function(e){t(e)})["catch"](function(t){e(t)})})})}e.lib=i,e.refreshToken=o;var a=void 0},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(8),r=n(3),s=n(2),c=n(7),u=function(){function t(){i(this,t),this.MINIMUM_TO_DISPLAY=8;var e=s.get();this.topics=e.subscriptions.filter(function(t){return t.enabled}),this.topicKeys=this.topics.map(function(t){return t.topic})}return o(t,[{key:"dedupeData",value:function(t){var e=[],n=[];return t.forEach(function(t){e.indexOf(t.id)>=0||(n.push(t),e.push(t.id))}),n}},{key:"filterData",value:function(t){var e=this,n=s.get(),i=n.preferences.productsEnabled.filter(function(t){return t.enabled}).map(function(t){return t.product});return this.topics=n.subscriptions.filter(function(t){return t.enabled}),this.topicKeys=this.topics.map(function(t){return t.topic}),t.filter(function(t){return i.indexOf(t.product)!==-1&&t.topic.some(function(n){if(e.topicKeys&&e.topicKeys.indexOf(n)!==-1){var i=c(e.topics,function(t){return t.topic===n});if(i&&new Date(t.creationTimestamp)>new Date(i.lastSubscribed))return!0}return!1})})}},{key:"loadData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest.json",n="https:"+r.env.feedBaseUrl+t+"/"+e,i=new Date;return a(n,{},"latest.json"!==e)["catch"](function(t){throw t}).then(function(t){var e=[];if(!t)return{list:e,next:null,reachedEnd:!0};var n=!1;t.notifications&&t.notifications.forEach(function(t){var o=new Date(t.creationTimestamp),a=Math.abs(i.getTime()-o.getTime()),s=Math.floor(a/864e5);s>=r.env.maxNotificationAge&&(n=!0,s>r.env.maxNotificationAge)||e.push(t)});var o=t.next&&"false"!==t.next?t.next:null;return{list:e,next:o,reachedEnd:n}})}}]),t}();Object.defineProperty(e,"BaseCollection",{configurable:!1,enumerable:!0,get:function(){return u}})},function(t,e,n){var i=n(32);t.exports=new i.BloomFilterManager("readFilter")},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function r(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=r(e);return e.readAsArrayBuffer(t),n}function c(t){var e=new FileReader,n=r(e);return e.readAsText(t),n}function u(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&v(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var n=e.body;if(t instanceof h){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(o))}}),e}function g(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var o=n.join(":").trim();e.append(i,o)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,i){t=e(t),i=n(i);var o=this.map[t];this.map[t]=o?o+","+i:i},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,i){this.map[e(t)]=n(i)},o.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},l.call(h.prototype),l.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];y.redirect=function(t,e){if(k.indexOf(e)===-1)throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=h,t.Response=y,t.fetch=function(t,e){return new Promise(function(n,i){var o=new h(t,e),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:g(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new y(e,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&b.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){function i(t){var e="; "+document.cookie,n=e.split("; "+t+"=");if(2===n.length)return n.pop().split(";").shift()}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",o=new Date;o.setFullYear(o.getFullYear()+1),document.cookie=encodeURIComponent(t)+"="+i+"; expires="+o.toGMTString()+(e?"; domain="+e:"")+(n?"; path="+n:"")}e.get=i,e.set=o},function(t,e){"use strict";t.exports={en:{copy:{noNotifications1:"No notifications right now. We'll let you know when something from your favourite programmes, artists and playlists is available for you.",noNotifications2:"If your notifications are turned off, you can always turn them back on. Just go to settings.",settings:"You can turn on and off any notifications you receive from iPlayer and Music. Turning notifications off will clear any you already have.",upsell:{title:"Never miss <br /> your favourites",body:"Get notifications about your favourite programmes, music and more."},onboardingInfo1:"This is the place to get notifications about your favourite programmes, music, radio and more.",onboardingInfo2:"We'll give you notifications about anything already in your favourites, and anything new you add. You can manage your notifications any time in Settings.",onboardingInfo3:"Notifications are based on things you&#146;ve added…",onboardingInfo4:"… like TV and radio programmes, music artists and playlists.",ok:"OK, I'm in",showMeMore:"Show me more",error:{somethingWentWrong:"Sorry, something has gone wrong.",hubDisplay:"There's been an error and your notifications <br />can't be displayed at the moment. Please try again later.",hubUpdate:"Sorry, something has gone wrong.<br/>&nbsp;Your notifications could not be updated. Please try again later.",settingsDisplay:"There's been an error and your notifications settings <br />cannot be retrieved. Please try again later.",settingsUpdate:"Sorry, something has gone wrong.<br/>&nbsp;Your settings could not be updated. Please try again later.",onboarding:"There's been an error and we are unable to get you <br /> started with notifications. Please try again later."},under13:{moreInfo:"Find out more about child permissions",parentId:{title:"Want to hear about new stuff first?",body:"To get notifications about stuff you love, you need to link BBC accounts with your parent or guardian and get their permission.",button:"OK, ask for permission"},linkPending:{title:"You need permission from a parent or guardian to use notifications",body:"We've sent them an email that tells them what to do. Ask them to check their inbox and follow the steps. To send a new email, visit your BBC account settings."},permissionNotifications:{title:"You need permission from a parent or guardian to use notifications",body:"They can give permission by visiting the Child Permissions section in their BBC account settings."},done:"All done! You can now use your notifications."}}},cy:{Notifications:"Hysbysiadau","Notifications Settings":"Gosodiadau'r Hysbysiadau",Settings:"Gosodiadau","Here's a notification about a new clip from BBC Music.":"Dyma hysbysiad am glip newydd gan BBC Music.","Here's a notification about a new episode in iPlayer.":"Dyma hysbysiad am bennod newydd yn iPlayer.",Back:"Nôl","day ago":"dydd yn ôl","days ago":"o ddyddiau yn ôl","hour ago":"awr yn ôl","hours ago":"awr yn ôl","minute ago":"munud yn ôl","minutes ago":"o funudau yn ôl",Yesterday:"Ddoe","10 minutes ago":"10 munud yn ôl","Just now":"Eiliad yn ôl","{product} Notifications":"Gosodiadau {product}","Sign in":"Mewngofnodi",or:"neu",Register:"Gofrestru","Notifications are based on things you've added…":"Mae hysbysiadau wedi eu seilio ar bethau rydych chi wedi eu hychwanegu…","… like TV and radio programmes, music artists and playlists.":"… fel rhaglenni teledu a radio, cerddoriaeth, artistiaid a rhestrau chwarae.","You'll get notifications when there's something new…":"Byddwch yn cael eich hysbysu pan mae yna rywbeth newydd…","… like an interview with a music artist you've added. Or an episode of a show you've added on iPlayer.":"… fel cyfweliad ag artist rydych chi wedi ei ychwanegu. Neu bennod o sioe rydych chi wedi ei ychwanegu ar iPlayer.","You're in charge":"Yn eich dwylo chi","Visit your Settings any time to manage your notifications.":"Ewch i'ch Gosodiadau unrhyw bryd i reoli eich hysbysiadau.","Load More":"Llwytho mwy",Close:"Cau","Go to Next slide":"Mynd i'r sleid nesaf","Go to Previous slide":"Mynd i'r sleid flaenorol","Go to slide 1":"Mynd i sleid 1","Go to slide 2":"Mynd i sleid 2","Go to slide 3":"Mynd i sleid 3",copy:{noNotifications1:"Dim hysbysiadau ar hyn o bryd. Byddwn ni'n gadael i chi wybod pan mae rhywbeth gan eich hoff raglenni, artistiaid a rhestrau chwarae ar gael i chi.",noNotifications2:"Os ydy'ch hysbysiadau wedi eu diffodd, gallwch eu troi nôl ymlaen. Ewch i'r gosodiadau.",settings:"Gallwch droi hysbysiadau iPlayer a Music ymlaen neu eu diffodd. Bydd diffodd yr hysbysiadau yn cael gwared ar y rhai rydych chi wedi eu cael yn barod.",upsell:{title:"Peidiwch â methu eich ffefrynnau",body:"Hysbysiadau am eich hoff rhaglenni, cerddoriaeth a mwy."},onboardingInfo1:"Dyma'r lle i gael hysbysiadau am eich hoff raglenni, cerddoriaeth, radio a mwy. ",onboardingInfo2:"Byddwn yn eich hysbysu am unrhywbeth sydd yn eich ffefrynnau yn barod, ac unrhywbeth rydych chi'n ei ychwanegu. Gallwch reoli eich hysbysiadau unrhyw bryd yn y Gosodiadau.",onboardingInfo3:"Mae hysbysiadau wedi eu seilio ar bethau rydych chi wedi eu hychwanegu…",onboardingInfo4:"… fel rhaglenni teledu a radio, cerddoriaeth, artistiaid a rhestrau chwarae.",ok:"Iawn",showMeMore:"Dangos mwy",error:{somethingWentWrong:"Mae rhywbeth wedi mynd o'i le.",hubDisplay:"'Dyw hi ddim yn bosib dangos eich hysbysiadau ar hyn o bryd. Triwch eto nes ymlaen.",hubUpdate:"'Dyw eich hysbysiadau ddim yn gallu cael eu diweddaru. Triwch eto nes ymlaen.",settingsDisplay:"Mae yna broblem gyda'r gosodiadau ar hyn o bryd. Triwch eto nes ymlaen.",settingsUpdate:"'Dyw hi ddim yn bosib diweddaru eich gosodiadau. Triwch eto nes ymlaen.",onboarding:"'Dyw hi ddim yn bosib dechrau arni ar hyn o bryd. Triwch eto nes ymlaen."},under13:{moreInfo:"Dysgu mwy am ganiatâd i blant",parentId:{title:"Eisiau clywed am bethau newydd gyntaf?",body:"Er mwyn derbyn hysbysiadau am dy hoff bethau, rhaid i ti gysylltu cyfrifon BBC gyda dy riant neu warchodwr er mwyn cael eu caniatâd.",button:"Iawn, gofyn am ganiatâd"},linkPending:{title:"Rwyt ti angen caniatâd rhiant neu warchodwr i ddefnyddio hysbysiadau",body:"Rydyn ni wedi anfon e-bost atyn nhw sy’n egluro beth i’w wneud. Maen nhw angen edrych yn eu mewnflwch a dilyn y cyfarwyddiadau. Er mwyn cael e-bost newydd, cer i osodiadau dy gyfrif BBC."},permissionNotifications:{title:"Rwyt ti angen caniatâd rhiant neu warchodwr i ddefnyddio hysbysiadau",body:"Gallan nhw roi caniatâd drwy fynd i adran Caniatâd i Blant yng ngosodiadau eu cyfrif BBC."},done:"Barod! Nawr galli di ddefnyddio dy hysbysiadau."}}},gd:{Notifications:"Fiosan","Notifications Settings":"Seataidhean Fiosa",Settings:"Seataidhean","Here's a notification about a new clip from BBC Music.":"Seo fios mu chriomag ùr bho BBC Music.","Here's a notification about a new episode in iPlayer.":"Seo fios mu phrògram ùr ann an iPlayer.",Back:"Air ais","day ago":"latha air ais","days ago":"làithean air ais","hour ago":"uair air ais","hours ago":"uairean air ais","minute ago":"mhionaid air ais","minutes ago":"mionaidean air ais",Yesterday:"An-dè","10 minutes ago":"10 mionaidean air ais","Just now":"An-dràsta","{product} Notifications":"Fiosan {product}","Sign in":"Log a-steach",or:"no",Register:"Clàraich","Notifications are based on things you've added…":"Tha fiosan stèidhichte air rudan a chur thu ris...","… like TV and radio programmes, music artists and playlists.":"… mar phrògraman Tbh agus rèidio, luchd ciùil agus clàran-ciùil.","You'll get notifications when there's something new…":"Gheibh thu fiosan nuair a tha rudan ùra ann…","… like an interview with a music artist you've added. Or an episode of a show you've added on iPlayer.":"… mar agallamh le luchd ciùil a chur thu ris. No prògram a chur thu ris ann an iPlayer.","You're in charge":"'S tusa a tha os cionn chùisean!","Visit your Settings any time to manage your notifications.":"Thèid gu Seataidhean airson rian a chumail air d' fhiosan","Load More":"Faic tuilleadh",Close:"Dùin","Go to Next slide":"An ath slaighd","Go to Previous slide":"An slaighd roimhe","Go to slide 1":"Rach gu slaighd 1","Go to slide 2":"Rach gu slaighd 2","Go to slide 3":"Rach gu slaighd 3",copy:{noNotifications1:"Chan eil fiosan ann an-dràsta. Leigidh sinn fios nuair a bhios rudeigin ann bho na prògraman, luchd ciùil is clàran-ciùil as fheàrr leat.",noNotifications2:"Ma tha d’ fhiosan air an cur dheth, faodaidh tu an cur air a-rithist le bhith dol gu seataidhean.",settings:"Faodar brathan a tha thu a' faighinn bho iPlayer agus Music a chur air is dheth. Thèid an fheadhainn a th' agad mar-thà a dhubhadh às le bhith gan cuir dheth.",upsell:{title:"Na caill na rudan as fheàrr leat",body:"Faigh fiosan mu na prògraman 's an ceòl as fheàrr leat agus gu leòr eile."},onboardingInfo1:"Seo far am faighear fiosan mu na prògraman 's an ceòl as fheàrr leat agus gu leòr eile.",onboardingInfo2:"Cuiridh sinn fiosan thugad mu na rudan a tha nad roghainnean agus rud sam bith eile a chuireas tu ris. Faodaidh tu rian a chumail air iad seo ann an Seataidhean.",onboardingInfo3:"Tha fiosan stèidhichte air rudan a chur thu ris...",onboardingInfo4:"… mar phrògraman Tbh agus rèidio, luchd ciùil agus clàran-ciùil.",ok:"Ceart",showMeMore:"Seall tuilleadh",error:{somethingWentWrong:"Duilich, tha rudeigin air a dhol ceàrr.",hubDisplay:"Chaidh rudeigin ceàrr is chan urrainnear d’ fhiosan a shealltainn an-dràsta. Feuch a-rithist.",hubUpdate:"Duilich, tha rudeigin air a dhol ceàrr. Cha b’ urrainnear d' fhiosan ùrachadh. Feuch a-rithist.",settingsDisplay:"Chaidh rudeigin ceàrr is chan fhaighear do sheataidhean fiosa. Feuch a-rithist.",settingsUpdate:"Duilich, tha rudeigin air a dhol ceàrr. Cha b’ urrainnear do sheataidhean ùrachadh. Feuch a-rithist.",onboarding:"Chaidh rudeigin ceàrr is chan fhaigh sinn air d’ fhiosan a chur an sàs. Feuch a-rithist."},under13:{moreInfo:"Faigh a-mach tuilleadh mu cheadan cloinne",parentId:{title:"Airson cluinntinn mu rudan ùra an toiseach?",body:"Feumaidh tu cead fhaighinn bho do phàrant no do neach-cùraim agus do chunntas BBC a cheangal ris an fhear acasan airson fiosan fhaighinn mu na rudan a tha a’ còrdadh riut.",button:"Ceart, iarr cead"},linkPending:{title:"Feumar cead fhaighinn bho phàrant no neach-cùraim airson fiosan a chleachdadh",body:"Tha sinn air post-d a chur thuca le stiùireadh. Iarr orra sùil a thoirt air na puist-d aca agus na ceumannan a' leantainn. Tadhal air seataidhean cunntais a' BhBC airson post-d a chur air falbh."},permissionNotifications:{title:"Feumar cead fhaighinn bho phàrant no neach-cùraim airson fiosan a chleachdadh",body:"Faodaidh iadsan cead a thoirt le bhith tadhal air Ceadan Chloinne ann an seataidhean cunntais a' BhBC."},done:"Dèanta! Faodaidh tu na fiosan agad a chleachdadh."}}},ga:{Notifications:"Fógraí","Notifications Settings":"Socruithe na bhFógraí",Settings:"Socruithe","Here's a notification about a new clip from BBC Music.":"Seo fógra faoi ghearrthóg úr ó BBC Music.","Here's a notification about a new episode in iPlayer.":"Seo fógra faoi eagrán úr ar iPlayer.",Back:"Siar","day ago":"lá ó shin","days ago":"lá ó shin","hour ago":"uair ó shin","hours ago":"uair ó shin","minute ago":"nóiméad ó shin","minutes ago":"nóiméad ó shin",Yesterday:"Inné","10 minutes ago":"10 mbomaite ó shin","Just now":"Díreach ansin","{product} Notifications":"Fógraí {product}","Sign in":"Sínigh isteach",or:"nó",Register:"Cláraigh","Notifications are based on things you've added…":"Tá fógraí bunaithe ar rudaí a chuir tú leis…","… like TV and radio programmes, music artists and playlists.":"… mar shampla, cláir TV, raidió, ceoltóirí agus seinnliostaí.","You'll get notifications when there's something new…":"Gheobhaidh tú fógraí nuair atá rudaí úra ann.","… like an interview with a music artist you've added. Or an episode of a show you've added on iPlayer.":"… ar nós agallaimh le ceoltóir a chuir tú leis, nó eagrán de chlár a chuir tú le iPlayer.","You're in charge":"Tá tú i gceannas!","Visit your Settings any time to manage your notifications.":"Tabhair cuairt ar do chuid Socruithe le go dtig leat smacht a choinneáil orthu.","Load More":"Lódáil tuilleadh",Close:"Druid","Go to Next slide":"Téigh go céad sleamhnán eile","Go to Previous slide":"Téigh go sleamhnán roimhe","Go to slide 1":"Téigh go sleamhnán 1","Go to slide 2":"Téigh go sleamhnán 2","Go to slide 3":"Téigh go sleamhnán 3",copy:{noNotifications1:"Níl fógraí ann faoi láthair. Beidh muid i dteagmháil leat má bhíonn rud éigin ar fáil a bhaineann leis na cláir, na ceoltóirí nó na seinnliostaí is ansa leat.",noNotifications2:"Má tá do chuid fógraí múchta, thig leat iad a chur air arís. Téigh go socruithe.",settings:"Thig leat fógraí ó iPlayer agus Music a chur air nó as. Glanfaidh tú na fógraí atá agat cheana féin má mhúchann tú iad.",upsell:{title:"Ná caill do chianáin riamh",body:"Aimsigh fógraí faoi do chianáin, do cheol agus níos mó."},onboardingInfo1:"Is anseo a dtig leat fógraí a aimsiú faoi na cláir, faoin cheol, faoin raidió is ansa leat agus níos mó.",onboardingInfo2:"Cuirfidh muid fógraí ar fáil duit faoi rud ar bith atá i do chianáin cheana féin agus faoi rud ar bith úr a chuireann tú leo. Thig leat smacht a bheith agat ar do chuid fógraí am ar bith in Socruithe.",onboardingInfo3:"Tá fógraí bunaithe ar rudaí a chuir tú leis…",onboardingInfo4:"… mar shampla, cláir TV, raidió, ceoltóirí agus seinnliostaí.",ok:"Ceart go leor",showMeMore:"Taispeáin a thuilleadh",error:{somethingWentWrong:"Tá brón orainn, tá rud éigin cearr.",hubDisplay:"Tá rud éigin cearr agus ní féidir do chuid fógraí a fheiceáil faoi láthair. Triail arís níos moille, le do thoil.",hubUpdate:"Tá brón orainn, tá rud éigin cearr. Ní féidir do chuid fógraí a uasdátú. Triail arís níos moille, le do thoil.",settingsDisplay:"Tá fadhb le socruithe na bhfógraí s'agat agus níl fáil orthu. Triail arís níos moille, le do thoil.",settingsUpdate:"Tá brón orainn, tá rud éigin cearr. Ní féidir do chuid fógraí a uasdátú. Triail arís níos moille, le do thoil.",onboarding:"Tá fadhb éigin ann agus ní féidir do chuid fógraí a chur sa tsiúl. Triail arís níos moille, le do thoil."},under13:{moreInfo:"Tuilleadh eolais ar cheadanna páistí",parentId:{title:"Ar mhaith leat bheith ar an eolas faoin stuif úr ar dtús?",body:"Le fógraí a fháil ar an stuif is ansa leat, beidh ort cuntais BBC a nascadh le do thuismitheoir nó le do chaomhnóir agus a c(h)ead a fháil.",button:"Maith go leor, iarr cead."},linkPending:{title:"Tá cead tuismitheora nó caomhnóra de dhíth ort le fógraí a úsáid",body:"Sheol muid ríomhphost chucu a insíonn dóibh cad é atá le déanamh. Iarr orthu a mbosca isteach a sheiceáil agus na céimeanna a leanúint. Le ríomhphost úr a sheoladh, tabhair cuairt ar shocruithe do chuntais BBC."},permissionNotifications:{title:"Tá cead tuismitheora nó caomhnóra de dhíth ort le fógraí a úsáid",body:"Thig leo cead a thabhairt ach dul chuig Ceadanna Páistí i socruithe a c(h)untais BBC."},done:"Déanta! Thig leat d’fhógraí a úsáid anois."}}}}},function(t,e,n){function i(t,e){document.documentElement.classList&&a.indexOf(t)===-1&&(document.documentElement.classList.add("n-"+(e?"":"no-")+t),a.push(t))}function o(){var t="ontouchstart"in window;return i("touchevents",t),t}e.touchevents=o;var a=[]},function(t,e){"use strict";!function(){var t={};if(!Object.setPrototypeOf&&!t.__proto__){var e=Object.getPrototypeOf;Object.getPrototypeOf=function(t){return t.__proto__?t.__proto__:e.call(Object,t)}}}()},function(t,e,n){(function(t){t.tag2("bbc-notifications-bell",'<a name="notificationLink" id="notification-link" class="js-notification-link animated three notifications-shown {swing: opts.alert, notifications-black-bell: opts.state.signedIn === true, notifications-grey-bell: opts.state.signedIn !== true}" href="#"> <span class="hidden-span" style="height: 1px; width: 1px; position: absolute; overflow: hidden; top: -10px;">Notifications</span> <div class="notification-link--triangle"></div> <div class="notification-link--triangle"></div> <span id="not-num" class="{\'new-notifications\': opts.alert}"></span> <span aria-live="polite" class="notification-link__live notification-link__live--js">{opts.alert ? this.getAlertText() : \'\'}</span> </a>',"","",function(t){"use strict";var e=this;this.on("mount",function(){t.mainApp.setNotificationIcon()}),this.getAlertText=function(){var t=e.parent.opts.mainApp.getDrawerState();return"hidden"===t?'New Notification. To view open the "Notification Panel" link.':"New Notification available."}})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-drawer",'<bbc-notifications-error-banner if="{opts.error.inner && !opts.error.main}" type="{opts.error.inner}"></bbc-notifications-error-banner> <bbc-notifications-error-view if="{opts.error.main}" type="{opts.error.main}"></bbc-notifications-error-view> <div if="{!opts.error.main && opts.state}"> <bbc-notifications-signed-in-view if="{opts.state.signedIn === true}" main-app="{opts.mainApp}" component-app="{opts.componentApp}" state="{opts.state}" notifications="{opts.notifications}" reached-end="{opts.reachedEnd}" loading-more="{opts.loadingMore}" load-onboarding="{this.loadOnboarding}" view="{opts.view}"></bbc-notifications-signed-in-view> <bbc-notifications-signed-out-view if="{opts.state.signedIn === false}" state="{opts.state}"></bbc-notifications-signed-out-view> </div>',"","",function(t){"use strict";var e=this;this.basePath=t.mainApp.basePath,this.on("mount",function(){var n="notifications",i=document.createElement("div");i.className="orb-panel",i.appendChild(e.root),t.orb.addDrawer(n,document.querySelector(".js-notification-link"),i,t.componentApp.drawerStateChangedCallback)}),this.on("updated",function(){if(e.updateFocus){var n=document.querySelector(e.updateFocus);n&&n.focus(),e.updateFocus=null}t.mainApp.updateDrawerHeight()})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-error-banner",'<section class="notification-error__container"> <div if="{opts.type == \'settings\'}" class="notifications-error--inner show" id="settings-error-inner"> <p class=" notifications-error--inner__body notifications-10/12"><i1-8n>copy.error.settingsUpdate</i1-8n></p> </p> <div class="notifications-error--inner__container"> <div aria-label="Close notification error message" class="notifications-error--inner__close" aria-action="close" onclick="{this.closeInner}">&nbsp;</div> </div> </div> </section>',"","",function(t){"use strict";var e=this,i=n(1);this.closeInner=function(){e.parent.parent.error.inner=null,e.parent.parent.update()},this.on("mount",function(){i.log("error4-settings-fail","notifications-error")})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-error-view",'<section class="notification-error__container"> <div if="{opts.type == \'hub\'}" class="notifications-error show" id="hub-error-main"> <div class="notifications-error__header"> <p class="notifications-error__header--text"><i1-8n>copy.error.somethingWentWrong</i1-8n></p> </div> <p class="notifications-pica notifications-error__body"><i1-8n>copy.error.hubDisplay</i1-8n></p> </div> <div if="{opts.type == \'settings\'}" class="notifications-error show" id="settings-error-main"> <div class="notifications-error__header"> <p class="notifications-error__header--text"><i1-8n>copy.error.somethingWentWrong</i1-8n></p> </div> <p class="notifications-pica notifications-error__body"><i1-8n>copy.error.settingsDisplay</i1-8n></p> <div class="notifications-error__back" aria-action="close"> <div class="notifications-error__back__arrow"> </div> <div class="notifications-error__back__text"><i1-8n>Back</i1-8n> </div> </div> </div> <div if="{opts.type == \'onboarding\'}" class="notifications-error show" id="onboarding-error-main"> <div class="notifications-error__header"> <p class="notifications-error__header--text"><i1-8n>copy.error.somethingWentWrong</i1-8n></p> </div> <p class="notifications-pica notifications-error__body"><i1-8n>copy.error.onboarding</i1-8n></p> </div> </section>',"","",function(t){})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-home-view",'<header class="notifications__header notifications__header--js {\'shadowAdded\': shadowAdded}"> <h2 class="notification-title"><i1-8n>Notifications</i1-8n></h2> <ul class="notification-header-icons"> <li><a href="javascript:;" class="notifications__settings--js" onkeydown="{this.onSettingsKeydown}" onclick="{parent.openSettings}"><img class="setting-icon notifications-image" riot-src="{this.basePath + \'/svg/setting.svg\'}" alt="Settings"><span class="notifications-brevier"><i1-8n>Settings</i1-8n></span></a></li> </ul> </header> <div class="notification-panel" style="display: block;"> <bbc-notifications-list if="{opts.notifications.length}" main-app="{opts.mainApp}" component-app="{opts.componentApp}" notifications="{opts.notifications}" reached-end="{opts.reachedEnd}" loading-more="{opts.loadingMore}"></bbc-notifications-list> <div if="{!opts.notifications.length}" id="no-notifications" class="no-notifications"> <div class="noVariant--element"> <p class="notifications-long-primer"><i1-8n>copy.noNotifications1</i1-8n></p> <p class="notifications-long-primer"><i1-8n>copy.noNotifications2</i1-8n></p> </div> </div> </div>',"","",function(t){"use strict";var e=this;this.basePath=t.mainApp.basePath,this.onSettingsKeydown=function(t){if(9===t.keyCode&&t.shiftKey){var n=document.querySelector(".notifications-keyboard-access--close");if(n)return n.focus(),!1;var i=document.querySelector(".notification-items .notification-item:last-child a");if(i)return i.focus(),!1}else 13===t.keyCode?e.updateFocus=".notifications__settings__back-btn--js":9!==t.keyCode||t.shiftKey||document.querySelectorAll("bbc-notifications-list .notification-item").length||e.update({
showKeyboardAccess:!0});return!0}})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-idcta-html","<span></span>","","",function(t){"use strict";function e(t){var e=decodeURI(t);if(i.indexOf(e)===-1){var n=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");o.type="text/javascript",o.appendChild(document.createTextNode(e)),n.insertBefore(o,n.firstChild),n.removeChild(o),i.push(e)}}var n=this,i=[];this.on("mount",function(){if(n.root.innerHTML=t.html,t.htmlJs&&e(t.htmlJs),t.trackUpsellSignIn&&t.trackUpsellRegister){var i=n.root.querySelectorAll("a");2===i.length&&(i.item(0).onclick=t.trackUpsellSignIn,i.item(1).onclick=t.trackUpsellRegister)}})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-list",'<div id="notifications-wrapper" onmousewheel="{this.onListMouseWheel}" onscroll="{this.onListScroll}"> <ul if="{opts.notifications.length}" class="notification-items" aria-live="polite" aria-relevant="additions" aria-atomic="true"> <li class="notification-item notification__item--js {status ? \'notification-\' + status : \'\'}" each="{opts.notifications}"> <a class="notification-item--link" href="{notification.url}" onclick="{this.onLinkClick}" onkeydown="{this.onLinkKeyDown}"> <div class="notification-icon-and-dot notification-{product.toLowerCase()}"> <span class="notification-dot {status ? \'notification-\' + status : \'\'}"></span> <div class="notifications-image notification-{product.toLowerCase()}-icon"> </div> </div> <div class="notification-text {status ? \'notification-\' + status : \'\'}"> <div class="notification-title-items"> <div> <p class="notification-text-body notifications-long-primer">{this.title(notification)}</p> </div> <div class="notification-item--info"> <span class="notification-episode-name notifications-brevier">{this.label(notification.episode, product)}</span> <span class="notification-time notifications-brevier">{sampleWhen ? sampleWhen : this.timeago(creationTimestamp)}</span> </div> </div> </div> </a> </li> </ul> <div class="spinner" if="{opts.loadingMore}"> <img class="loader-icon notifications-image spinner__img--svg" riot-src="{this.basePath + \'/svg/loader.svg\'}" alt="Spinner"> </div> <div class="notifications-keyboard-access" if="{this.showKeyboardAccess}"> <button class="notifications-keyboard-access--btn notifications-keyboard-access--more" onclick="{this.keyboardLoadMore}" __disabled="{opts.reachedEnd}">Load More</button> <button name="notificationsKeyboardClose" class="notifications-keyboard-access--btn notifications-keyboard-access--close" onclick="{this.closeDrawer}" onkeydown="{this.onKeyboardCloseDown}">Close</button> </div> </div>',"","",function(t){"use strict";var e=this,i=n(4),o=n(1);this.timeago=n(40),this.utils=new i;var a=0,r=50;this.basePath=t.mainApp.basePath,this.on("mount",function(){}),this.loadMore=function(){return(!document.activeElement||!document.activeElement.classList||!document.activeElement.classList.contains("notification-item--link")&&!document.activeElement.classList.contains("notifications-keyboard-access--btn"))&&void(t.componentApp.loadingMore||t.componentApp.reachedEnd||t.componentApp.fetchNotifications(!0))},this.onListMouseWheel=function(e){return e.preventUpdate=!0,!t.notifications.length||(e.currentTarget.offsetHeight>=e.currentTarget.scrollHeight||(e.deltaY>0?!(e.currentTarget.scrollTop>=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight):!(0===e.currentTarget.scrollTop)))},this.onListScroll=function(t){t.preventUpdate=!0,!e.parent.shadowAdded&&t.currentTarget.scrollTop>a?e.parent.update({shadowAdded:!0}):e.parent.shadowAdded&&t.currentTarget.scrollTop<=a&&e.parent.update({shadowAdded:!1}),t.currentTarget.scrollTop>=t.currentTarget.scrollHeight-t.currentTarget.offsetHeight-r&&e.loadMore()},this.capitalizeFirstLetter=function(t){return"iplayer"===t.toLowerCase()?"iPlayer":t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},this.closeDrawer=function(){document.getElementById("notification-link").click(),document.activeElement&&document.querySelector(".orb-nav-news a").focus()},this.onLinkClick=function(n){var i=n.item.notification.url,a=e.getAnalyticsNotificationStatus(n.item.status);return o.log("click","notifications-item",{notifications_id:n.item.id,notifications_state:a,notifications_priority:(n.item.priority||"normal").toLowerCase(),notifications_product:n.item.product.toLowerCase(),notifications_type:n.item.type.toLowerCase(),notifications_title:n.item.notification.title,topic_name:o.serialiseTopic(n.item.topic)}),t.componentApp.notificationsModel.markRead(n.item).then(function(){window.location.assign(i)}),n.preventDefault&&n.preventDefault(),!1},this.getAnalyticsNotificationStatus=function(t){switch(t){case"new":return"blueDot";case"unread":return"new";default:return"read"}},this.onLinkKeyDown=function(t){if(9===t.keyCode){var n=document.activeElement.parentNode.nextSibling,i=!(n.classList&&n.classList.contains("notification-item"));i&&e.update({showKeyboardAccess:!0})}return!0},this.onKeyboardCloseDown=function(t){return!(9===t.keyCode&&!t.shiftKey)||(document.querySelector(".notifications__settings--js").focus(),!1)},this.keyboardLoadMore=function(){var n=document.querySelectorAll(".notification-items .notification-item").length;t.componentApp.fetchNotifications(!0).then(function(){var t=document.querySelector(".notification-items\n                    .notification-item:nth-child("+(n+1)+") a");t?t.focus():e.notificationsKeyboardClose.focus()})},this.title=function(t){var e="–";return t.title+(t.episode?" "+e+" "+t.episode:"")},this.label=function(t,n){return e.capitalizeFirstLetter(n)}})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-onboarded-view",'<bbc-notifications-onboarding-u13-success if="{this.showU13Success}" main-app="{opts.mainApp}"></bbc-notifications-onboarding-u13-success> <div class="notifications-main notifications__container notifications-{this.view} notifications-{this.view}--js notifications-main--css notification-signed-in"> <bbc-notifications-home-view if="{this.view === \'home\'}" main-app="{opts.mainApp}" component-app="{opts.componentApp}" notifications="{opts.notifications}" reached-end="{opts.reachedEnd}" loading-more="{opts.loadingMore}"></bbc-notifications-home-view> <bbc-notifications-settings-view if="{this.view === \'settings\'}" main-app="{opts.mainApp}" component-app="{opts.componentApp}"></bbc-notifications-settings-view> </div>',"","",function(t){"use strict";var e=this,i=n(1);this.view=t.view,this.on("mount",function(){"undefined"!=typeof localStorage&&t.state.signedIn&&localStorage.getItem("bbc-notifications-u13-pending-policy")&&(e.update({showU13Success:!0}),localStorage.removeItem("bbc-notifications-u13-pending-policy"))}),this.hideU13Success=function(){e.update({showU13Success:!1})},this.openSettings=function(){return i.log("click","notifications-settings"),e.update({view:"settings"}),!1},this.closeSettings=function(){return e.update({view:"home"}),!1},this.on("updated",function(){t.mainApp.updateDrawerHeight()})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-onboarding-async",'<div class="spinner"> <img class="loader-icon notifications-image spinner__img--svg" riot-src="{this.parent.parent.opts.mainApp.basePath + \'/svg/loader.svg\'}" alt="Spinner"> </div>',"","",function(e){"use strict";var n=this;this.on("mount",function(){n.parent.parent.opts.mainApp.loadOnboarding(function(e){var i={onboard:e,mainApp:n.parent.parent.opts.mainApp,componentApp:n.parent.parent.parent};t.mount(n.root,"bbc-notifications-onboarding",i)})})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-onboarding-u13-success",'<div class="notifications__container"> <div class="notifications-banner--row"> <span><i1-8n>copy.under13.done</i1-8n></span> <button class="notifications-banner--close" onclick="{parent.hideU13Success}"> <img riot-src="{this.basePath + \'/svg/close_icon.svg\'}" alt="Close"> </button> </div> </div>',"","",function(t){"use strict";this.basePath=t.mainApp.basePath})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-onboarding-u13",'<div class="notifications-full notifications-u13--onboarding-image"> <div class="notifications__container"> <div class="notifications-u13--close-drawer" onclick="{close}"></div> <div class="notifications-u13--content"> <div class="notifications-layout"> <div class="notifications-layout__item gel-bp-s-8/12 gel-bp-m-6/12"> <div if="{opts.state.policyIssue === \'parentId\'}" id="bbc-notifications-onboarding-u13-parentID"> <p class="notifications-trafalgar-bold"><i1-8n>copy.under13.parentId.title</i1-8n></p> <p class="notifications-pica"><i1-8n>copy.under13.parentId.body</i1-8n></p> </div> <div if="{opts.state.policyIssue === \'linkPending\'}" id="bbc-notifications-onboarding-u13-linkPending"> <p class="notifications-trafalgar-bold"><i1-8n>copy.under13.linkPending.title</i1-8n></p> <p class="notifications-pica"><i1-8n>copy.under13.linkPending.body</i1-8n></p> </div> <div if="{opts.state.policyIssue === \'permissionNotifications\'}" id="bbc-notifications-onboarding-u13-permissionNotifications"> <p class="notifications-trafalgar-bold"><i1-8n>copy.under13.permissionNotifications.title</i1-8n></p> <p class="notifications-pica"><i1-8n>copy.under13.permissionNotifications.body</i1-8n></p> </div> </div> </div> <div class="notifications-layout"> <div class="notifications-20/24 notifications-layout__item notifications-u13--options"> <div if="{opts.state.policyIssue === \'parentId\'}"> <a href="{buttonLink}" class="notifications-u13--ok-button notifications-pica-bold"><span><i1-8n>copy.under13.parentId.button</i1-8n></span></a> </div> <div class="notifications-u13--more"> <a href="{this.moreInfoLink}" class="notifications-pica-bold"><span class="notifications-u13--info-icon"></span><i1-8n>copy.under13.moreInfo</i1-8n></a> </div> </div> </div> </div> <div class="notifications-u13--overlay"></div> </div> </div>',"","",function(t){"use strict";var e=this,i=n(3);this.moreInfoLink=i.env.under13s.moreInfo,this.close=function(){t.mainApp.navNotificationElement.click()},this.on("mount",function(){if(t.state.idctaResponse&&t.state.idctaResponse.html&&t.state.policyIssue&&"parentId"===t.state.policyIssue){var n=t.state.idctaResponse.html.match(/<a\s+(?:[^>]*?\s+)?href="([^"]*)"/);n[1]&&e.update({buttonLink:n[1]})}"undefined"!=typeof localStorage&&localStorage.setItem("bbc-notifications-u13-pending-policy",!0)})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-settings-view",'<header class="notifications__header notifications__header--js"> <h2 class="notification-title notification-title--js"><i1-8n>Notifications Settings</i1-8n></h2> <ul class="notification-header-icons"> <li> <a href="javascript:;" class="notifications__settings__back-btn--js" onkeydown="{this.onBackKeydown}" onclick="{parent.closeSettings}" role="link" title="Go back" alt="Go back" aria-label="Go back"><img class="setting-icon notifications-image" riot-src="{this.basePath + \'/svg/arrow_left_black.svg\'}" alt="back"><span class="notifications-brevier"><i1-8n>Back</i1-8n></span></a> </li> </ul> </header> <div class="notifications-settings-description"> <p class="notifications-long-primer"><i1-8n>copy.settings</i1-8n></p> </div> <div each="{this.products}" class="notifications-settings-item notifications-settings-product--js" role="checkbox" aria-checked="{enabled}"> <label tabindex="0" onkeydown="{this.onLabelKeydown}"> <div class="notifications-long-primer notifications-settings-text">{this.getProductSettingLabel(product)}</div> <input type="checkbox" name="checkbox" id="{product}-settings-checkbox" class="notifications-settings-tickbox" value="{product}" __checked="{enabled}" onchange="{this.productChange}"> <div class="notifications-settings-checkbox-hold"></div> </label> </div>',"","",function(t){"use strict";var e=this,i=n(1),o=n(2),a=n(5);this.friendlyProductNames=o.friendlyProductNames,this.basePath=t.mainApp.basePath,this.getProductSettingLabel=function(t){return a.localise("{product} Notifications",{product:e.friendlyProductNames[t]})},this.updatePref=function(n,a){n.enabled=a.checked,o.set({preferences:{lastReadFlag:!1,productsEnabled:e.products}})["catch"](function(e){throw a.checked=!a.checked,n.enabled=a.checked,t.componentApp.update({error:{inner:"settings"}}),e}).then(function(){i.log(n.enabled?"opt-in":"opt-out","notifications-settings",{nots_product:n.product.toLowerCase()}),t.componentApp.resetNotifications()})},this.productChange=function(t){e.updatePref(t.item,t.currentTarget)},this.onBackKeydown=function(t){return 9===t.keyCode&&t.shiftKey?(document.querySelector(".notifications-settings-product--js:last-child label").focus(),!1):(13===t.keyCode&&(e.parent.updateFocus=".notifications__settings--js"),!0)},this.onLabelKeydown=function(t){if(9!==t.keyCode||t.shiftKey){if(13===t.keyCode){var n=t.currentTarget.querySelector("input");return n.checked=!n.checked,e.updatePref(t.item,n),!1}}else{var i=document.activeElement.parentNode.nextSibling,o=!(i.classList&&i.classList.contains("notifications-settings-product--js"));if(o)return document.querySelector(".notifications__settings__back-btn--js").focus(),!1}return!0},this.on("mount",function(){var t=o.get();e.update({products:t.preferences.productsEnabled})})})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-signed-in-view",'<bbc-notifications-onboarding-async if="{opts.state.onboarded === false && opts.loadOnboarding}"></bbc-notifications-onboarding-async> <bbc-notifications-onboarding-u13 if="{opts.state.onboarded === true && opts.state.policyIssue}" main-app="{opts.mainApp}" state="{opts.state}"></bbc-notifications-onboarding-u13> <bbc-notifications-onboarded-view if="{opts.state.onboarded === true && !opts.state.policyIssue}" main-app="{opts.mainApp}" component-app="{opts.componentApp}" state="{opts.state}" notifications="{opts.notifications}" reached-end="{opts.reachedEnd}" loading-more="{opts.loadingMore}" view="{opts.view}"></bbc-notifications-onboarded-view>',"","",function(t){})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications-signed-out-view",'<div class="notifications-main notifications-main--css notifications-main--js notification-signed-out"> <div class="notifications-wide-spread"> <div class="notifications__container"> <div class="notifications-top-header"> <p class="notifications-main-header notifications-trafalgar"><i1-8n>copy.upsell.title</i1-8n></p> <p class="notifications-description notifications-pica"><i1-8n>copy.upsell.body</i1-8n></p> </div> <div class="notifications-cta notifications-cta--upsell"> <bbc-notifications-idcta-html html="{opts.state.idctaResponse.html}" html-js="{opts.state.idctaResponse.htmlJs}" track-upsell-sign-in="{this.trackUpsellSignIn}" track-upsell-register="{this.trackUpsellRegister}"></bbc-notifications-idcta-html> </div> </div> </div> </div>',"","",function(t){"use strict";var e=n(1);this.trackUpsellSignIn=function(){return e.log("sign-in","notifications-upsell"),!0},this.trackUpsellRegister=function(){return e.log("register","notifications-upsell"),!0}})}).call(e,n(0))},function(t,e,n){(function(t){t.tag2("bbc-notifications",'<bbc-notifications-bell main-app="{opts.mainApp}" state="{this.state}" alert="{this.alert}"></bbc-notifications-bell> <bbc-notifications-drawer main-app="{opts.mainApp}" component-app="{this}" state="{this.state}" notifications="{this.notifications}" reached-end="{this.reachedEnd}" loading-more="{this.loadingMore}" error="{this.error}" orb="{opts.orb}" load-onboarding="{this.loadOnboarding}" view="{this.view}"></bbc-notifications-drawer>',"","",function(t){"use strict";var e=this;n(12);var i=n(3),o=n(1),a=n(34).NotificationsModel,r=n(2),s=n(35).UserState,c=new s;this.alert=!1,this.notifications=[],this.reachedEnd=!1,this.loadingMore=!1,this.error={},this.loadOnboarding=!1,this.view="home",this.loadState=function(){return c.load().then(function(t){e.update({state:t}),t.signedIn===!0&&(t.onboarded===!1||t.onboarded===!0&&t.policyIssue?e.update({alert:!0}):t.onboarded!==!0||t.policyIssue||r.fetch(!1).then(function(){return e.initModel()}))})["catch"](function(t){o.log("error1-retrieve-fail","notifications-error"),e.setError("main","hub")}).then(function(){e.trigger("stateLoaded")})},this.on("mount",this.loadState),this.on("notificationsUserOnboardedOutsideDrawer",function(){this.loadState()}),this.initModel=function(){e.notificationsModel||(e.notificationsModel=new a,e.fetchNotifications(),window.setInterval(e.fetchNotifications,i.env.notificationsPollingInterval),window.setInterval(e.fetchPreferences,i.env.preferencesPollingInterval))},this.fetchNotifications=function(n){n&&e.update({loadingMore:!0});var i=e.notifications.length;return e.notificationsModel.fetch(n)["catch"](function(t){throw o.log("error2-update-fail","notifications-error"),e.setError("main","hub"),t}).then(function(n){if(n){var a=n.notifications,r=n.reachedEnd;e.notifications=a,r&&(e.reachedEnd=r),e.loadingMore=!1;var s=!1;a.forEach(function(t){"new"===t.status&&(s=!0)}),s&&(o.logNewNotifications(e.notifications,t.mainApp),a.length>i&&(e.alert=!0)),e.removeError("main"),e.update(),e.trigger("fetchedNotifications")}})},this.fetchPreferences=function(){r.fetch()["catch"](function(t){throw o.log("error2-update-fail","notifications-error"),e.setError("main","hub"),t}).then(function(){e.removeError("main")})},this.setError=function(t,n){e.error[t]=n,e.update()},this.removeError=function(t){delete e.error[t],e.update()},this.resetNotifications=function(){e.update({notifications:[],reachedEnd:!1}),e.notificationsModel.reset(),e.fetchNotifications()},this.drawerStateChangedCallback=function(n){if(e.update({alert:!1}),"hidden"===n){if(o.log("close-pane","notifications-icon"),e.notificationsModel){var i=e.notificationsModel.markAllAsSeen();e.update({notifications:i})}}else e.update({view:"home"}),e.state&&(e.state.signedIn===!1?o.log("upsell","notifications-icon"):e.state.onboarded?(r.updateRead(!0),o.logNewNotifications(e.notifications,t.mainApp)):0===Object.keys(e.error).length&&e.update({loadOnboarding:!0}));e.trigger("drawerStateChanged",n)},this.on("updated",function(){t.mainApp.updateWrapperMaxHeight()})})}).call(e,n(0))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),r=n(4),s=new r,c=8192,u=function(){function t(e){i(this,t),this.filterName=e,this.filter=new a(c,16)}return o(t,[{key:"override",value:function(t){"string"==typeof t&&""!==t&&(t=s.handledParse(t,[])),s.isArray(t)&&0===t.length&&(t=c),this.filter=new a(t,16)}},{key:"add",value:function(t){t&&""!==t&&this.filter.add(t)}},{key:"getCleanArray",value:function(){return[].slice.call(this.filter.buckets)}},{key:"contains",value:function(t){return!(!t||""===t)&&this.filter.test(t)}},{key:"checkOrAdd",value:function(t){t&&""!==t&&(this.contains(t)||this.add(t))}}]),t}();Object.defineProperty(e,"BloomFilterManager",{configurable:!1,enumerable:!0,get:function(){return u}})},function(t,e,n){function i(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!==-1&&parseInt(t.split("msie")[1],10)<=9}var o=n(15);n(16);var a={run:function(){}};if(!i()){n(17),n(18),n(23),n(28),n(25),n(27),n(26),n(19),n(20),n(22),n(29),n(30),n(24),n(21),n(31);var r=n(5),s=n(14),c=n(13);r.dictionary(s);var u=c.get("ckps_language");u&&s[u]&&r.setLanguage(u);var f=n(6),l=n(4),d=new l,h=n(0),p=n(2),g=void 0;a={name:"mainApp",drawerName:"notifications",errorState:!1,notificationPanelCreated:!1,run:function(t,e){var i=this;window.require&&window.require(["orb/nav","idcta/id-config"],function(o,a){i.basePath=e||"",n.p=i.basePath+"js/",i.orb=o,i.setIdcta(t,a);var r=document.getElementById("mybbc-wrapper"),s=document.getElementById("notification-link");if(s){r.removeChild(s);var c=document.createElement("bbc-notifications");r.appendChild(c)}h.mount("bbc-notifications",{orb:o,mainApp:i}),f.addEvent(document,"ready",i._setHubResizeEvent())})},_setHubResizeEvent:function(){var t=this,e=void 0;["resize","orientationchange"].forEach(function(n){f.addEvent(window,n,function(){e&&clearTimeout(e),e=setTimeout(d.bind(t.updateWrapperMaxHeight,t),100)})}),this.updateWrapperMaxHeight()},setIdcta:function(t,e){"function"==typeof t.getInstance?this.idcta=t.getInstance():this.idcta=t,this.idConfig=e},isWindowsPhone:function(){return navigator.appVersion.indexOf("Win")!==-1&&"undefined"!=typeof window.navigator.pointerEnabled&&null!==navigator.userAgent.match(/.+windows.+(touch|phone).+/i)},updateWrapperMaxHeight:function(){var t=420,e=o.touchevents()||this.isWindowsPhone()?.75:.65,n=document.querySelector(".orb-nav-pri-container"),i=null!==n?n.offsetHeight:0,a=44,r=document.documentElement.clientHeight||window.innerHeight,s=r*e-i-a;o.touchevents()||this.isWindowsPhone()||(s=Math.min(s,t));var c=document.querySelector("#notifications-wrapper");c&&(c.style.maxHeight=s+"px"),this.orb.updateDrawerHeight(this.drawerName)},updateDrawerHeight:function(){return this.orb.updateDrawerHeight(this.drawerName)},isUserOnBoarded:function(){var t=p.get(),e=t.preferences;return null!==e&&"undefined"!=typeof e.hasOnboarded&&e.hasOnboarded},loadOnboarding:function(t){this.loadOnboardingStyles(),n.e(1).then(n.bind(null,38)).then(t)},loadOnboardingStyles:function(){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=this.basePath+"css/onboarding.min.css",document.getElementsByTagName("head")[0].appendChild(t)},getOnboardingParams:function(t){return{mainElSelector:".notifications-on-boarding--js",app:this,componentApp:t,isIE:this.isIE(),resizeEvent:d.bind(this._setHubResizeEvent,this)}},setNotificationIcon:function(){var t=this;this.navNotificationElement=document.querySelector(".js-notification-link"),this.navNotificationElement.onkeydown=function(e){var n=e.which||e.charCode;13===n&&(t.lastEnterPress=Date.now())},this.orb.refresh()},getNavNotificationEl:function(){return this.navNotificationElement},getDrawerState:function(){return this.orb.getDrawerState(this.drawerName)},resetOnboarding:function(){g.resetOnboarding(),g.init(this.getOnboardingParams())},getUserPreferencesModel:function(){return p},isIE:function(){if(document.documentMode)return document.documentMode;for(var t=7;t>0;t--){var e=document.createElement("div");if(e.innerHTML="<!--[if IE "+t+"]><span></span><![endif]-->",e.getElementsByTagName("span").length)return t}},removeCustomHeights:function(){g.removeCustomHeights()}}}t.exports=a},function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(36),a=n(37),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),c=n(2),u=n(11),f=n(7),l=s.env.feedTopicMaxSubscriptions,d=function(){function t(){i(this,t);var e=c.countActiveSubscriptions();this.notifications=[],e>l?this.modelInterface=new o.AggregatedCollection:this.modelInterface=new a.TopicCollection;var n=c.get();if(n.preferences)this.lastRead=new Date(n.preferences.lastRead),u.override(n.preferences.readFilter);else{var r=new Date;r.setDate(r.getDate()-5),this.lastRead=r}}return r(t,[{key:"populateReadStatus",value:function(t){var e=this;return t.forEach(function(t){u.contains(t.id)?t.status=null:new Date(e.lastRead)<new Date(t.creationTimestamp)?t.status="new":t.status="unread"}),t}},{key:"markRead",value:function(t){return u.checkOrAdd(t.id),c.updateRead(),t.status=null,c.updateRead()}},{key:"markAllAsSeen",value:function(){return this.notifications.forEach(function(t){"new"===t.status&&(t.status="unread")}),this.notifications}},{key:"reset",value:function(){return this.notifications=[],this.fetch()}},{key:"fetch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.modelInterface.fetch(e).then(function(n){var i=n.data,o=n.reachedEnd;i.sort(function(t,e){return new Date(t.creationTimestamp)>=new Date(e.creationTimestamp)?1:-1});var a=t.populateReadStatus(i),r=e?a.reverse():a;return r.forEach(function(n){f(t.notifications,function(t){return t.id===n.id})||t.notifications[e?"push":"unshift"](n)}),{notifications:t.notifications,reachedEnd:o}})}}]),t}();Object.defineProperty(e,"NotificationsModel",{configurable:!1,enumerable:!0,get:function(){return d}})},function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=void 0,n=t.replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,function(t){var n=t.substring(t.indexOf(">")+1);return n=n.slice(0,n.indexOf("</script")),e=n,""}),i={html:n};return e&&(i.htmlJs=encodeURI(e)),i}function a(t){if(t.ok)return t;var e=new Error("HTTP request failed "+t.statusText);throw e.response=t,e}function r(){return new Promise(function(t,e){return l.lib().then(function(e){var n=e.getUserDetailsFromCookie()||{};return e.hasCookie()&&"u13"!==n.ab?t(null):fetch(u.env.preferencesUrls.idcta+"?policy=notification&buttonColour=white&ptrt="+p,{credentials:"include"})["catch"](function(t){throw t}).then(a).then(function(t){return t.json()}).then(function(t){if(t.html){var e=o(t.html);t.html=e.html,e.htmlJs&&(t.htmlJs=e.htmlJs)}return t}).then(function(e){return t(e)})})["catch"](function(t){e(t)})})}var s=n(2),c=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(c,"a",{get:c});var u=n(3),f=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(f,"a",{get:f});var l=n(9);e.convertHtml=o;var d=function(){function t(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(c){o=!0,a=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=encodeURIComponent(window.location.href.replace(window.location.hash,"")),g=function(){function t(){i(this,t)}return h(t,[{key:"isSignedIn",value:function(){return l.lib().then(function(t){return t.hasCookie()})}},{key:"isOnboarded",value:function(){return l.lib().then(function(t){var e=t.getUserDetailsFromCookie();return!(!e||"u13"!==e.ab)||c.a.fetch().then(function(t){return null!==t&&"undefined"!=typeof t.preferences.hasOnboarded&&t.preferences.hasOnboarded})})}},{key:"setIdctaResponse",value:function(t,e){t.idctaResponse=e,e.policyCheck&&(t.policyIssue=Object.keys(e.policyCheck)[0])}},{key:"load",value:function(){var t=this;return Promise.all([this.isSignedIn(),r()])["catch"](function(t){throw t}).then(function(e){var n=d(e,2),i=n[0],o=n[1],a={signedIn:i};return o&&t.setIdctaResponse(a,o),i?t.isOnboarded().then(function(t){return a.onboarded=t,a}):a})}}]),t}();Object.defineProperty(e,"UserState",{configurable:!1,enumerable:!0,get:function(){return g}})},function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(10),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"fetch",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t?this.NEXT_DISPLAY_PAGE:"latest.json",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"loadData",this).call(this,"aggregated",i).then(function(i){var a=i.list,r=i.next,s=i.reachedEnd;if(!a)return{data:[],reachedEnd:s};r||(s=!0);var u=o.concat(a),f=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"filterData",n).call(n,u),l=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dedupeData",n).call(n,f);return l.length>=n.MINIMUM_TO_DISPLAY||s?((!n.NEXT_DISPLAY_PAGE||t&&!s&&r)&&(n.NEXT_DISPLAY_PAGE=r),{data:l,reachedEnd:s}):n.fetch(t,r,l)})}}]),e}(r.BaseCollection);Object.defineProperty(e,"AggregatedCollection",{configurable:!1,enumerable:!0,get:function(){return u}})},function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(10),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.TOPIC_NEXT_DISPLAY_PAGE={},t.TOPIC_REACHED_END={},t.notifications=[],t}return a(e,t),s(e,[{key:"loadTopicPage",value:function(t,n,i){var o=this;return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"loadData",this).call(this,t.topic,i).then(function(i){var a=i.list,r=i.next,s=i.reachedEnd;if(!a)return{data:[],reachedEnd:s,topic:t};(!o.TOPIC_NEXT_DISPLAY_PAGE[t.topic]||n&&!s&&r)&&(o.TOPIC_NEXT_DISPLAY_PAGE[t.topic]=r);var u=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"filterData",o).call(o,a);return!s&&u.length&&r&&"false"!==r||(o.TOPIC_REACHED_END[t.topic]=!0),{data:u,reachedEnd:s,topic:t}})}},{key:"fetch",value:function(t){var n=this;this.perTopicNotifications={};var i=[];return t||(this.notifications=[]),this.topics.forEach(function(e){n.TOPIC_REACHED_END[e.topic]&&t||i.push(n.loadTopicPage(e,t,t?n.TOPIC_NEXT_DISPLAY_PAGE[e.topic]:"latest.json").then(function(t){return n.notifications=n.notifications.concat(t.data),t}))}),Promise.all(i).then(function(t){var i=t.every(function(t){return t.reachedEnd}),o=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dedupeData",n).call(n,n.notifications);
return o.length>=n.MINIMUM_TO_DISPLAY||i?{data:o,reachedEnd:i}:n.fetch(!0)})}}]),e}(r.BaseCollection);Object.defineProperty(e,"TopicCollection",{configurable:!1,enumerable:!0,get:function(){return u}})},,function(t,e){"use strict";function n(t,e){var n;"number"!=typeof t&&(n=t,t=32*n.length);var i=Math.ceil(t/32),o=-1;if(this.m=t=32*i,this.k=e,r){var a=1<<Math.ceil(Math.log(Math.ceil(Math.log(t)/Math.LN2/8))/Math.LN2),s=1===a?Uint8Array:2===a?Uint16Array:Uint32Array,c=new ArrayBuffer(a*e),u=this.buckets=new Int32Array(i);if(n)for(;++o<i;)u[o]=n[o];this._locations=new s(c)}else{var u=this.buckets=[];if(n)for(;++o<i;)u[o]=n[o];else for(;++o<i;)u[o]=0;this._locations=[]}}function i(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(t){for(var e,n,i=t.length,o=2166136261,a=-1;++a<i;)e=t.charCodeAt(a),(n=4278190080&e)&&(o^=n>>24,o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24)),(n=16711680&e)&&(o^=n>>16,o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24)),(n=65280&e)&&(o^=n>>8,o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24)),o^=255&e,o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o+=o<<13,o^=o>>7,o+=o<<3,o^=o>>17,o+=o<<5,4294967295&o}function a(t){return t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t+=t<<13,t^=t>>7,t+=t<<3,t^=t>>17,t+=t<<5,4294967295&t}var r="undefined"!=typeof ArrayBuffer;n.prototype.locations=function(t){for(var e=this.k,n=this.m,i=this._locations,r=o(t),s=a(r),c=-1,u=r%n;++c<e;)i[c]=u<0?u+n:u,u=(u+s)%n;return i},n.prototype.add=function(t){for(var e=this.locations(t+""),n=-1,i=this.k,o=this.buckets;++n<i;)o[Math.floor(e[n]/32)]|=1<<e[n]%32},n.prototype.test=function(t){for(var e,n=this.locations(t+""),i=-1,o=this.k,a=this.buckets;++i<o;)if(e=n[i],0===(a[Math.floor(e/32)]&1<<e%32))return!1;return!0},n.prototype.size=function(){for(var t=this.buckets,e=0,n=0,o=t.length;n<o;++n)e+=i(t[n]);return-this.m*Math.log(1-e/this.m)/this.k},t.exports=n},function(t,e,n){"use strict";var i=n(5);t.exports=function(t){var e=new Date(t),n=new Date,o=Math.floor(Math.abs(n-e)/36e5),a=Math.floor(Math.abs(n-e)/6e4);return o>23&&o<48?i.localise("Yesterday"):o>=48&&o<168?(o/24).toFixed(0)+" "+i.localise("days ago"):o>0?o+" "+i.localise("hour"+(1===o?"":"s")+" ago"):a>0?a+" "+i.localise("minute"+(1===a?"":"s")+" ago"):i.localise("Just now")}},function(t,e){(function(e){t.exports=e}).call(e,{})}])});
//# sourceMappingURL=NotificationsMain.js.map