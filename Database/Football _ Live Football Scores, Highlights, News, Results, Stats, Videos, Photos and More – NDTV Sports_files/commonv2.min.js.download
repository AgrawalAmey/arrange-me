var SI_NS = SI_NS || {};
if (typeof jsspd1 == "undefined") {
    jsspd1 = 2;
}
//console.log("V@");
$(".sidebar").width($(".sidebar").width());
//$(".left-column").width($(".left-column").width());
(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=119694158111361&version=v2.4";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

//twitter library loader change on 1-JULY-2016
window.twttr = (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function (f) {
        t._e.push(f);
    };

    return t;
}(document, "script", "twitter-wjs"));
$(window).resize(function () {
    // $(".sidebar,.left-column").css('width', 'auto')
    $(".sidebar").width($(".sidebar").width());
    //$(".left-column").width($(".left-column").width());
});
$.fn.stickySidebar = function (options) {
    var config = $.extend({
        headerSelector: 'header',
        navSelector: 'nav',
        contentSelector: '#container',
        footerSelector: 'footer',
        sidebarTopMargin: 20,
        footerThreshold: 40
    }, options);

    var fixSidebr = function () {
        var sidebarSelector = $(this);
        var viewportHeight = $(window).height();
        var viewportWidth = $(window).width();
        var documentHeight = $(document).height();
        var headerHeight = $(config.headerSelector).outerHeight();
        var navHeight = 0;
        var sidebarHeight = sidebarSelector.outerHeight();
        var contentHeight = $(config.contentSelector).outerHeight();
        var footerHeight = $(config.footerSelector).outerHeight();
        if ($(".footer-disclaimer").length > 0) {
            footerHeight = parseInt(footerHeight) + parseInt($(".footer-disclaimer").outerHeight());
        }
        var footerMargin = parseInt($(config.footerSelector).css('marginBottom'));
        var containerMargin = parseInt($(config.contentSelector).css('marginBottom'));
        var scroll_top = $(window).scrollTop();
        var fixPosition = contentHeight - sidebarHeight;
        var breakingPoint1 = headerHeight + navHeight;
        var breakingPoint2 = documentHeight - (sidebarHeight + footerHeight + config.footerThreshold);
        // calculate

        //if ((contentHeight > sidebarHeight) && (viewportHeight > sidebarHeight)) { //case 1 when sidebar height is less than viewport height but less than content height

        //    if (scroll_top < breakingPoint1) {
        //        if (sidebarSelector.hasClass('sticky brk')) sidebarSelector.removeClass('sticky brk');
        //        if (sidebarSelector.hasClass('sticky')) sidebarSelector.removeClass('sticky');

        //    } else if ((scroll_top >= breakingPoint1) && (scroll_top < breakingPoint2)) {
        //        if (sidebarSelector.hasClass('brk')) sidebarSelector.removeClass('brk');
        //        sidebarSelector.addClass('sticky').css('top', config.sidebarTopMargin);
        //    } else {
        //        var negative = breakingPoint2 - scroll_top;
        //        sidebarSelector.addClass('sticky brk').css('top', negative);
        //    }

        //} else if ((contentHeight > sidebarHeight) && (viewportHeight < sidebarHeight)) { //case 2 when sidebar height is more than viewport height but less than content height
        //    if ($(this).hasClass('sidebar')) navHeight = $('.highlighter').outerHeight();

        //    breakingPoint1 = headerHeight + $('.mainbar').height() + $('.highlighter').height() + $('.brdcrmb').height() + $('.stry-hdr').height() + $('.cat-hdr').height() + $('.pt-dtl-wrp').height() + navHeight + sidebarSelector.outerHeight() - $(window).height(); //adding the heights of all the elements from the top 
        //    breakingPoint2 = documentHeight - ($(config.footerSelector).outerHeight() + config.footerThreshold) - $(window).height();
        //    if ($(".footer-disclaimer").length > 0) {
        //        breakingPoint2 = documentHeight - ($(config.footerSelector).outerHeight() + $(".footer-disclaimer").outerHeight() + config.footerThreshold) - $(window).height();
        //    }
        //    if (scroll_top < breakingPoint1) {
        //        if (sidebarSelector.hasClass('sticky')) sidebarSelector.removeClass('sticky');

        //    } else if ((scroll_top >= breakingPoint1) && (scroll_top < breakingPoint2)) {
        //        sidebarSelector.addClass('sticky').css({
        //            'top': $(window).height() - sidebarSelector.outerHeight()
        //        }); // substracting the margins for placing the sticky at the end of footer.
        //    } else {
        //        var negative = documentHeight - ($(config.footerSelector).outerHeight() + config.footerThreshold + sidebarSelector.outerHeight());
        //        if ($(".footer-disclaimer").length > 0) {
        //            negative = documentHeight - ($(config.footerSelector).outerHeight() + $(".footer-disclaimer").outerHeight() + +config.footerThreshold + sidebarSelector.outerHeight());

        //        }
        //        sidebarSelector.addClass('sticky').offset({
        //            'top': negative
        //        });
        //    }
        //}
    };

    return this.each(function () {
        $(window).on('scroll', $.proxy(fixSidebr, this));
        $(window).on('resize', $.proxy(fixSidebr, this));
        $.proxy(fixSidebr, this)();
    });

};
/*
 * jQuery JSONP Core Plugin 2.4.0 (2012-08-21)
 * https://github.com/jaubourg/jquery-jsonp
 * Copyright (c) 2012 Julian Aubourg
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 */
(function ($) {
    function noop() { } function genericCallback(data) { lastValue = [data]; } function callIfDefined(method, object, parameters) { return method && method.apply(object.context || object, parameters); } function qMarkOrAmp(url) { return /\?/.test(url) ? "&" : "?"; } var
    STR_ASYNC = "async", STR_CHARSET = "charset", STR_EMPTY = "", STR_ERROR = "error", STR_INSERT_BEFORE = "insertBefore", STR_JQUERY_JSONP = "_jqjsp", STR_ON = "on", STR_ON_CLICK = STR_ON + "click", STR_ON_ERROR = STR_ON + STR_ERROR, STR_ON_LOAD = STR_ON + "load", STR_ON_READY_STATE_CHANGE = STR_ON + "readystatechange", STR_READY_STATE = "readyState", STR_REMOVE_CHILD = "removeChild", STR_SCRIPT_TAG = "<script>", STR_SUCCESS = "success", STR_TIMEOUT = "timeout", win = window, Deferred = $.Deferred, head = $("head")[0] || document.documentElement, pageCache = {}, count = 0, lastValue, xOptionsDefaults = { callback: STR_JQUERY_JSONP, url: location.href }, opera = win.opera, oldIE = !!$("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length; function jsonp(xOptions) { xOptions = $.extend({}, xOptionsDefaults, xOptions); var successCallback = xOptions.success, errorCallback = xOptions.error, completeCallback = xOptions.complete, dataFilter = xOptions.dataFilter, callbackParameter = xOptions.callbackParameter, successCallbackName = xOptions.callback, cacheFlag = xOptions.cache, pageCacheFlag = xOptions.pageCache, charset = xOptions.charset, url = xOptions.url, data = xOptions.data, timeout = xOptions.timeout, pageCached, done = 0, cleanUp = noop, supportOnload, supportOnreadystatechange, firstChild, script, scriptAfter, timeoutTimer; Deferred && Deferred(function (defer) { defer.done(successCallback).fail(errorCallback); successCallback = defer.resolve; errorCallback = defer.reject; }).promise(xOptions); xOptions.abort = function () { !(done++) && cleanUp(); }; if (callIfDefined(xOptions.beforeSend, xOptions, [xOptions]) === !1 || done) { return xOptions; } url = url || STR_EMPTY; data = data ? ((typeof data) == "string" ? data : $.param(data, xOptions.traditional)) : STR_EMPTY; url += data ? (qMarkOrAmp(url) + data) : STR_EMPTY; callbackParameter && (url += qMarkOrAmp(url) + encodeURIComponent(callbackParameter) + "=?"); !cacheFlag && !pageCacheFlag && (url += qMarkOrAmp(url) + "_" + (new Date()).getTime() + "="); url = url.replace(/=\?(&|$)/, "=" + successCallbackName + "$1"); function notifySuccess(json) { if (!(done++)) { cleanUp(); pageCacheFlag && (pageCache[url] = { s: [json] }); dataFilter && (json = dataFilter.apply(xOptions, [json])); callIfDefined(successCallback, xOptions, [json, STR_SUCCESS, xOptions]); callIfDefined(completeCallback, xOptions, [xOptions, STR_SUCCESS]); } } function notifyError(type) { if (!(done++)) { cleanUp(); pageCacheFlag && type != STR_TIMEOUT && (pageCache[url] = type); callIfDefined(errorCallback, xOptions, [xOptions, type]); callIfDefined(completeCallback, xOptions, [xOptions, type]); } } if (pageCacheFlag && (pageCached = pageCache[url])) { pageCached.s ? notifySuccess(pageCached.s[0]) : notifyError(pageCached); } else { win[successCallbackName] = genericCallback; script = $(STR_SCRIPT_TAG)[0]; script.id = STR_JQUERY_JSONP + count++; if (charset) { script[STR_CHARSET] = charset; } opera && opera.version() < 11.60 ? ((scriptAfter = $(STR_SCRIPT_TAG)[0]).text = "document.getElementById('" + script.id + "')." + STR_ON_ERROR + "()") : (script[STR_ASYNC] = STR_ASYNC); if (oldIE) { script.htmlFor = script.id; script.event = STR_ON_CLICK; } script[STR_ON_LOAD] = script[STR_ON_ERROR] = script[STR_ON_READY_STATE_CHANGE] = function (result) { if (!script[STR_READY_STATE] || !/i/.test(script[STR_READY_STATE])) { try { script[STR_ON_CLICK] && script[STR_ON_CLICK](); } catch (_) { } result = lastValue; lastValue = 0; result ? notifySuccess(result[0]) : notifyError(STR_ERROR); } }; script.src = url; cleanUp = function (i) { timeoutTimer && clearTimeout(timeoutTimer); script[STR_ON_READY_STATE_CHANGE] = script[STR_ON_LOAD] = script[STR_ON_ERROR] = null; head[STR_REMOVE_CHILD](script); scriptAfter && head[STR_REMOVE_CHILD](scriptAfter); }; head[STR_INSERT_BEFORE](script, (firstChild = head.firstChild)); scriptAfter && head[STR_INSERT_BEFORE](scriptAfter, firstChild); timeoutTimer = timeout > 0 && setTimeout(function () { notifyError(STR_TIMEOUT); }, timeout); } return xOptions; } jsonp.setup = function (xOptions) { $.extend(xOptionsDefaults, xOptions); }; $.jsonp = jsonp;
})(jQuery);
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (a) { if (typeof define === "function" && define.amd) { define(["jquery"], a) } else { a(jQuery) } }(function (e) { var a = /\+/g; function d(g) { return g } function b(g) { return decodeURIComponent(g.replace(a, " ")) } function f(g) { if (g.indexOf('"') === 0) { g = g.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\") } try { return c.json ? JSON.parse(g) : g } catch (h) { } } var c = e.cookie = function (p, o, u) { if (o !== undefined) { u = e.extend({}, c.defaults, u); if (typeof u.expires === "number") { var q = u.expires, s = u.expires = new Date(); s.setDate(s.getDate() + q) } o = c.json ? JSON.stringify(o) : String(o); return (document.cookie = [c.raw ? p : encodeURIComponent(p), "=", c.raw ? o : encodeURIComponent(o), u.expires ? "; expires=" + u.expires.toUTCString() : "", u.path ? "; path=" + u.path : "", u.domain ? "; domain=" + u.domain : "", u.secure ? "; secure" : ""].join("")) } var g = c.raw ? d : b; var r = document.cookie.split("; "); var v = p ? undefined : {}; for (var n = 0, k = r.length; n < k; n++) { var m = r[n].split("="); var h = g(m.shift()); var j = g(m.join("=")); if (p && p === h) { v = f(j); break } if (!p) { v[h] = f(j) } } return v }; c.defaults = {}; e.removeCookie = function (h, g) { if (e.cookie(h) !== undefined) { e.cookie(h, "", e.extend({}, g, { expires: -1 })); return true } return false } }));




/********************************************************** Date Format **********************************************************/
/*
* Date Format 1.2.3
* (c) 2007-2009 Steven Levithan <stevenlevithan.com>
* MIT license
* http://blog.stevenlevithan.com/archives/date-time-format
* Includes enhancements by Scott Trenda <scott.trenda.net>
* and Kris Kowal <cixar.com/~kris.kowal/>
*
* Accepts a date, a mask, or a date and a mask.
* Returns a formatted version of the given date.
* The date defaults to the current date/time.
* The mask defaults to dateFormat.masks.default.
*/
var isValidDate = function (d) { var chk = new Date(d); if (Object.prototype.toString.call(chk) === "[object Date]") { if (isNaN(chk.getTime())) { return false; } else { return true; } } else { return false; } };
var dateFormat = function () { var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g, timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g, timezoneClip = /[^-+\dA-Z]/g, pad = function (val, len) { val = String(val); len = len || 2; while (val.length < len) val = "0" + val; return val; }; return function (date, mask, utc) { if (isValidDate(date)) { var dF = dateFormat; if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) { mask = date; date = undefined; } date = date ? new Date(date) : new Date; mask = String(dF.masks[mask] || mask || dF.masks["default"]); if (mask.slice(0, 4) == "UTC:") { mask = mask.slice(4); utc = true; } var _ = utc ? "getUTC" : "get", d = date[_ + "Date"](), D = date[_ + "Day"](), m = date[_ + "Month"](), y = date[_ + "FullYear"](), H = date[_ + "Hours"](), M = date[_ + "Minutes"](), s = date[_ + "Seconds"](), L = date[_ + "Milliseconds"](), o = utc ? 0 : date.getTimezoneOffset(), flags = { d: d, dd: pad(d), ddd: dF.i18n.dayNames[D], dddd: dF.i18n.dayNames[D + 7], m: m + 1, mm: pad(m + 1), mmm: dF.i18n.monthNames[m], mmmm: dF.i18n.monthNames[m + 12], yy: String(y).slice(2), yyyy: y, h: H % 12 || 12, hh: pad(H % 12 || 12), H: H, HH: pad(H), M: M, MM: pad(M), s: s, ss: pad(s), l: pad(L, 3), L: pad(L > 99 ? Math.round(L / 10) : L), t: H < 12 ? "a" : "p", tt: H < 12 ? "am" : "pm", T: H < 12 ? "A" : "P", TT: H < 12 ? "AM" : "PM", Z: utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""), o: (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4), S: ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10] }; return mask.replace(token, function ($0) { return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1); }); } }; }();
// Some common format strings
dateFormat.masks = { "default": "ddd mmm dd yyyy HH:MM:ss", shortDate: "m/d/yy", mediumDate: "mmm d, yyyy", longDate: "mmmm d, yyyy", fullDate: "dddd, mmmm d, yyyy", shortTime: "h:MM TT", mediumTime: "h:MM:ss TT", longTime: "h:MM:ss TT Z", isoDate: "yyyy-mm-dd", isoTime: "HH:MM:ss", isoDateTime: "yyyy-mm-dd'T'HH:MM:ss", isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'" };
// Internationalization strings
dateFormat.i18n = { dayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] };
// For convenience...
Date.prototype.format = function (mask, utc) { return dateFormat(this, mask, utc); };



/*PostScribe*/
(function () { var b = (function () { var j = {}; var k; var i = this.document.createElement("div"); k = "<P><I></P></I>"; i.innerHTML = k; j.tagSoup = i.innerHTML !== k; i.innerHTML = "<P><i><P></P></i></P>"; j.selfClose = i.childNodes.length === 2; return j })(); var g = /^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/; var f = /^<\/([\-A-Za-z0-9_]+)[^>]*>/; var a = /([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g; var h = /^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i; var c = false; function e(r, s) { r = r || ""; s = s || {}; for (var q in b) { if (b.hasOwnProperty(q)) { if (s.autoFix) { s["fix_" + q] = true } s.fix = s.fix || s["fix_" + q] } } var p = []; var l = function (u) { r += u }; var t = function (u) { r = u + r }; var i = { comment: /^<!--/, endTag: /^<\//, atomicTag: /^<\s*(script|style|noscript|iframe|textarea)[\s>]/i, startTag: /^</, chars: /^[^<]/ }; var n = { comment: function () { var u = r.indexOf("-->"); if (u >= 0) { return { content: r.substr(4, u), length: u + 3 } } }, endTag: function () { var u = r.match(f); if (u) { return { tagName: u[1], length: u[0].length } } }, atomicTag: function () { var w = n.startTag(); if (w) { var v = r.slice(w.length); if (v.match(new RegExp("</\\s*" + w.tagName + "\\s*>", "i"))) { var u = v.match(new RegExp("([\\s\\S]*?)</\\s*" + w.tagName + "\\s*>", "i")); if (u) { return { tagName: w.tagName, attrs: w.attrs, content: u[1], length: u[0].length + w.length } } } } }, startTag: function () { var v = r.match(g); if (v) { var u = {}; v[2].replace(a, function (x, w) { var y = arguments[2] || arguments[3] || arguments[4] || h.test(w) && w || null; u[w] = y }); return { tagName: v[1], attrs: u, unary: !!v[3], length: v[0].length } } }, chars: function () { var u = r.indexOf("<"); return { length: u >= 0 ? u : r.length } } }; var o = function () { for (var v in i) { if (i[v].test(r)) { if (c) { console.log("suspected " + v) } var u = n[v](); if (u) { if (c) { console.log("parsed " + v, u) } u.type = u.type || v; u.text = r.substr(0, u.length); r = r.slice(u.length); return u } return null } } }; var k = function (v) { var u; while (u = o()) { if (v[u.type] && v[u.type](u) === false) { return } } }; var m = function () { var u = r; r = ""; return u }; var j = function () { return r }; if (s.fix) { (function () { var u = /^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i; var y = /^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i; var A = []; A.last = function () { return this[this.length - 1] }; A.lastTagNameEq = function (E) { var F = this.last(); return F && F.tagName && F.tagName.toUpperCase() === E.toUpperCase() }; A.containsTagName = function (G) { for (var F = 0, E; E = this[F]; F++) { if (E.tagName === G) { return true } } return false }; var z = function (E) { if (E && E.type === "startTag") { E.unary = u.test(E.tagName) || E.unary } return E }; var x = o; var D = function () { var F = r; var E = z(x()); r = F; return E }; var w = function () { var E = A.pop(); t("</" + E.tagName + ">") }; var v = { startTag: function (E) { var F = E.tagName; if (F.toUpperCase() === "TR" && A.lastTagNameEq("TABLE")) { t("<TBODY>"); B() } else { if (s.fix_selfClose && y.test(F) && A.containsTagName(F)) { if (A.lastTagNameEq(F)) { w() } else { t("</" + E.tagName + ">"); B() } } else { if (!E.unary) { A.push(E) } } } }, endTag: function (E) { var F = A.last(); if (F) { if (s.fix_tagSoup && !A.lastTagNameEq(E.tagName)) { w() } else { A.pop() } } else { if (s.fix_tagSoup) { C() } } } }; var C = function () { x(); B() }; var B = function () { var E = D(); if (E && v[E.type]) { v[E.type](E) } }; o = function () { B(); return z(x()) } })() } return { append: l, readToken: o, readTokens: k, clear: m, rest: j, stack: p } } e.supports = b; e.tokenToString = function (i) { var j = { comment: function (k) { return "<--" + k.content + "-->" }, endTag: function (k) { return "</" + k.tagName + ">" }, atomicTag: function (k) { console.log(k); return j.startTag(k) + k.content + j.endTag(k) }, startTag: function (k) { var n = "<" + k.tagName; for (var l in k.attrs) { var m = k.attrs[l]; n += " " + l + '="' + (m ? m.replace(/(^|[^\\])"/g, '$1\\"') : "") + '"' } return n + (k.unary ? "/>" : ">") }, chars: function (k) { return k.text } }; return j[i.type](i) }; e.escapeAttributes = function (k) { var i = {}; for (var j in k) { var l = k[j]; i[j] = l && l.replace(/(^|[^\\])"/g, '$1\\"') } return i }; for (var d in b) { e.browserHasFlaw = e.browserHasFlaw || (!b[d]) && d } this.htmlParser = e })(); (function () { var a = this; if (a.postscribe) { return } var j = true; var n = false; var l = Array.prototype.slice; function f() { } function b(o) { return "function" === typeof o } function i(p, r, s) { var q, o = (p && p.length) || 0; for (q = 0; q < o; q++) { r.call(s, p[q], q) } } function m(q, p, r) { var o; for (o in q) { if (q.hasOwnProperty(o)) { p.call(r, o, q[o]) } } } function k(p, o) { m(o, function (q, r) { p[q] = r }); return p } function d(o, p) { o = o || {}; m(p, function (q, r) { if (o[q] == null) { o[q] = r } }); return o } function e(q) { try { return l.call(q) } catch (p) { var o = []; i(q, function (r) { o.push(r) }); return o } } function c(o) { return (/^script$/i).test(o.tagName) } var g = (function () { var o = "data-ps-"; function p(t, s, u) { var r = o + s; if (arguments.length === 2) { var v = t.getAttribute(r); return v == null ? v : String(v) } else { if (u != null && u !== "") { t.setAttribute(r, u) } else { t.removeAttribute(r) } } } function q(r, s) { var t = r.ownerDocument; k(this, { root: r, options: s, win: t.defaultView || t.parentWindow, doc: t, parser: a.htmlParser("", { autoFix: true }), actuals: [r], proxyHistory: "", proxyRoot: t.createElement(r.nodeName), scriptStack: [], writeQueue: [] }); p(this.proxyRoot, "proxyof", 0) } q.prototype.write = function () { [].push.apply(this.writeQueue, arguments); var r; while (!this.deferredRemote && this.writeQueue.length) { r = this.writeQueue.shift(); if (b(r)) { this.callFunction(r) } else { this.writeImpl(r) } } }; q.prototype.callFunction = function (s) { var r = { type: "function", value: s.name || s.toString() }; this.onScriptStart(r); s.call(this.win, this.doc); this.onScriptDone(r) }; q.prototype.writeImpl = function (s) { this.parser.append(s); var r, t = []; while ((r = this.parser.readToken()) && !c(r)) { t.push(r) } this.writeStaticTokens(t); if (r) { this.handleScriptToken(r) } }; q.prototype.writeStaticTokens = function (s) { var r = this.buildChunk(s); if (!r.actual) { return } r.html = this.proxyHistory + r.actual; this.proxyHistory += r.proxy; this.proxyRoot.innerHTML = r.html; if (n) { r.proxyInnerHTML = this.proxyRoot.innerHTML } this.walkChunk(); if (n) { r.actualInnerHTML = this.root.innerHTML } return r }; q.prototype.buildChunk = function (u) { var t = this.actuals.length, r = [], v = [], s = []; i(u, function (w) { r.push(w.text); if (w.attrs) { if (!(/^noscript$/i).test(w.tagName)) { var x = t++; v.push(w.text.replace(/(\/?>)/, " " + o + "id=" + x + " $1")); if (w.attrs.id !== "ps-script") { s.push(w.type === "atomicTag" ? "" : "<" + w.tagName + " " + o + "proxyof=" + x + (w.unary ? "/>" : ">")) } } } else { v.push(w.text); s.push(w.type === "endTag" ? w.text : "") } }); return { tokens: u, raw: r.join(""), actual: v.join(""), proxy: s.join("") } }; q.prototype.walkChunk = function () { var v, r = [this.proxyRoot]; while ((v = r.shift()) != null) { var u = v.nodeType === 1; var t = u && p(v, "proxyof"); if (!t) { if (u) { this.actuals[p(v, "id")] = v; p(v, "id", null) } var s = v.parentNode && p(v.parentNode, "proxyof"); if (s) { this.actuals[s].appendChild(v) } } r.unshift.apply(r, e(v.childNodes)) } }; q.prototype.handleScriptToken = function (r) { var s = this.parser.clear(); if (s) { this.writeQueue.unshift(s) } r.src = r.attrs.src || r.attrs.SRC; if (r.src && this.scriptStack.length) { this.deferredRemote = r } else { this.onScriptStart(r) } var t = this; this.writeScriptToken(r, function () { t.onScriptDone(r) }) }; q.prototype.onScriptStart = function (r) { r.outerWrites = this.writeQueue; this.writeQueue = []; this.scriptStack.unshift(r) }; q.prototype.onScriptDone = function (r) { if (r !== this.scriptStack[0]) { this.options.error({ message: "Bad script nesting or script finished twice" }); return } this.scriptStack.shift(); this.write.apply(this, r.outerWrites); if (!this.scriptStack.length && this.deferredRemote) { this.onScriptStart(this.deferredRemote); this.deferredRemote = null } }; q.prototype.writeScriptToken = function (s, r) { var t = this.buildScript(s); if (s.src) { t.src = s.src; this.scriptLoadHandler(t, r) } try { this.insertScript(t); if (!s.src) { r() } } catch (u) { this.options.error(u); r() } }; q.prototype.buildScript = function (r) { var s = this.doc.createElement(r.tagName); m(r.attrs, function (t, u) { s.setAttribute(t, u) }); if (r.content) { s.text = r.content } return s }; q.prototype.insertScript = function (r) { this.writeImpl('<span id="ps-script"/>'); var s = this.doc.getElementById("ps-script"); s.parentNode.replaceChild(r, s) }; q.prototype.scriptLoadHandler = function (u, r) { function t() { u = u.onload = u.onreadystatechange = u.onerror = null; r() } var s = this.options.error; k(u, { onload: function () { t() }, onreadystatechange: function () { if (/^(loaded|complete)$/.test(u.readyState)) { t() } }, onerror: function () { s({ message: "remote script failed " + u.src }); t() } }) }; return q }()); var h = (function () { var r = 0; var o = []; var s = null; function p() { var u = o.shift(); if (u) { u.stream = t.apply(null, u) } } function t(A, x, w) { s = new g(A, w); s.id = r++; s.name = w.name || s.id; q.streams[s.name] = s; var B = A.ownerDocument; var v = { write: B.write, writeln: B.writeln }; function z(C) { C = w.beforeWrite(C); s.write(C); w.afterWrite(C) } k(B, { write: function () { return z(e(arguments).join("")) }, writeln: function (C) { return z(e(arguments).join("") + "\n") } }); var y = s.win.onerror || f; s.win.onerror = function (E, D, C) { w.error({ msg: E + " - " + D + ":" + C }); y.apply(s.win, arguments) }; s.write(x, function u() { k(B, v); s.win.onerror = y; w.done(); s = null; p() }); return s } function q(x, w, v) { if (b(v)) { v = { done: v } } v = d(v, { done: f, error: function (y) { throw y }, beforeWrite: function (y) { return y }, afterWrite: f }); x = (/^#/).test(x) ? a.document.getElementById(x.substr(1)) : x.jquery ? x[0] : x; var u = [x, w, v]; x.postscribe = { cancel: function () { if (u.stream) { u.stream.abort() } else { u[1] = f } } }; o.push(u); if (!s) { p() } return x.postscribe } return k(q, { streams: {}, queue: o, WriteStream: g }) }()); a.postscribe = h }());
//CREATE GLOBAL OBJECT



SI_NS.is_mobile = function () {
    var mobile = (/iphone|ipod|ipad|android|nokia|blackberry|bada|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
    if (mobile) {
        return true;
    } else {
        return false;
    }
}();

SI_NS.frData = {};   // Global object for holding temporary data for cricket fixture/results page


var htmlMarkUp = ""; htmlMarkUp += '<div class="main-nav byjs"><ul>', htmlMarkUp += '<li><a href="http://www.ndtv.com/" title="NDTV">NDTV</a></li>', htmlMarkUp += '<li><a href="http://profit.ndtv.com/" title="Business">Business</a></li>', htmlMarkUp += '<li><a href="http://khabar.ndtv.com/" title="Hindi">Hindi</a></li>', htmlMarkUp += '<li><a href="http://movies.ndtv.com/" title="Movies">Movies</a></li>', htmlMarkUp += '<li class="active">Sports</li>', htmlMarkUp += '<li><a href="http://goodtimes.ndtv.com/" title="Good Times">Good Times</a></li>', htmlMarkUp += '<li><a href="http://food.ndtv.com/" title="Food">Food</a></li>', htmlMarkUp += '<li><a href="http://gadgets.ndtv.com/" title="Tech">Tech</a></li>', htmlMarkUp += '<li><a href="http://auto.ndtv.com/" title="Auto">Auto</a></li>', htmlMarkUp += '<li><a href="http://www.ndtv.com/page/apps/" title="Apps">Apps</a></li>', htmlMarkUp += '<li><a href="http://prime.ndtv.com/" title="Prime">Prime</a></li>', htmlMarkUp += '<li><a href="https://www.mojarto.com/" title="Art">Art</a></li>', htmlMarkUp += '<li><a href="http://www.bandbaajaa.com/" title="Weddings">Weddings</a></li>', htmlMarkUp += '</ul></div><div class="misc-right"><div class="social-share"><ul>', "1" == jsspd1 && (htmlMarkUp += '<li><div class="fb-like" data-href="https://www.facebook.com/NDTVSports" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div></li>', htmlMarkUp += '<li><a href="https://twitter.com/Sports_NDTV" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow NDTV Sports</a></li>'), "2" == jsspd1 && (htmlMarkUp += '<li><div class="fb-like" data-href="https://www.facebook.com/NDTVCricket" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div></li>', htmlMarkUp += '<li><a href="https://twitter.com/CricketNDTV" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow Cricket NDTV</a></li>'), htmlMarkUp += "</ul></div>",

$(".header").find(".hd1 .container").html(htmlMarkUp);
//twttr.widgets.load();

SI_NS.loadJSON = function (params, cb) {
    if (!params.type) params.type = 'json';
    var basepath;

    basepath = 'https://sports.ndtv.com/sportzdeck/v3/api/data.aspx?APIU=';



    if (params.type.toLowerCase() == 'json') {
        var url = params.url;
        if (params.base) {
            params.base = params.base !== true ? params.base : basepath;
            url = params.base + url;
        }
        $.ajax({
            url: url,
            success: function (data) {
                if (cb) {
                    cb(data);
                }
            },
            error: function () {
                cb();
            }
        });
    } else if (params.type == 'jsonp') {
        var url = params.url;
        if (params.base) {
            params.base = params.base !== true ? params.base : basepath;
            url = params.base + url;
        }

        if ((window.location.href).indexOf("matchcentre") >= 0) {
            jqxhr = $.jsonp({
                url: url,
                timeout: 60000,
                cache: true,
                callback: 'cb',
                callbackParameter: 'callback',
                success: function (data) {
                    cb(data);
                },
                error: function (data) {
                    cb();
                }
            });
        }
        else if ((window.location.href).indexOf("scoreboard") >= 0 || typeof jQuery != "undefined") {
            jqxhr = jQuery.jsonp({
                url: url,
                timeout: 60000,
                cache: true,
                callback: 'cb',
                callbackParameter: 'callback',
                success: function (data) {
                    cb(data);
                },
                error: function (data) {
                    cb();
                }
            });
        }
    }
    else if (params.type == 'jsonpn') {
        var url = params.url;
        if (params.base) {
            params.base = params.base !== true ? params.base : basepath;
            url = params.base + url;
        }
        jqxhr = $.jsonp({
            url: url,
            timeout: 60000,
            cache: true,
            callback: 'jsonCallback',
            callbackParameter: 'callback',
            success: function (data) {
                cb(data);
            },
            error: function (data) {
                cb();
            }
        });


    }
    
};

if (!Object.keys) {
    Object.keys = (function () {
        'use strict';
        var hasOwnProperty = Object.prototype.hasOwnProperty,
            hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),
            dontEnums = [
              'toString',
              'toLocaleString',
              'valueOf',
              'hasOwnProperty',
              'isPrototypeOf',
              'propertyIsEnumerable',
              'constructor'
            ],
            dontEnumsLength = dontEnums.length;

        return function (obj) {
            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {
                throw new TypeError('Object.keys called on non-object');
            }

            var result = [], prop, i;

            for (prop in obj) {
                if (hasOwnProperty.call(obj, prop)) {
                    result.push(prop);
                }
            }

            if (hasDontEnumBug) {
                for (i = 0; i < dontEnumsLength; i++) {
                    if (hasOwnProperty.call(obj, dontEnums[i])) {
                        result.push(dontEnums[i]);
                    }
                }
            }
            return result;
        };
    }());
}
SI_NS.trackEvent = function (list) {
    var category = list.attr('category');
    var action = list.attr('action');
    var label = list.attr('label');
    if (!list.hasClass('pl-rt')) {
        if (category && action && window._gaq) {
            _gaq.push(['_trackEvent', category, action, label]);
            setTimeout(function () {
                var hrf = list.attr('href');
                if (list.attr('target') == '_blank') window.open(hrf, '_blank');
                else window.location.href = hrf;
            }, 1000);
        } else {
            var hrfx = list.attr('href');
            if (list.attr('target') == '_blank') window.open(hrfx, '_blank');
            else window.location.href = hrfx;
        }
    }
    //ga('send', 'event', category, action, label);		
};
SI_NS.loadSticky = function (cntsel) {

    if (!cntsel || cntsel == undefined) cntsel = $('.sidebar');
    if ($('.sticky').length > 0) $('.sticky').removeClass('sticky');

    /* $('.nav-container').stickySidebar({
         sidebarTopMargin: 0,
         footerThreshold: 0,
         headerSelector: $('.header'),
         contentSelector: $('.mainbody'),
         navSelector: $('.header').find('.nav'),
         footerSelector: $('.footer')
     });*/
    var lastScrollTop = 0;
    $(window).scroll(function (event) {
        $(".nav-more-menu").fadeOut();
        var st = $(this).scrollTop();
        if (st > lastScrollTop) {
            // downscroll code
            if ($('.nav-container').height() > $(window).scrollTop()) {

                //$('.nav-container').css({ "position": "fixed", "top": "0px" });
                $('.nav-container').removeClass("sticky-nav").removeClass("active");
            }
            else {

                if (!$('.nav-container').hasClass("sticky-nav") || !$('.nav-container').hasClass("active")) {
                    $('.nav-container').addClass("sticky-nav").addClass("active");
                }
            }

        } else {
            // upscroll code
            if ($('.nav-container').height() > $(window).scrollTop()) {

                //$('.nav-container').css({ "position": "fixed", "top": "0px" });
                $('.nav-container').removeClass("sticky-nav").removeClass("active");
            } else {
                $('.nav-container').removeClass("active");
            }

        }
        lastScrollTop = st;
    });
    /*$(window).on('scroll', function () {
       
    });*/

    if ($('.mainbar').length > 0) {
        $('.mainbar').stickySidebar({
            sidebarTopMargin: 0,
            footerThreshold: 10,
            headerSelector: $('.header'),
            contentSelector: $('.left-column'),
            navSelector: $('.header').find('.nav'),
            footerSelector: $('.footer')
        });
    }
    if ($('.sidebar').height() > $('.left-column').height()) {
        $('.left-column').stickySidebar({
            sidebarTopMargin: 0,
            footerThreshold: 10,
            headerSelector: $('.header'),
            contentSelector: $('.sidebar'),
            navSelector: $('.header').find('.nav'),
            footerSelector: $('.footer')
        });
    } else if ($('.sidebar').height() < $('.left-column').height()) {
        if($('.sidebar').length>0){
        $('.sidebar').stickySidebar({
            sidebarTopMargin: 10,
            footerThreshold: 10,
            headerSelector: $('.header'),
            contentSelector: $('.left-column'),
            navSelector: $('.header').find('.nav'),
            footerSelector: $('.footer')
        });
        }
    }
}
SI_NS.shortEntity = function (data) {
    var datashortArray = {};
    //   data.join(",");
    datashortArray = (jQuery.unique(data));
    datashortArray.sort(function (a, b) { return a - b });
    return datashortArray
}
SI_NS.getEntityMappings = function (ids, entity, spid, cb) {
    var urlx = '';
    var idsCall = ids;
    idsCall.toString();
    ids = idsCall.split(",")
    ids = SI_NS.shortEntity(ids);

    urlx = 'https://api.gen.ndtv.com/apicenter/multiplesourceid_dynamic.aspx?Sid=' + ids.join(",").replace(/^,|,$/g, '') + '&Spid=' + spid + '&Eid=' + entity + '&apikey=3cb016634dab7bfa6b56b4c82c40b620&siteid=1'
    //urlx = 'http://api.sports.ndtv.com/DataAPI/GetEntityData?Sid=' + ids.join(",").replace(/^,|,$/g, '') + '&Spid=' + spid + '&Eid=' + entity + '';
    SI_NS.loadJSON({
        url: urlx,
        type: 'jsonp',
        base: false
    }, function (json) {
        cb(json.Table);
    });
};

$.fn.isOnScreen = function () {

    var win = $(window);

    var viewport = {
        top: win.scrollTop(),
        left: win.scrollLeft()
    };
    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();

    var bounds = this.offset();
    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();

    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));

};
SI_NS.currentMenu = function () { };
SI_NS.articleListing = function () {
    var url = '';
    var mySwiper = new Swiper($('.mod-article-caraousel>.articleCaraousel'), {
        //speed: 400,
        slidesPerView: 5,
        setWrapperSize: true,
        nextButton: $(".mod-article-caraousel .nav-right"),
        prevButton: $(".mod-article-caraousel .nav-left")
    });
    $(".mod-article-caraousel .post-item").off("click").on("click", function () {
        $("html,body").animate({ scrollTop: $(".mybox[data-myid='" + $(this).attr("data-myid") + "']").offset().top - ($(".nav-container").height() + 70) }, 800, 'swing');
    });
    var totalWidth = ($(".mod-article-caraousel .post-item").eq(0).width()) * ($(".mod-article-caraousel .post-item").length + 1);
    //me $(".mod-article-caraousel .articleCaraousel").width(totalWidth);

    var isDone = false
    function callData() {
        if ($(".article-detail").eq(0).isOnScreen()) {
            $(".mod-article-caraousel").animate({ 'marginBottom': '-1px' }, 1000);
            isDone = true;

        }
    }
    function scrollContent(thisData) {



        if ($(".mybox.inview").attr("data-myid") != thisData.attr("data-myid")) {

            var thisIndex = $(".mybox.inview").index();
            if (!$(".mybox").eq(thisIndex + 1).hasClass("datacalldone")) {
                $(".mybox").eq(thisIndex + 1).addClass("datacalldone");
                var myID = $(".mybox").eq(thisIndex + 1).attr("data-myid");
                var myUrl = $(".mybox").eq(thisIndex + 1).attr("data-href");
                if (typeof myID != "undefined" && typeof myUrl != "undefined") {

                    $.ajax({
                        url: "http://" + window.location.hostname + "/?storyurl=" + myUrl, success: function (result) {

                            $(".mybox[data-myid='" + myID + "']").append(result);

                            $(".article-content").find("img").each(function () {
                                $(this).attr("src", $(this).attr("data-url"));

                            });

                            SI_NS.loadSticky();
                        }
                    });
                }

            }
        }
    }

    var lastScrollTop = 0;
    function isScrolledIntoView(elem) {
        var $elem = $(elem);
        var $window = $(window);

        var docViewTop = $window.scrollTop();
        var docViewBottom = docViewTop + $window.height();

        var elemTop = $elem.offset().top;
        var elemBottom = elemTop + $elem.height();

        return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
    }
    function changeURLDATA(id) {

        var container = $('.social-share');

        SI_NS.shareArticle("", container, false);


        history.pushState({ "key": id }, "", $(".mybox[data-myid='" + id + "']").attr("data-href").split("news/")[1]);
        $("title").html($(this).attr("data-title"));
        googletag.pubads().refresh();
        $(".mybox").removeClass("inview");
        var params = {
            url: "/scripts/min/comscorehit.js",
            type: 'json'
        };
        SI_NS.loadJSON(params, function () {
           // console.log("comscore hit")
        });
        $(".mybox[data-myid='" + id + "']").addClass("inview");
        $(".post-item").removeClass("active");
        $(".post-item[data-myid='" + id + "']").addClass("active");
        if (ga) {
            if (jsspd1 == 1) {
                ga('send', 'pageview');
                ga('NDTVSports_New.send', 'pageview');
            }
            else {
                ga('send', 'pageview');
                ga('NDTVSports_New.send', 'pageview');
                ga('NDTV_Cricket.send', 'pageview');
            }
        }
        var count = 1;
        $(".inview").find(".mytaboolaClass").each(function () {
            if (!$(this).hasClass("taboolaAdded")) {
                //console.log($(this).attr("id"));
                //  postscribe("#" + $(this).attr("id"), $(this).attr("data-mydata"));
                $(this).addClass("taboolaAdded");
                $(this).addClass("taboolaAdded").attr("data-count", count);
                count++;
            }
        });
    }
    $(window).scroll(function (event) {
        var per = percentageSeen($(".mybox[data-myid='" + $(".post-item.active").attr("data-myid") + "']"));
        $(".post-item.active").find(".loading-line").css("width", parseInt(per) + "%");
        if (!isDone) {

            callData();
        }
        if (per > 30 && per < 40) {
            scrollContent($(".mybox[data-myid='" + $(".post-item.active").attr("data-myid") + "']").next())
        }

        var st = $(this).scrollTop();
        if (st > lastScrollTop) {
            // downscroll code
            if ($(".post-item.active").index() == 5) {
                mySwiper.slideNext();
            }
            $(".mybox").each(function () {
                if ($(this).find(" .mod-header .post-title").length > 0 && !$(this).hasClass("inview")) {

                    if (isScrolledIntoView($(this).find(" .mod-header .post-title"))) {
                        var id = $(this).attr("data-myid");
                        changeURLDATA(id)
                    }
                }
            })
        } else {
            if ($(".post-item.active").index() == 4) {
                mySwiper.slidePrev();
            }
            // mySwiper.slideNext();

            $(".mybox").each(function () {
                if ($(this).find(".bottom-ndtv-ad-microsite").length > 0 && !$(this).hasClass("inview")) {
                    if (isScrolledIntoView($(this).find(".bottom-ndtv-ad-microsite"))) {
                        var id = $(this).attr("data-myid");
                        changeURLDATA(id)
                    }
                }
            })
        }


        lastScrollTop = st;
    });
    function percentageSeen($element) {
        var $win = $(window);
        var viewportHeight = $(window).height(),
            scrollTop = $win.scrollTop(),
            elementOffsetTop = $element.offset().top,
            elementHeight = $element.height();


        if (elementOffsetTop > (scrollTop + viewportHeight)) {
            return 0;
        } else if ((elementOffsetTop + elementHeight) < scrollTop) {
            return 100;
        } else {
            var distance = (scrollTop + viewportHeight) - elementOffsetTop;
            var percentage = distance / ((viewportHeight + elementHeight) / 100);
            percentage = Math.round(percentage);
            return percentage;
        }
    }

}
var apiAdsTaboola = {};
SI_NS.menuClick = function (htmlBox) {
    $("body").addClass("closeAll");
    htmlBox.find(".nd-menu").off("click").on("click", function (e) {
        e.stopPropagation();
        $(".nav-more-menu").fadeOut().removeClass("open");
        if ($("#side-nav").hasClass("active")) {
            $("#side-nav").removeClass("active");

        }
        else {
            $("#side-nav").addClass("active");
        }
    });
    /* $(".nav-more .content-wrap").click(function (e) { e.stopPropagation();$("#side-nav").removeClass("active"); if ($(this).hasClass("open")) { $(this).parent().find(".nav-more-menu").fadeOut(); $(this).removeClass("open"); } else { $(".nav-more-menu").fadeOut().removeClass("open"); $(this).parent().find(".nav-more-menu").fadeIn(); $(this).addClass("open"); } });*/
    $(window).scroll(function () {
        $(".nav-more-menu").fadeOut().removeClass("open");
        $("#side-nav").removeClass("active");
        $(".nav-more .content-wrap").removeClass("open");
    });

    $(".closeAll").off("click").on("click", function () {
        $(".nav-more").find(".content-wrap").removeClass("open");
        $(".nav-more-menu").fadeOut().removeClass("open");

        $("#side-nav").removeClass("active");
    });
}
SI_NS.PhotoPopUp = function (photoID) {
//commented Harpreet Singh
    //var t = (window.location.pathname).split("-");
    //photoID1 = t[t.length - 1];
    //if (photoID1 != photoID) {
    //    photoID = photoID1
    //}

    var addCodeBOx = $(".adafternpara .nd-ad-bnr"); //if (bac1[0]) { if (addCodeBOx.length > 0) { postscribe(addCodeBOx, bac1[0]["ad-1"]); } }
    if ((window.location.hash).indexOf("img") >= 0) {
        $('html,body').animate({
            scrollTop: ($(".gallery-info[data-id='" + (window.location.hash).split("#")[1] + "']").offset().top) - ($(".nav-container").height() + 70)
        },
    'slow');

    }
    //commented Harpreet Singh
    //var urlD = "https://gen.ndtv.com/convergence/ndtv/AlbumAPI/AlbumListing.aspx?DataFor=ALBUMDETAIL-PAGING&Category=SPORTS&SubCategory=&AlbumType=PG&PageNumber=1&SortBy=PRIORITY&SortOrder=ASC&Status=1&AlbumID=" + photoID + "&PageSize=100&entity=";
    var container = $('.gallery-info .social-share');
    SI_NS.shareArticle("", container, false);
    $("body").append($(".nd-gallery-popup"));
    var adAdded = false;
    var ndtvswiper = null;
    $(".nd-gallary-wrapper .gallery-image").off("click").on("click", function () {
        var index = ($(this).parents(".gallery-info").attr("data-id")).replace("img", "");
        if (!adAdded) {

            var addCodeBOx = $(".nd-ad-block .nd-ad-wrapper"); //if (bac1[0]) { if (addCodeBOx.length > 0) {postscribe(addCodeBOx, bac1[1]["ad-4"]); }}
            adAdded = true;
        }

        $("body").css("overflow", "hidden");
        $('.nd-gallery-popup').fadeIn(function () {
            index = index-1;
            if (ndtvswiper != null) {
                ndtvswiper.slideTo(index)// - 1
            }
            else {
                ndtvswiper = new Swiper('.nd-gallery-popup .slider-wrap', {
                    nextButton: '.nav-right',
                    prevButton: '.nav-left',
                    loop: false,
                    setWrapperSize: true,
                    simulateTouch: false,
                    initialSlide: index,// - 1
                    preloadImages: true,
                    lazyLoading: false,
                    autoHeight: true,
                    //hashnav: true,
                    onInit: function () {
                        // var indexText = 1;
                        window.location.hash = "img" + (parseInt(index));
                        $(".popup-data .content-top p").html($(".nd-gallery-slider .slider-item").eq(index).attr("data-caption"));
                        var nowUrl = (window.location.href).split("#")[0] + "#" + $(".swiper-slide-active").attr("data-id");
                        var NextUrl = (window.location.href).split("#")[0] + "#" + $(".swiper-slide-next").attr("data-id");
                        SI_NS.shareArticle(nowUrl, $(".swiper-slide-next"), true);
                        SI_NS.shareArticle(NextUrl, $(".swiper-slide-active"), true);
                    },

                    onSlideChangeEnd: function () {
                        var NextUrl = (window.location.href).split("#")[0] + "#" + $(".swiper-slide-active").attr("data-id");
                        SI_NS.shareArticle(NextUrl, $(".swiper-slide-active"), true);
                        var indexText = parseInt(index);
                        if (typeof ndtvswiper != "undefined") {
                            indexText = parseInt(index);

                        }
                        window.location.hash = $(".nd-gallery-slider .swiper-slide.swiper-slide-active").attr("data-id");

                        $(".popup-data .content-top p").html($(".nd-gallery-slider .swiper-slide-active").attr("data-caption"));
                        if (ga) {
                            if (jsspd1 == 1) {
                                ga('send', 'pageview');
                                ga('NDTVSports_New.send', 'pageview');
                            }
                            else {
                                ga('send', 'pageview');
                                ga('NDTVSports_New.send', 'pageview');
                                ga('NDTV_Cricket.send', 'pageview');
                            }
                        }
                    }
                });
            }
        });



    });
    function shareImage() {
        //.gallery-data
        //$(".gallery-data .social-share li a").removeAttr("target").removeAttr("href");

        //$(".social-share li.fb,.social-share li.twitter,.social-share li.Gplus,.social-share li.pinterest").off("click").on("click", function () {
        $(".nd-popup-outer .social-share li").off("click").on("click", function () {
            var currentIndex = $(this).parents(".gallery-info").index();

            var currentURl = "http://" + window.location.host + window.location.pathname + "#img" + currentIndex;
            var url = "";
            if ($(this).hasClass('counts-fb')) {
                //  url = 'http://www.facebook.com/sharer.php?u=' + encodeURIComponent(currentURl) + '&t=' + encodeURIComponent(title);

                FB.ui({
                    method: 'feed',
                    link: currentURl,
                    caption: title,
                    picture: $(".isgalimgslider.swiper-slide-active").find("img").attr("src")
                }, function (response) { });
            }
            else if ($(this).hasClass('counts-Gplus')) {
                url = "https://plus.google.com/share?url=" + encodeURIComponent(currentURl);
            }
            else if ($(this).hasClass('counts-twitter')) {
                url = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(title) + "&url=" + encodeURIComponent(currentURl);
            }
            else if ($(this).hasClass('counts-pinterest')) { url = "http://pinterest.com/pin/create/bookmarklet/?url=" + encodeURIComponent(currentURl); }
            if ($(this).hasClass('tot-share') || $(this).hasClass('rss-icn') || $(this).hasClass('counts-fb')) { }
            else {
                if (!$(this).hasClass('whatsapp') || !$(this).hasClass('mailto')) { window.open(url, 'Share Page', 'width=600,height=400, scrollbars=no, resizable=no, top=250, left=250', false); }
            }
        });


    }
    shareImage();
    $(".popup-close").off("click").on("click", function () {
        $('.nd-gallery-popup').fadeOut(function () { $("body").css("overflow", "auto"); });
        removeHash();
    });
    function removeHash() {
        window.history.pushState("", document.title, window.location.pathname);
        btn.disabled = !(location.hash || location.href.slice(-1) == "#");
    }

    var title = "";
    var mkp = "";
    var params = {
        url: "https://api.photos.ndtv.com/photoDetail.aspx?apikey=51dfd4ba137083600e001adb&format=jsonp&Category=sports&PageSize=0&PageNumber=1&SortBy=priority&SortOrder=&Keywords=&Tags=&Status=1&Albumid=" + photoID,
        type: 'jsonpn',
        base: false
    };
    SI_NS.loadJSON(params, function (data) {
        //console.log("suess");
        data = data.results;
        title = data.photos[0].title;
        //console.log(data)
        $(".nd-gallery-popup .popup-title h2").html(title);
        $(data.photos).each(function (a) {
            var imgURl = $(this)[0].fullimage;
            var captionData = $(this)[0].description;
            mkp += '<li class="slider-item swiper-slide isgalimgslider" data-id="img' + (a) + '" data-caption="' + captionData + '" ><div class="slide-img-wrapper"><img src="' + imgURl + '" alt="" title=""/></div></li>';
        });
        $(".nd-gallery-popup .nd-gallery-slider").find(".slider-list").html(mkp);
    });
    //$.ajax({
    //    type: "POST",
    //    url: urlD,// "http://" + window.location.host + "/dataapi/dataapi.aspx?APIU=" + encodeURIComponent(urlD),
    //    dataType: "xml",
    //    success: function (xml) {
    //        title = $(xml).find("title_en").text();
    //        $(".nd-gallery-popup .popup-title h2").html(title);
    //        $(xml).find("content").each(function (a) {
    //            var imgURl = $(this).find("contentThumbnailUrl").text();
    //            var captionData = $(this).find("contentDesc").text();
    //            mkp += '<li class="slider-item swiper-slide isgalimgslider" data-id="img' + (a + 1) + '" data-caption="' + captionData + '"><div class="slide-img-wrapper"><img data-src="' + imgURl + '" alt="" title="" class="swiper-lazy" /><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div></div></li>';
    //        });
    //        $(".nd-gallery-popup .nd-gallery-slider").find(".slider-list").html(mkp);

    //    }
    //});
}
SI_NS.appendDataToBOX = function (loadmArkup) {

    for (var i in loadmArkup) {
        //$("#" + i).html(loadmArkup[i]);
        var addCode = loadmArkup[i]
        if (addCode.indexOf("google") < 0) {
            var addCodeBOx = $("#" + i); postscribe(addCodeBOx, addCode)
        }
        else {
            var addCodeBOx = $("#" + i); addCodeBOx.html(addCode);
        }
    }
}
SI_NS.shareArticle = function (url, container, chckH) {

    if (container.length <= 0) {
        container = $('.social-share');
    }
    var url = "http://" + window.location.hostname + window.location.pathname;



    var fbCount = '';
    var twtCount = '';
    var gplusCount = '';
    var totCount = 0;
    var cmtCount = '';

    //getFbLikes(url, function () {
    //    getgplusCount(url, function () {
    //        if (container.find('.pinterest').length > 0 || $(".left-top").find('.nd-gallery').length >= 1) { //check whether pinterest sharing is available on the page.
    //            getpinCount(url, function () {
    //                getTwtCount(url, function (ct) {
    //                    twtCount = 0;
    //                    totCount = totCount + parseInt(twtCount);
    //                    //container.find('.tw-cat a span').html(twtCount);
    //                    if (container.find('.tot-share')) { container.find('.tot-share').find('.tot-num').html(totCount); }

    //                    $('.total-share').find('span').html(totCount);
    //                });
    //            });
    //        } else {
    //            getTwtCount(url, function (ct) {
    //                twtCount = 0;
    //                totCount = totCount + parseInt(twtCount);

    //                if (container.find('.tot-share')) { container.find('.tot-share').find('.tot-num').html(totCount); }

    //                $('.total-share').find('span').html(totCount);
    //            });
    //        }
    //    });
    //});

    //$(container).find('ul li').unbind('click').bind('click', function () {

    //    var el = $(this);
    //    var url = '';
    //    var desc = '';
    //    var title = '';

    //    if ($(".content-wrap .post-title").find('h1').length > 0) title = ($(this).parent().parents(".mod-article").find(".content-wrap .post-title h1").text()).trim(); //for news story page
    //    else {
    //        if ($('.mod-head').find('h1').length > 0) title = $.trim($('.mod-head').find('h1').text()); //for news listing page
    //        //else title = $.trim($('.cat-hdr').find('h1').html()); //for fixture/results page
    //        //if ($('.stry-hdr').find('h1').length > 0) { title = ($('.stry-hdr').find('h1').text()).trim(); }

    //    }

    //    title = 'NDTV Sports - ' + title;



    //    var share_url = window.location.href;
    //    if ($(el).parents(".popup").length > 0) {
    //        share_url += "?mid=" + $(el).parents(".popup").attr("data-matchid");
    //    }
    //    if (_strcanURL.length > 0) {
    //        share_url = _strcanURL;
    //    }
    //    var pagepath = window.location.href.split('/');
    //    var pgp = [];
    //    for (var g = 0; g < pagepath.length; g++) {
    //        if (g == 0 || g == 1 || g == 2) { } else pgp.push(pagepath[g]);
    //    }
    //    pgp = pgp.join('/');


    //    if ($(this).hasClass('fb') || $(this).hasClass('counts-fb')) {
    //        if ($(this).parents(".gallery-data").length > 0) {
    //            FB.ui({
    //                method: 'feed',
    //                link: 'http://' + window.location.hostname + window.location.pathname + "#" + $(this).parents(".gallery-info").attr("data-id"),
    //                description: $.trim($(this).parents(".gallery-info .gallery-data").find("p").text()),
    //                picture: $(this).parents(".gallery-info").find(".gallery-image img").attr("src")
    //            }, function (response) { });
    //        }
    //        else if ($(this).parents(".nd-gallery-popup").length > 0) {
    //            FB.ui({
    //                method: 'feed',
    //                link: share_url,
    //                caption: title,
    //                picture: $(".isgalimgslider.swiper-slide-active").find("img").attr("src")
    //            }, function (response) { });
    //        }
    //        else {
    //            FB.ui({
    //                method: 'share',
    //                href: share_url,
    //            }, function (response) { });
    //        }
    //    } else if ($(this).hasClass('Gplus') || $(this).hasClass('counts-Gplus')) {
    //        url = "https://plus.google.com/share?url=" + encodeURIComponent(share_url);



    //    }
    //    else if ($(this).hasClass('twitter') || $(this).hasClass('counts-twitter')) {
    //        title = title + " " + $.trim($(this).parents(".gallery-info .gallery-data").find("p").text());




    //        url = "https://twitter.com/share?text=" + encodeURIComponent(title) + "&url=" + encodeURIComponent(share_url);


    //    }
    //    else if ($(this).hasClass('comment-new')) {

    //        if ($("#Comments").length > 0) {
    //            if ($(".comments-toggle").length > 0) {
    //                $('html,body').animate({
    //                    scrollTop: ($(".comments-toggle").offset().top) - ($(".nav-container").height() + 70)
    //                }, 'slow');
    //            }
    //            else {
    //                $('html,body').animate({
    //                    scrollTop: ($("#Comments").offset().top) - ($(".nav-container").height() + 70)
    //                }, 'slow');
    //            }
    //        }

    //        else {
    //            $('html,body').animate({
    //                scrollTop: ($(this).parent().parents(".mybox").find(".fb-cmnt-wgt").offset().top) - ($(".nav-container").height() + 70)
    //            }, 'slow');
    //        }



    //    }
    //    else if ($(this).hasClass('pinterest') || $(this).hasClass('twitter') || $(this).hasClass('counts-twitter') || $(this).hasClass('counts-pinterest')) url = "http://pinterest.com/pin/create/bookmarklet/?url=" + encodeURIComponent(share_url);
    //    if ($(this).hasClass('tot-share') || $(this).hasClass("comment-new") || $(this).hasClass('tw-cat') || $(this).hasClass('fb') || $(this).hasClass('rss-icn') || $(this).hasClass('counts-fb')) { } else {
    //        window.open(url, 'Share_Page', 'width=600,height=400, scrollbars=no, resizable=no, top=250, left=250', false);
    //    }
    //});


    //function getFbLikes(url, cb) {

    //    var urlx = 'https://api.facebook.com/method/links.getStats?urls=' + encodeURIComponent(url) + '&format=json';
    //    var params = {
    //        url: urlx,
    //        type: 'json'
    //    };
    //    SI_NS.loadJSON(params, function (data) {
    //        if (typeof data != 'undefined') {
    //            if (data.length > 0) {
    //                fbCount = data[0].like_count;
    //                cmtCount = data[0].comment_count;
    //            } else {
    //                fbCount = 0;
    //                cmtCount = 0;
    //            }
    //        }
    //        else {
    //            fbCount = 0;
    //            cmtCount = 0;
    //        }
    //        totCount = totCount + parseInt(fbCount);
    //        container.find('.fb-cat a span').html(fbCount + ' likes');
    //        container.attr("data-fb", fbCount);
    //        if (container.find('.cmmnt-btn')) container.find('.cmmnt-btn a span').html(cmtCount);

    //        if (cb) cb();
    //    });
    //}

    //function getTwtCount(url, cb) {

    //    container.attr("data-twt", 0);
    //    cb(0);
    //};

    //function getgplusCount(url, cb) {

    //    var urlx = 'http://sports.ndtv.com/dataapi/GetGooglePlusCount.aspx?url=' + encodeURIComponent(url);

    //    var params = {
    //        url: urlx,
    //        type: 'json',
    //        base: true
    //    };
    //    SI_NS.loadJSON(params, function (data) {
    //        //var x = $.parseJSON(data);
    //        // gplusCount = x.response;
    //        gplusCount = data;
    //        totCount = totCount + parseInt(gplusCount);
    //        container.find('.gplus-cat a span').html(gplusCount);
    //        container.attr("data-gp", gplusCount);
    //        if (cb) cb();
    //    });
    //}

    //function getpinCount(url, cb) {

    //    var urlx = 'http://api.pinterest.com/v1/urls/count.json?url=' + encodeURIComponent(url);
    //    var params = {
    //        url: urlx,
    //        type: 'jsonp'
    //    };

    //    SI_NS.loadJSON(params, function (data) {

    //        if (!data || data.error || data.length == 0) return false;
    //        totCount = totCount + parseInt(data.count);
    //        container.find('.pin-cat a span').html(data.count);
    //        container.attr("data-pt", 0);
    //        if (cb) cb();
    //    });



    //}

}
SI_NS.Init = function () {
    var arrFn = SI_Array.functionArray;
    for (var i = 0; i < arrFn.length; i++) {
        arrFn[i]();
    }
}
SI_NS.dontMiss = function () {
    var domMiss = $(".dont-miss");
    var swiperData = domMiss.find(".swiper-container");
    domMiss.find(".dont-miss-swiper").width(domMiss.find(".dont-desp").width());
    var domMissSwiper = $(swiperData).swiper({
        loop: false,
        slideElement: "li",
        slidesPerView: 'auto',
        slidesPerGroup: 1,
        calculateHeight: true,
        simulateTouch: false,
        setWrapperSize: true

    });
    $(domMiss).find(".scr-mod-pag span").unbind("click").bind("click", function () {
        $(domMiss).find(".scr-mod-pag span").removeClass("active");
        $(this).addClass("active");
        var indexNo = $(this).index();
        domMissSwiper.slideTo(indexNo);
    });
}
SI_NS.loadAppAds = function () {
    function setInt() {
        var el = $('.m-app-cnt').find('.m-app').filter(':visible');
        el.delay(5000).fadeOut(500, function () {
            el.siblings('.m-app').fadeIn(500, function () {
                setInt();
            });
        });
    }

    if ($(document).find('.m-app').length > 0) setInt();
}
SI_NS.dropDown = function () {
    $('.menu-arrow-down').addClass('active')
    $('.dropdown-box .dropdown-menu.active,.srch-drpdwn-menu').unbind('click').bind('click', function (e) {


        e.stopPropagation();

        if (!$(this).parents().siblings().find('.dropdown-option').is('visible')) {
            $(this).parents().siblings().find('.dropdown-option').slideUp();


        }
        if (!$(this).parents().find('.dropdown-option').is('visible')) {
            $(this).find('.dropdown-option').slideUp();


        }
        $('.dropdown-menu').addClass('active')

        if ($(this).find('.menu-arrow-down').hasClass('active')) {

            $(this).find('.menu-arrow-down').removeClass('active')
        } else {

            $(this).find('span.menu-arrow-down').addClass('active')
        }
        $(this).siblings('.dropdown-option').slideToggle();



        $('body').addClass('closeDiv')
        closeDropDown()
    });

    function closeDropDown(as) {
        $('body').unbind('click').bind('click', function (e) {
            $('.menu-arrow-down').removeClass('active')
            var pdiv = $(e.target).parents('.ui-datepicker-header');
            if (!$(pdiv).hasClass('ui-datepicker-header')) {
                e.stopPropagation();
                if (!$(this).find('.dropdown-option').is('visible')) {
                    $(this).find('.dropdown-option').slideUp();
                    $('.menu-arrow-down').removeClass('active')
                }
                $('.wrapper').removeClass('closeDiv');
            }
        })
    }

}
$(document).ready(function () {
    //   SI_NS.Init();
    var urlx = window.location.href;
    var container = $('.nd-right .social-share');
    SI_NS.shareArticle(urlx, container, false);

    SI_Array.functionArray.push(function () { SI_NS.loadSticky(); });
    var sideBarWidth = $("").width();
    $(window).scroll(function () { SI_NS.loadSticky(); });
    var myFunArray = SI_Array.functionArray;
    for (var a = 0; a < myFunArray.length; a++) {
        myFunArray[a]();
    }
    SI_NS.loadSticky();
});

//var apilink = "http://beta.api.ndtvsportsweb.stats.com";
//if (window.location.host == "sports.ndtv.com") {
//    apilink = "https://api.sports.ndtv.com";
//}
//SI_NS.loadmenuVideoPhoto = function (htmlBox, entityid, entityname, flag, type, count, path) {
//    var url = apilink + '/dataapi/getphotovideolistingloadmore?photovideo_entityid=' + entityid + '&EntityName=' + entityname + '&pageNo=' + 1 + '&noOfRecords=' + count + '&flag=' + flag + 's' + '&type=' + type;
//    SI_NS.loadJSON({
//        url: url,
//        type: 'jsonp',
//        base: false,
//    }, function (data) {
//        var clasName = "Photo";
//        if (flag != "photo") {
//            clasName = "Video";
//        }
//        var Item = data[flag + 's'];
//        if (Item.length < 3) {

//            $(".subMenu" + clasName + "Data").remove();
//        }
//        printMKp(Item)
//        //markUP(Item);

//    });
//    function printMKp(mydata) {
//        console.log(mydata);
//        var mkp = "";
//        $(mydata).each(function () {
//            var thisData = $(this)[0];
//            var text = (thisData.Title).substr(0, 44) + "...";
//            var storyurl = (thisData.Albumurl);
//            var imagURl = thisData.FolderPath + thisData.MediumThumbImage;
//            var duText = thisData.TotalImages + ' Images';
//            if (flag == "video") {
//                imagURl = (thisData.Fullimage).replace("/medium/", "/thumb/").replace("/big_", "/thumb_");
//                storyurl = path + "/videos/" + (thisData.Urltitle).replace(/[^a-z0-9 ]/gi, '').replace(/ /g, "-").toLowerCase() + "-" + thisData.Id;
//                duText = ((thisData.Duration) / 60).toFixed(2);
//            }
//            //storyurl=storyurl.replace("/photos/euro-2016-", "/euro-2016/photos/")
//            /* mkp += '<div class="post-item post-type-' + flag + ' col-sm-4"><div class="post-item-wrapper"><div class="post-thumbnail"><a href="' + storyurl + '" alt="' + thisData.Title + '" title="' + thisData.Title + '"><img src="' + imagURl + '" alt="' + thisData.Title + '" title="' + thisData.Title + '"><span class="post-icon"></span><div class="post-meta"><span class="counts">' + duText + '</span></div></a></div>    <div class="post-content"><div class="post-title"><h1><a href="' + storyurl + '" alt="' + thisData.Title + '" title="' + thisData.Title + '"><span>' + county + text + '</span></a></h1></div><div class="post-description"><p></p></div></div></div></div>';*/
//            mkp += '<div class="post-item col-sm-3"> <div class="post-item-wrapper"> <div class="post-thumbnail"> <a href="' + storyurl + '"> <img src="' + imagURl + '"> </a> </div><div class="post-content"> <div class="post-title"> <a href="' + storyurl + '"><span> ' + text + '</span> </a> </div></div></div></div>'

//        });
//        htmlBox.find(".post-list.list-type-8").append(mkp);
//        htmlBox.find(".post-item img").error(function () {
//            $(this).attr("src", "http://s.ndtvimg.com/images/ndtvsports-default.jpg")
//        });
//        SI_NS.loadSticky();

//    }
//}
//SI_NS.loadmenunews = function (sportid, categoryId, pageNumber, noOfRecords, cont) {
//    var staticMKP = "";
//    var url = 'http://api.sports.ndtv.com/DataAPI/NewsListingLoadMore?sportid=' + sportid + '&categoryId=' + categoryId + '&pageNo=' + pageNumber + '&noOfRecords=' + noOfRecords;
//    SI_NS.loadJSON({
//        url: url,
//        type: 'jsonp',
//        base: false,
//    }, function (data) {
//        var Item = data.items;
//        markUP(Item);
//    });
//    function markUP(Item) {
//        for (var i = 0; i < Item.length; i++) {
//            var obj = Item[i];
//            var src = "http://s.ndtvimg.com/" + obj.imageurl;
//            var category_array = obj.categoryinfo;
//            var text = (obj.titletext).substr(0, 44) + "...";
//            var category_string = '/';
//            /*    for (var c = category_array.length - 1; c >= 0; c--) {
//                    category_string += category_array[c].categoryalias + '/';
//                }*/
//            var urlParents = $.grep(obj.entitydata, function (a, b) { if ((a.entitytypename).toLowerCase() == "series") { return a; } });
//            if (urlParents.length <= 0) {
//                urlParents = $.grep(obj.entitydata, function (a, b) { if ((a.entitytypename).toLowerCase() == "sports") { return a; } });
//            }
//            var categoryinfoData = $.grep(obj.categoryinfo, function (a, b) { if ((a.categoryid) == categoryId) { return a; } });

//            var newsURL = urlParents[0].canonicaluRL + "/" + categoryinfoData[0].categoryalias + "/" + obj.itemid + '-' + obj.titlealias;

//            staticMKP += '<div class="post-item col-sm-3"> <div class="post-item-wrapper"> <div class="post-thumbnail"> <a href="' + newsURL + '"> <img src="' + src + '"> </a> </div><div class="post-content"> <div class="post-title"> <a href="' + newsURL + '"><span> ' + text + '</span> </a> </div></div></div></div>'
//        }
//        cont.find(".post-list").html(staticMKP);

//    }
//}

//All Polls
//SI_NS.loadPoll = function (cont, pollexp, typo) {

//    var PollData = [];
//    var predata = [];
//    var curropn = 0;
//    $.cookie.json = true;
//    var pollers = $.cookie('polls');
//    if (pollers == undefined) pollers = [];

//    cont.find('.mod-body').each(function () {
//        var ct = $(this);
//        var pollid = parseInt(ct.find(".content-box").attr('data-pollid'));
//        console.log(pollid);
//        if (pollers != undefined && pollers.length > 0) {
//            var cookiepoll = $.grep(pollers, function (n, i) {
//                if (n.pollid == pollid) return n;
//            });

//            if (cookiepoll.length > 0) { //poll already exists in cookie
//                printPollResults(pollid, ct);
//            } else launchPoll(ct, pollid);
//        } else {
//            launchPoll(ct, pollid);
//        }
//    });

//    function launchPoll(ct, pollid) {
//        var url = '';
//        ct.find('ul li').on('click', function () {
//            if (!$(this).hasClass('active')) {
//                $(this).addClass('active').siblings('li').removeClass('active');
//            }
//        });

//        ct.find('.nd-btn').on('click', function () {

//            vote();
//        });

//        function vote() {
//            var urlx = 'http://api.sports.ndtv.com/live/PollAPI/GetPollListing/jsonp?pollId=' + pollid + '&ETRID=&optType=2';
//            SI_NS.loadJSON({
//                url: urlx,
//                type: 'jsonp',
//                base: false
//            }, function (dta) {
//                predata = dta;
//                if (ct.find('ul li').filter('.active').length > 0) {
//                    var optnid = ct.find('ul li').filter('.active').attr('data-optionid');
//                    curropn = optnid;

//                    url = 'http://' + window.location.host + '/DataAPI/PollAPI.aspx';


//                    var jsondta = 'pollId=' + pollid + '|optionId=' + optnid + '';
//                    url = url.toLowerCase();
//                    $.ajax({
//                        type: "POST",
//                        url: url,
//                        data: jsondta,
//                        contentType: "text/plain",
//                        success: function () {
//                            var pollobj = {
//                                pollid: pollid,
//                                optnid: optnid
//                            };
//                            pollers.push(pollobj); //cookie object
//                            PollData.push(pollobj); // global object
//                            $.cookie('polls', pollers, {
//                                expires: pollexp
//                            });
//                            ct.find('.pl-rt').before('<div class="thanks-msg">Thank You For Your Vote.</div>');
//                            ct.find('.pl-rt').trigger('click'); //print poll results
//                        },
//                        error: function () {

//                        },
//                        dataType: "text"
//                    });

//                } else {
//                    alert('Please Select an Option');
//                }
//            });
//        }

//        ct.find('.pl-rt').on('click', function (e) {
//            if (predata && predata.length > 0) printPollResults(pollid, ct, predata, curropn);
//            else printPollResults(pollid, ct);
//        });
//    }

//    //show results
//    function printPollResults(pollid, ct, dta, curropn) {
//        console.log("-->" + pollid)
//        if (dta && dta.length > 0) {
//            var tot = 0;
//            var result = dta[0].result;

//            for (var x = 0; x < result.length; x++) {
//                if (parseInt(result[x].pollOptionId) == parseInt(curropn)) {
//                    tot += parseInt(result[x].optionResult) + 1;
//                    result[x].optionResult = (parseInt(result[x].optionResult) + 1).toString();
//                } else tot += parseInt(result[x].optionResult);
//                if (x == result.length - 1) { //at the end of loop
//                    for (var q = 0; q < result.length; q++) {
//                        result[q].result_percentage = ((parseInt(result[q].optionResult) / tot) * 100).toFixed(2);
//                    }
//                }
//            }
//            dta[0].result = result;
//            printr(dta, ct);
//        } else {
//            var urlx = 'http://api.sports.ndtv.com/live/PollAPI/GetPollListing/jsonp?pollId=' + pollid + '&ETRID=&optType=2';
//            SI_NS.loadJSON({
//                url: urlx,
//                type: 'jsonp',
//                base: false
//            }, function (dta) {
//                if (!dta || dta.length == 0) {
//                    return false;
//                } else {
//                    printr(dta, ct);
//                }
//            });
//        }

//        function printr(dta, ct) {
//            var curelx = ct.find(".content-box").attr('data-pollid');
//            ct.find('.nd-btn').hide();
//            var nocookie = false;
//            if ($('.nores').length > 0) $('.nores').remove();
//            if (ct.find('.bar-progress-container')) ct.find('.bar-progress-container').remove();

//            var selectdopn = $.cookie('polls');
//            if (!selectdopn || selectdopn == undefined) { //no cookie available.. just show results from api
//                nocookie = true;
//            } else if (selectdopn != undefined) {
//                var v = $.grep(selectdopn, function (n, i) {
//                    if (n.pollid == curelx) return n;
//                });
//                if (v.length > 0) nocookie = false;
//                else nocookie = true;
//            } else {
//                selectdopn = selectdopn[0].optnid;
//                ct.find('ul li[data-optionid="' + selectdopn + '"]').addClass('active');
//                nocookie = true;
//            }

//            ct.find('ul li').find('span').hide();
//            var res = dta[0].result;
//            var optnarr = dta[0].option;

//            if (res.length == 0) {
//                ct.find('.pl-rt').html('<span class="backlinker blnores">Back To Poll</span>');
//                ct.find('.pl-rt').after('<div class="nores">No Results Available</div>');
//            } else {
//                var bar = '';
//                for (var q = 0; q < optnarr.length; q++) {
//                    var optnid = optnarr[q].pollOptionId;
//                    var resltbar = $.grep(res, function (n) {
//                        if (n.pollOptionId == optnid) return n;
//                    });
//                    if (resltbar.length > 0 && resltbar[0].result_percentage) {
//                        var r1 = parseFloat(resltbar[0].result_percentage);
//                    } else r1 = 0;
//                    var r2 = 100 - r1;
//                    r2 = r2.toFixed(2);
//                    //  bar = '<div class="bar-line"><div data-prct="' + r1 + '" style="width:' + r1 + '%" class="bar-1"></div><div data-prct="' + r2 + '" style="width:' + r2 + '%" class="bar-2"></div><div class="clr"></div></div><div class="bar-reslt">' + r1 + '%</div>';
//                    bar = '<div class="bar-progress-container"><div class="bar-progress"> <span style="width:' + r1 + '%"></span></div><div class="bar-progress-num"> <span>' + r1 + '%</span></div></div>'
//                    ct.find('ul').find('li[data-optionid="' + optnid + '"]').append(bar);
//                    ct.find('ul').addClass("results")
//                    SI_NS.loadSticky();

//                    if (nocookie == true) {
//                        ct.find('.pl-rt').html('<span class="backlinker">Back To Poll</span>');
//                    } else {
//                        ct.find('.pl-rt').hide();
//                    }
//                }
//            }

//            ct.find('.backlinker').on('click', function (e) {
//                e.stopPropagation();
//                if (ct.find('.bar-progress-container')) ct.find('.bar-progress-container').remove();
//                if (ct.find('.bar-reslt')) ct.find('.bar-reslt').remove();
//                $(this).parent('a').html('View Results');
//                ct.find('ul li').find('span').show();
//                ct.find('ul').removeClass("results")
//                ct.find('.nd-btn').show();
//                if (ct.find('.nores'), length > 0) ct.find('.nores').remove();

//                SI_NS.loadSticky();
//            });
//        }
//    }
//}
SI_NS.dropDownChange = function () {
    $(".select-box").off("click").on("click", function (e) {
        e.stopPropagation();
        e.preventDefault();
        if ($(this).hasClass("open")) {
            $(this).find(".select-list").slideUp("slow");
            $(this).removeClass("open");
            $(".closed").off("click");
            $("body").removeClass("closed");
        }
        else {
            $(".select-filters").find(".select-list").slideUp("slow");
            $(".select-filters .select-box").removeClass("open");
            $(this).addClass("open");
            $(this).find(".select-list").slideDown("slow");
            $("body").addClass("closed");
            $(".closed").off("click").on("click", function () {
                $(".select-filters").find(".select-list").slideUp("slow");
                $(".select-filters .select-box").removeClass("open");
            });
        }

    });
};

