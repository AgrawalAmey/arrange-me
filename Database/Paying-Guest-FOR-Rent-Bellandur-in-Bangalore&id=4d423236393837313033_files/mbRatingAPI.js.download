var imgPath="/images/";var mbRating={key:"",host:document.domain,type:"",code:-1,loginId:"",urrRefNum:-1,provider:"localhost:8080",tvm:0,oag:0,lrr:0,getExpendableRatingWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getExpendableRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getExpendableRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=expendableWidgetResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getRatingBoxWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getRatingBoxWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getRatingBoxWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=1&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=ratingBoxResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getRatingBoxWidgetAdvice:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getRatingBoxWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getRatingBoxWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=1&lrrl=0";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=ratingBoxResponseAdvice&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getRatingBoxWidgetAdviceSummery:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getRatingBoxWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getRatingBoxWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=1&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=ratingBoxResponseAdviceSummery&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getMyMagicboxWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getMyMagicboxWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getMyMagicboxWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&userLoginId="+encodeURIComponent(this.loginId);A+="&lrr=1&oag=0&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=myMagicboxResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getAgentDeatilsWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getAgentDeatilsWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getAgentDeatilsWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&userLoginId="+encodeURIComponent(this.loginId);A+="&lrr=1&oag=0&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=agentDetailsResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getPropDetailRatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=propDetailRatingAndReviewResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getProjDetailRatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=projDetailRatingAndReviewResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getNewDetailsRatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getNewDetailsRatingAndReviewWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getNewDetailsRatingAndReviewWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=newDetailsRatingAndReviewWidget&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getProjDetailRatingAndReviewLocality:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=projDetailRatingAndReviewResponseLocality&parentData="+JSON.stringify(C)+"&"+A+"&locDet=1";this.jsonp(B)},getRatingAndReviewLocality:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=ratingAndReviewResponseLocality&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getLocalityRecommendation:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=recommendationLocality&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getCompareProjectsRatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getPropDetailRatingWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getPropDetailRatingWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=compareProjectsRatingAndReviewWidget&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getLocalityCompare1RatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getLocalityCompare1RatingAndReviewWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getLocalityCompare1RatingAndReviewWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=localityCompare1RatingAndReviewWidget&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getLocalityCompare2RatingAndReviewWidget:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getLocalityCompare2RatingAndReviewWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getLocalityCompare2RatingAndReviewWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&mbRatingUserRefNum="+this.urrRefNum;A+="&lrr=1&oag=1&tvm=0&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=localityCompare2RatingAndReviewWidget&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getCount:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getCount");return }else{if(!C||C==undefined){alert("MB Rating & Review Error : Addition Info missing : getCount");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&oag=1&lrr=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=countResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getMyReviewLocality:function(C){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : getMyReviewLocality");return }else{if(!C||C==undefined){alert("MB Rating & Review Error : Addition Info missing : getMyReviewLocality");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&code="+this.code;A+="&oag=0&lrr=1";A+="&type="+encodeURIComponent(this.type);A+="&userLoginId="+encodeURIComponent(this.loginId);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=myReviewLocalityResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},updateReviewAndRating:function(C,D){if(this.host==""||this.key==""||this.type==""||this.code==-1){alert("MB Rating & Review Error : Unregistered Call : updateReviewAndRating");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : updateReviewAndRating");return }else{if(!D||D==undefined){alert("MB Rating & Review Error : Data Missing : updateReviewAndRating");return }}}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&type="+encodeURIComponent(this.type);A+="&reviewId="+D.reviewId;A+="&overallRatingRefNum="+D.overallRatingId;A+="&localityId="+this.code;if(D.userLoginId){A+="&userLoginId="+D.userLoginId}if(D.cityId){A+="&cityId="+D.cityId}if(D.cityName){A+="&cityName="+D.cityName}if(D.cityName){A+="&localityName="+D.localityName}var B="http://"+this.provider+"/mbRating/updateReviewAndRating.json?callback=postReviewResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getLeftPanelWidget:function(C,D){if(this.host==""||this.key==""||this.type==""){alert("MB Rating & Review Error : Unregistered Call : getLeftPanelWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getLeftPanelWidget");return }else{if(!D||D==undefined||!D.cityCode){alert("MB Rating & Review Error : City Code not found : getLeftPanelWidget");return }}}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&cityCode="+D.cityCode;A+="&lrr=1&oag=1&lrrl=1";A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/getWiget.json?callback=getLeftPanelWidgetResponse&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getReviewCities:function(C,D){if(this.host==""||this.key==""||this.type==""){alert("MB Rating & Review Error : Unregistered Call : getLeftPanelWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getLeftPanelWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/checkAvilabityAndGetMap.json?callback=getReviewCities&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},getCitiyLocalities:function(C,D){if(this.host==""||this.key==""||this.type==""){alert("MB Rating & Review Error : Unregistered Call : getLeftPanelWidget");return }else{if(!C||C==undefined||C.parentDiv==""){alert("MB Rating & Review Error : Parent element not found : getLeftPanelWidget");return }}var A="host="+encodeURIComponent(this.host);A+="&key="+encodeURIComponent(this.key);A+="&cityCode="+D.cityCode;A+="&type="+encodeURIComponent(this.type);var B="http://"+this.provider+"/mbRating/checkAvilabityAndGetMap.json?callback=getCitiyLocalities&parentData="+JSON.stringify(C)+"&"+A;this.jsonp(B)},jsonp:function(B){var C=document.getElementsByTagName("head")[0];var A=document.createElement("script");A.setAttribute("src",B);C.appendChild(A);if(navigator.appName!="Microsoft Internet Explorer"){C.removeChild(A)}},pause:function(B){var A=new Date();var C=A.getTime()+B;while(A.getTime()<C){var A=new Date()}}};function showModelWindow(B,G){var F=$("#"+G);var A=F.offset().left;var D=F.offset().top;var E=$("#"+B).outerHeight();var C=$("#"+B).outerWidth();if(F.hasClass("agentReviewClass")){$("#"+B).css({left:A,top:D,marginLeft:-(C)})}else{$("#"+B).css({left:A,top:D,marginLeft:-(C/2)})}$("#"+B).fadeIn("slow");equalHeight($("#"+B).find(".topratedCatogaries"))}function closeModelWindow(A){$("#"+A).fadeOut("slow")}$("#noReviewTextMsg").live("focus",function(){var A=$(this);if(A.val()=="By Sharing your review, you are helping property seekers make better choice and live in a better locality"){A.css("color","#000000");A.val("")}});function generateCategoryRating(F){var D="<div class='startRating'>";var A=true;for(var B in F){if(F[B]){var E=F[B];D+="<div class='topratedCatogaries ";if(!A){D+="colume2"}D+="'><h5>"+B+"</h5><ul>";for(var G in E){if(E[G]){var C=parseInt(E[G]);if(C>0){D+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";D+="<span class='selected' style='border:none;' lang='Terrible'></span><span ";if(C>=2){D+="class='selected'"}D+=" style='border:none;' lang='Poor'></span><span ";if(C>=3){D+="class='selected'"}D+=" style='border:none;' lang='Average'></span><span ";if(C>=4){D+="class='selected'"}D+=" style='border:none;' lang='Good'></span><span ";if(C>=5){D+="class='selected'"}D+=" style='border:none;' lang='Excellent'></span></div></div><div class='clr'></div></li>"}}}D+="</ul></div>";A=false}}return D}function generateUserParamRating(F){var D="";var A=true;for(var B in F){if(F[B]){var E=F[B];D+="<div class='topratedCatogaries ";if(!A){D+="colume2"}D+="'><h5>"+B+"</h5><ul>";for(var G in E){if(E[G]){var C=parseInt(E[G]);if(C>0){D+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";D+="<span class='selected' style='border:none;' lang='Terrible'></span><span ";if(C>=2){D+="class='selected'"}D+=" style='border:none;' lang='Poor'></span><span ";if(C>=3){D+="class='selected'"}D+=" style='border:none;' lang='Average'></span><span ";if(C>=4){D+="class='selected'"}D+=" style='border:none;' lang='Good'></span><span ";if(C>=5){D+="class='selected'"}D+=" style='border:none;' lang='Excellent'></span></div></div><div class='clr'></div></li>"}}}D+="</ul></div>";A=false}}return D}function expendableWidgetResponse(K,I){var E=$("#"+I.parentDiv);if(E&&K){if(K.errorMsg&&K.errorMsg!=""){loaderObj.html(K.errorMsg)}else{if(K.avgRating){var J="<div class='radingRow'><div class='bigStart'>"+K.avgRating+"</div><div class='bigStartRating'>";J+="<p>Rating <strong>"+K.avgRating+"</strong>/5 from "+K.ratedByUser+" users ";if(K.reviewCount&&K.reviewCount>0&&I.reviewUrl){J+="| &nbsp;<a href='#"+I.reviewUrl+"' >"+K.reviewCount+" Reviews</a></p> "}J+=" <div class='clr'></div></div></div>";if(K.categoryRatingMap){J+=generateCategoryRating(K.categoryRatingMap)}if(K.overallRatingMap){J+="<div class='topratedCatogaries overAllRating'><h5>Overall Rating</h5><ul>";for(var A=5;A>0;A--){if(K.overallRatingMap[A]){var F=K.overallRatingMap[A];var D=(parseInt(F)/parseInt(K.ratedByUser))*100;J+="<li><div class='rateText'>";if(A==5){J+="Excellent"}else{if(A==4){J+="Very Good"}else{if(A==3){J+="Good"}else{if(A==2){J+="Average"}else{if(A<=1){J+="Poor"}}}}}J+="</div><div class='rateProcess'><div class='rateProcessBar' style=' width:"+D+"%;'>";J+="</div></div><div class='rateUsers'>"+F+" User</div><div class='clr'></div></li>"}}J+="</ul></div>"}J+="<div class='clr'></div></div>";var C="";var N="Add Your Review";var M="javascript:showPostReviewGrayBox()";if(K.overallRatingByUser){N="";M=""}if(K.recommendedFor){var H=K.recommendedFor;C="";for(var L in H){var B=H[L];var G=imgPath+"localityIcon"+B+".png";C+="<span><img alt='' src='"+G+"'> "+B+"</span>"}if(C!=""){J+="<div class='recommendLocality'><div class='recommendLeft'>Locality Recommended For:</div><div class='recommendCenter'>"+C+"</div>"}}if(M){if(C!=""){J+="<div class='recommendRight'><a href='"+M+"' class='btnRateReview'>"+N+"</a></div>"}else{J+="<div class='recommendLocality'><div class='recommendRight'><a href='"+M+"' class='btnRateReview'>"+N+"</a></div><div class='clr'></div>"}}else{if(K.overallRatingByUser){if(C!=""){J+="<div class='rateReview'><div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+K.codeDesc+", "+K.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+K.overallRatingByUser+"Rating''></span></div></div>"}else{J+="<div class='recommendLocality'><div class='rateReview'><div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+K.codeDesc+", "+K.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+K.overallRatingByUser+"Rating''></span></div></div><div class='clr'></div>"}}}J+="<div class='clr'></div></div>";E.html(J)}else{var J="";var N="Add Your Review";var M="javascript:showPostReviewGrayBox()";if(K.overallRatingByUser){N="";M=""}if(M){J+="<div class='recommendLocality'><div class='recommendRight'><a href='"+M+"' class='btnRateReview'>"+N+"</a></div><div class='clr'></div></div> "}else{J+="<div class='recommendLocality'><div class='rateReview'>";if(K.overallRatingByUser){J+="<div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+K.codeDesc+", "+K.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+K.overallRatingByUser+"Rating''></span></div></div>";J+="<div class='clr'></div></div>"}}E.html(J)}}}}function ratingBoxResponse(N,R){var E=$("#"+R.parentDiv);if(E&&N){if(N.errorMsg&&N.errorMsg!=""){E.html(N.errorMsg)}else{if(N.avgRating||(N.reviewCount&&N.reviewCount>0)){var J="<div class='radingRow'>";if(N.avgRating){J+="<div class='bigStart'>"+N.avgRating+"</div><div class='bigStartRating'>";J+="<div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><p>Rating <span itemprop='ratingValue'><strong>"+N.avgRating+"</strong></span>/5 from <span itemprop='ratingCount'>"+N.ratedByUser+" </span> users ";if(R.reviewUrl&&N.reviewCount&&N.reviewCount>0){J+="| &nbsp;<a href='"+R.reviewUrl+"' >"+N.reviewCount+" Reviews</a>"}J+="</p></div>"}if(N.topViewMap){J+="<div class='topRateCont'><h4>Top Rated Categories :</h4><ul class='leftColumn'>";var D=1;var A=false;for(var G in N.topViewMap){if(N.topViewMap[G]){var L=parseInt(N.topViewMap[G]);if(L>0){if(D<=4){J+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";J+="<span class='selected' lang='Terrible'></span><span ";if(L>=2){J+="class='selected'"}J+=" lang='Poor'></span><span ";if(L>=3){J+="class='selected'"}J+=" lang='Average'></span><span ";if(L>=4){J+="class='selected'"}J+=" lang='Good'></span><span ";if(L>=5){J+="class='selected'"}J+=" lang='Excellent'></span></div></div><div class='clr'></div></li>"}else{if(D>4){A=true;break}}if(D==2){J+="</ul><ul class='rightColumn'>"}D++}}}J+="</ul><div class='clr'></div>";if(A){J+="<div class='rateMore' id='moreRated'><a href='javascript:void(0);' onclick=\"showModelWindow('ratingModelBox', 'moreRated');\">More</a></div>"}J+="</div></div>"}J+="<div class='clr'></div></div>";var H=2;if(N.avgRating){H=1;if(N.recommendedFor){var Q=N.recommendedFor;var I=0;for(var F in Q){if(I>=3){break}if(F!=0){J+=" | "}else{J+="<p>Locality Recommended for: <span class='linksSec'>"}var T=Q[F];J+="<strong>"+T+"</strong>";I++}J+="</span></p>"}}else{if(R.boxLbl){$("#"+R.boxLbl).html("Review")}}if(N.lastReviewResultList){J+="<h4 style='padding: 2px 0 3px;'>Latest ";if(H==1){J+="Review"}else{J+="Reviews"}J+=" of Locality</h4>";for(var O in N.lastReviewResultList){if(O<H){var K=N.lastReviewResultList[O];if(K.reviewTitle){var S=K.reviewTitle;if(S.length>40){S=S.substring(0,40)+" ..."}J+="<div class='latestReview'>\""+S+'"';if(K.overAllRating){J+="<div class='starRate'><div class='ratedstars'>";var L=parseInt(K.overAllRating);if(L>0){J+="<span class='selected' lang='Terrible'></span><span ";if(L>=2){J+="class='selected'"}J+=" lang='Poor'></span><span ";if(L>=3){J+="class='selected'"}J+=" lang='Average'></span><span ";if(L>=4){J+="class='selected'"}J+=" lang='Good'></span><span ";if(L>=5){J+="class='selected'"}J+=" lang='Excellent'></span></div></div>"}}J+="</div>"}if(K.reviewDescription){var P=K.reviewDescription;if(P.length>120){P=P.substring(0,120)+" ..."}J+="<p>"+P+"</p>"}if(K.userName){J+="<p>Posted by: ";if(R.agentLink&&K.agentLink){var B=R.agentLink+K.agentLink;J+="<a href="+B+">"}J+=K.userName;if(K.agentLink&&R.agentLink){J+="</a>"}if(K.userRelation){J+=", "+K.userRelation}J+="</p>"}}}}J+="</div>";J+="<div class='rateReview'>";if(N.overallRatingByUser){J+="<div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+N.codeDesc+", "+N.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+N.overallRatingByUser+"Rating''></span></div></div>"}else{J+="<a href='javascript:void(0);' onclick='showPostReviewGrayBox();' class='btnRateReview'>Rate &amp; Review This Locality</a></div>"}E.html(J);document.getElementById(R.parentDiv).style.display="";if(A&&N.categoryRatingMap&&R.modelAreaDivId){var C=$("#"+R.modelAreaDivId);if(C){var M="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";M+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";M+=generateCategoryRating(N.categoryRatingMap);M+="<div class='clr'></div></div></div>";C.html(M)}}}else{var J="<div class='noRatingReview'><div class='noReviewMsg'>Currently we don't have any rating &amp; reviews of this locality.</div>";J+="<h4>Be the First to Rate &amp; Review this Locality</h4>";J+="<div class='noReviewTextMsg'><textarea cols='' id='noReviewTextMsg' rows='' onkeypress='javascript:showPostReviewFormPrePopulated(this.value);'>By Sharing your review, you are helping property seekers ";J+="make better choice and live in a better locality</textarea></div><a href='javascript:void(0);' onclick='showPostReviewGrayBox();' class='btnRateReview'>Rate &amp; Review This Locality</a></div>";E.html(J)}}}}function ratingBoxResponseAdvice(O,S){var E=$("#"+S.parentDiv);if(E&&O){if(O.errorMsg&&O.errorMsg!=""){E.html(O.errorMsg)}else{if(O.avgRating||(O.reviewCount&&O.reviewCount>0)){var K="<div class='radingRow'>";if(O.avgRating){K+="<div class='bigStart'>"+O.avgRating+"</div><div class='bigStartRating'>";K+="<div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'>";var H=parseInt(O.avgRating);K+="<div class='starRatingAdvice'><div class='starRate'><div class='ratedstars'>";K+="<span class='selected' lang='Terrible'></span><span ";if(H>=2){K+="class='selected'"}K+=" lang='Poor'></span><span ";if(H>=3){K+="class='selected'"}K+=" lang='Average'></span><span ";if(H>=4){K+="class='selected'"}K+=" lang='Good'></span><span ";if(H>=5){K+="class='selected'"}K+=" lang='Excellent'></span></div></div>";K+="<strong>Rating "+O.avgRating+"</strong></div>";if(S.reviewUrl&&O.reviewCount&&O.reviewCount>0){K+="<p><a href='javascript://' onclick='adviceReviewHref(this,\""+S.parentDiv+"\");'>"+O.reviewCount+" Reviews</a></p>"}K+="</div>"}if(O.topViewMap){K+="<div class='topRateCont'><h4>Top Rated Categories :</h4><ul class='leftColumn'>";var D=1;var A=false;for(var G in O.topViewMap){if(O.topViewMap[G]){var M=parseInt(O.topViewMap[G]);if(M>0){if(D<=4){K+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";K+="<span class='selected' lang='Terrible'></span><span ";if(M>=2){K+="class='selected'"}K+=" lang='Poor'></span><span ";if(M>=3){K+="class='selected'"}K+=" lang='Average'></span><span ";if(M>=4){K+="class='selected'"}K+=" lang='Good'></span><span ";if(M>=5){K+="class='selected'"}K+=" lang='Excellent'></span></div></div><div class='clr'></div></li>"}else{if(D>4){A=true;break}}if(D==2){K+="</ul><ul class='rightColumn'>"}D++}}}K+="</ul><div class='clr'></div>";if(A){K+="<div class='rateMore' id='moreRated'><a href='javascript:void(0);' onclick=\"showModelWindow('ratingModelBox', 'moreRated');\">More</a></div>"}K+="</div></div>"}K+="<div class='clr'></div></div>";var I=2;if(O.avgRating){I=1;if(O.recommendedFor){var R=O.recommendedFor;var J=0;for(var F in R){if(J>=3){break}if(F!=0){K+=" | "}else{K+="<p class='recomendFont'>Locality Recommended for: <span class='linksSec'>"}var U=R[F];K+="<strong>"+U+"</strong>";J++}K+="</span></p>"}}else{if(S.boxLbl){$("#"+S.boxLbl).html("Review")}}if(O.lastReviewResultList){K+="<h4 style='padding: 2px 0 3px;'>Latest ";if(I==1){K+="Review"}else{K+="Reviews"}K+=" of Locality</h4>";for(var P in O.lastReviewResultList){if(P<I){var L=O.lastReviewResultList[P];if(L.reviewTitle){var T=L.reviewTitle;if(T.length>40){T=T.substring(0,40)+" ..."}K+="<div class='latestReview'>\""+T+'"';if(L.overAllRating){K+="<div class='starRate'><div class='ratedstars'>";var M=parseInt(L.overAllRating);if(M>0){K+="<span class='selected' lang='Terrible'></span><span ";if(M>=2){K+="class='selected'"}K+=" lang='Poor'></span><span ";if(M>=3){K+="class='selected'"}K+=" lang='Average'></span><span ";if(M>=4){K+="class='selected'"}K+=" lang='Good'></span><span ";if(M>=5){K+="class='selected'"}K+=" lang='Excellent'></span></div></div>"}}K+="</div>"}if(L.reviewDescription){var Q=L.reviewDescription;if(Q.length>120){Q=Q.substring(0,120)+" ..."}K+="<p>"+Q+"</p>"}if(L.userName){K+="<p>Posted by: ";if(S.agentLink&&L.agentLink){var B=S.agentLink+L.agentLink;K+="<a href="+B+">"}K+=L.userName;if(L.agentLink&&S.agentLink){K+="</a>"}if(L.userRelation){K+=", "+L.userRelation}K+="</p>"}}}}K+="</div>";K+="<div class='rateReview'>";if(O.overallRatingByUser){K+="<div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+O.codeDesc+", "+O.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+O.overallRatingByUser+"Rating''></span></div></div>"}else{K+="</div>"}E.html(K);document.getElementById(S.parentDiv).style.display="";if(A&&O.categoryRatingMap&&S.modelAreaDivId){var C=$("#"+S.modelAreaDivId);if(C){var N="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";N+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";N+=generateCategoryRating(O.categoryRatingMap);N+="<div class='clr'></div></div></div>";C.html(N)}}}else{var K="<div class='noRatingReview'><div class='noReviewMsg'>Currently we don't have any rating &amp; reviews of this locality.</div>";K+="<h4>Be the First to Rate &amp; Review this Locality</h4>";K+="<div class='noReviewTextMsg'><textarea cols='' id='noReviewTextMsg' rows='' onkeypress='javascript:showPostReviewFormPrePopulated(this.value);'>By Sharing your review, you are helping property seekers ";K+="make better choice and live in a better locality</textarea></div><a href='javascript:void(0);' onclick='showPostReviewGrayBox();' class='btnRateReview'>Rate &amp; Review This Locality</a></div>";E.html(K)}}}}function ratingBoxResponseAdviceSummery(N,R){var E=$("#"+R.parentDiv);if(E&&N){if(N.errorMsg&&N.errorMsg!=""){E.html(N.errorMsg)}else{if(N.avgRating||(N.reviewCount&&N.reviewCount>0)){var J="<div class='radingRow'>";if(N.avgRating){J+="<div class='bigStart'>"+N.avgRating+"</div><div class='bigStartRating'>";J+="<div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><h3>Locality Rating <span itemprop='ratingValue'><strong>"+N.avgRating+"</strong></span> Out of 5";J+="</h3></div>"}if(N.topViewMap){J+="<div class='topRateCont'><h4>Top Rated Categories :</h4><ul class='leftColumn'>";var D=1;var A=false;for(var G in N.topViewMap){if(N.topViewMap[G]){var L=parseInt(N.topViewMap[G]);if(L>0){if(D<=4){J+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";J+="<span class='selected' lang='Terrible'></span><span ";if(L>=2){J+="class='selected'"}J+=" lang='Poor'></span><span ";if(L>=3){J+="class='selected'"}J+=" lang='Average'></span><span ";if(L>=4){J+="class='selected'"}J+=" lang='Good'></span><span ";if(L>=5){J+="class='selected'"}J+=" lang='Excellent'></span></div></div><div class='clr'></div></li>"}else{if(D>4){A=true;break}}if(D==2){J+="</ul><ul class='rightColumn'>"}D++}}}J+="</ul><div class='clr'></div>";if(A){J+="<div class='rateMore' id='moreRated'><a href='javascript:void(0);' onclick=\"showModelWindow('ratingModelBox', 'moreRated');\">More</a></div>"}J+="</div></div>"}J+="<div class='clr'></div></div>";var H=2;if(N.avgRating){H=1;if(N.recommendedFor){var Q=N.recommendedFor;var I=0;for(var F in Q){if(I>=3){break}if(F!=0){J+=" | "}else{J+="<p class='recomendFont'>Locality Recommended for: <span class='linksSec'>"}var T=Q[F];J+="<strong>"+T+"</strong>";I++}J+="</span></p>"}}else{if(R.boxLbl){$("#"+R.boxLbl).html("Review")}}if(N.lastReviewResultList){J+="<h4 style='padding: 2px 0 8px; font-size:12px;'>Latest ";if(H==1){J+="Review"}else{J+="Reviews"}J+=" of Locality</h4>";for(var O in N.lastReviewResultList){if(O<H){var K=N.lastReviewResultList[O];if(K.reviewTitle){var S=K.reviewTitle;if(S.length>40){S=S.substring(0,40)+" ..."}J+="<div class='latestReview'>\""+S+'"';if(K.overAllRating){J+="<div class='starRate'><div class='ratedstars'>";var L=parseInt(K.overAllRating);if(L>0){J+="<span class='selected' lang='Terrible'></span><span ";if(L>=2){J+="class='selected'"}J+=" lang='Poor'></span><span ";if(L>=3){J+="class='selected'"}J+=" lang='Average'></span><span ";if(L>=4){J+="class='selected'"}J+=" lang='Good'></span><span ";if(L>=5){J+="class='selected'"}J+=" lang='Excellent'></span></div></div>"}}J+="</div>"}if(K.reviewDescription){var P=K.reviewDescription;if(P.length>120){P=P.substring(0,120)+" ..."}J+="<p>"+P+"</p>"}if(K.userName){J+="<p>Posted by: ";if(R.agentLink&&K.agentLink){var B=R.agentLink+K.agentLink;J+="<a href="+B+">"}J+=K.userName;if(K.agentLink&&R.agentLink){J+="</a>"}if(K.userRelation){J+=", "+K.userRelation}J+="</p>"}}}}J+="</div>";J+="<div class='rateReview'>";if(N.overallRatingByUser){J+="<div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+N.codeDesc+", "+N.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+N.overallRatingByUser+"Rating''></span></div></div>"}else{J+="<a href='javascript:void(0);' id='aviceRatingId' class='btnRateReview'>View All Ratings &amp; Reviews</a></div>"}E.html(J);document.getElementById(R.parentDiv).style.display="";if(A&&N.categoryRatingMap&&R.modelAreaDivId){var C=$("#"+R.modelAreaDivId);if(C){var M="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";M+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";M+=generateCategoryRating(N.categoryRatingMap);M+="<div class='clr'></div></div></div>";C.html(M)}}}else{var J="<div class='noRatingReview'><div class='noReviewMsg'>Currently we don't have any rating &amp; reviews of this locality.</div>";J+="<h4>Be the First to Rate &amp; Review this Locality</h4>";J+="<div class='noReviewTextMsg'><textarea cols='' id='noReviewTextMsg' rows='' onkeypress='javascript:showPostReviewFormPrePopulated(this.value);'>By Sharing your review, you are helping property seekers ";J+="make better choice and live in a better locality</textarea></div><a href='javascript:void(0);' id='aviceRatingId' class='btnRateReview'>View All Ratings &amp; Reviews</a></div>";E.html(J)}}}}function postReviewResponse(B,D){var C=$("#"+D.parentDiv);if(C&&B){var E=""+B.latestReviewPosterUser;if(E&&E!=""){writeRatingCookie("mbRatingUserRefNum",E,90)}var A="<b>"+B.errorMsg+"</b>";$("#"+D.parentDiv).html(A);$("#"+D.parentDiv).show()}}function countResponse(B,C){var A=document.getElementById(C.ratingParent);var D=document.getElementById(C.reviewParent);if(B){if(B.errorMsg&&B.errorMsg!=""){return }if(B.avgRating){$("#"+C.ratingLbl).html(B.avgRating+" Rating by "+B.ratedByUser+" user(s)")}else{$("#"+C.ratingLbl).html("Rate the Locality");A.click(function(){showPostReviewGrayBox()})}if(B.reviewCount&&B.reviewCount>0){$("#"+C.reviewLbl).html(B.reviewCount+" Reviews")}else{$("#"+C.reviewLbl).html("Review the Locality");D.click(function(){showPostReviewGrayBox()})}A.style.display="";D.style.display=""}}function myReviewLocalityResponse(C,D){var B=$("#"+D.showLocalityExpertDiv);if(C&&B){if(C.errorMsg&&C.errorMsg!=""){return }if(C.codeDesc){var A="<div>You have already posted a locality review for '"+C.codeDesc+"'</div>";A+="<div><a href='myLocalityReviews.html' target = '_blank'><strong>View Locality Review</strong></a></div>";$("#"+D.showLocalityExpertDiv).html(A);$("#"+D.showLocalityExpertDiv).show()}}}function getLeftPanelWidgetResponse(O,U){var D=$("#"+U.parentDiv);D.html("No data found.....");if(D&&O){var L="";if(O.errorMsg&&O.errorMsg!=""){D.html(O.errorMsg)}else{if(O.reviewCount){document.getElementById(U.mainDivIc).style.display="";var M=O.lastReviewResultList[0];L+='<p class="format"><strong>Latest Review of '+M.typeDescription+", "+O.cityDesc+"</strong> </p>";if(M.userName){L+="<p>Posted by: ";if(U.agentLink){var J=replaceAll(M.typeDescription," ","-");var A=replaceAll(O.cityDesc," ","-");var C=U.agentLink+J.replace(/ /g,"-")+"-in-"+A.replace(/ /g,"-");L+="<a href="+C+">";L+=O.latestReviewUserName;L+="</a>"}if(M.userType){L+=" ("+M.userType+")"}L+="</p>"}if(M.overAllRating){L+="<div class='overAll'><div class='ratingHead'>Overall Rating:</div>";L+="<div class='outOff'><strong>"+M.overAllRating+"</strong>/5</div>";L+="<div class='starRate'><div class='ratedstars'>";var N=parseInt(M.overAllRating);if(N>0){L+="<span class='selected' lang='Terrible'></span>";if(N>=2){L+="<span class='selected' lang='Poor'></span>"}if(N>=3){L+="<span class='selected' lang='Average'></span>"}if(N>=4){L+="<span class='selected' lang='Good'></span>"}if(N>=5){L+="<span class='selected' lang='Excellent'></span>"}L=fillRating(N,L);var I=0;for(var P in M.categoryRatingMap){I++;break}if(I>0){L+="</div></div><div class='rateMore' id='moreRated'><a href='javascript:void(0);' class='overAllMoreRated' onclick=\"showModelWindow('ratingModelBox' , 'moreRated');\">More</a></div></div>"}else{L+="</div></div></div>"}}}if(M.recommendedFor){var S=M.recommendedFor;var T="";var E=1;for(var F in S){if(E==1){L+="<div class='recommend'> <div class='recommendHead'>Recommends Locality For: </div> <div class='recommendFor'>"}if(E<=3){var W=S[F];T+=W+(E<3&&F<S.length-1?"<b>|</b>":"")}E=E+1}L+=T;L+="   </div></div>"}if(M.reviewTitle){var V=M.reviewTitle;if(V.length>60){V=V.substring(0,60)+" ..."}L+="<p class='red format'>"+V+"</p>"}if(M.reviewDescription){var R=M.reviewDescription;if(R.length>100){var Q=R;var B=R.substring(0,200)+" ...";L+="<div class='reviewDetailCont'><div class='reviewDetail'>";var G="<span id='"+M.reviewId+"_less'>"+B;G+="<a class='moreReview' id='moreReview"+M.reviewId+"' href='javascript:void(0);' onclick=\"showHide('"+M.reviewId+"_more', '"+M.reviewId+"_less');\">  More</a>";G+="</span>";L+=G+"</div>";var H="<span id='"+M.reviewId+"_more' style='display:none;'>"+Q;H+="<a class='moreReview' id='lessReview"+M.reviewId+"' href='javascript:void(0);' onclick=\"showHide('"+M.reviewId+"_less', '"+M.reviewId+"_more');\">  Less</a>";H+="</span></div>";L+=H}else{L+="<div class='reviewDetailCont'><div class='reviewDetail'>"+R+"</div></div>"}}L+="<p class='review'>";L+="<a href='javascript:void(0)' id='locExpViewAll' onclick='gbShow()'>";L+="<strong>  View All Locality Reviews</strong>";L+="</a></p>";if(M.categoryRatingMap){var K="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";K+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";K+=generateCategoryRating(M.categoryRatingMap);K+="<div class='clr'></div></div></div>";L+=K}D.html(L)}}}}function replaceAll(A,B,C){A=A.replace(/(\r\n|\n|\r)/gm,"");return A.replace(new RegExp(B,"g"),C)}function generateParamRating(F){var D="<div class='startRating'>";var A=true;for(var B in F){if(F[B]){var E=F[B];D+="<div class='topratedCatogaries ";if(!A){D+="colume2"}D+="'><h5>"+B+"</h5><ul>";for(var G in E){if(E[G]){var C=parseInt(E[G]);if(C>0){D+=" <li><div class='rateText'>"+G+":</div><div class='starRate'><div class='ratedstars'>";D+="<span class='selected' style='border:none;' lang='Terrible'></span><span ";if(C>=2){D+="class='selected'"}D+=" style='border:none;' lang='Poor'></span><span ";if(C>=3){D+="class='selected'"}D+=" style='border:none;' lang='Average'></span><span ";if(C>=4){D+="class='selected'"}D+=" style='border:none;' lang='Good'></span><span ";if(C>=5){D+="class='selected'"}D+=" style='border:none;' lang='Excellent'></span></div></div><div class='clr'></div></li>"}}}D+="</ul></div>";A=false}}return D}function generateCompareProjectParamRating(G){var F="<div class='ratingBox'><ul>";for(var C in G){if(G[C]){var I=G[C];F+="<li><div class='ratingRow'><div class='ratingLabel'>"+C+"</div><div class='ratingStar'>";var E="";var H=0;var A=0;for(var B in I){if(I[B]){var J=parseInt(I[B]);H+=parseFloat(I[B]);A++;E+="<div class='ratingRow'><div class='ratingLabel'>"+B+"</div><div class='ratingStar'>";if(J>0){E+="<span class='compareStar rated' />";if(J>=2){E+="<span class='compareStar rated' />"}else{E+="<span class='compareStar' />"}if(J>=3){E+="<span class='compareStar rated' />"}else{E+="<span class='compareStar' />"}if(J>=4){E+="<span class='compareStar rated' />"}else{E+="<span class='compareStar' />"}if(J>=5){E+="<span class='compareStar rated' />"}else{E+="<span class='compareStar' />"}}else{E+="<span class='compareStar' /><span class='compareStar' /><span class='compareStar' /><span class='compareStar' /><span class='compareStar' />"}E+="</div></div>"}}var D=parseInt(H/A);if(H>0&&A>0&&D>0){F+="<span class='compareStar rated' />";if(D>=2){F+="<span class='compareStar rated' />"}else{F+="<span class='compareStar' />"}if(D>=3){F+="<span class='compareStar rated' />"}else{F+="<span class='compareStar' />"}if(D>=4){F+="<span class='compareStar rated' />"}else{F+="<span class='compareStar' />"}if(D>=5){F+="<span class='compareStar rated' />"}else{F+="<span class='compareStar' />"}}else{F+="<span class='compareStar' /><span class='compareStar' /><span class='compareStar' /><span class='compareStar' /><span class='compareStar' />"}F+="</div></div><div class='ratingMoreBox'>";F+=E;F+="</div></li>"}}F+="</ul></div>";return F}function generateProjParamRatingForLocality(G){var F="";var L=0;var I=0;var M=0;for(var D in G){if(G[D]){var K=G[D];var J=0;var H=0;for(var C in K){H=H+1;if(K[C]){var N=parseInt(K[C]);J=J+N}}if(D=="Commuting"){L=parseInt(J/(H))}if(D=="Environment"){I=parseInt(J/(H))}if(D=="Places of Interest"){M=parseInt(J/(H))}}}var B=showRatingOfDiffCategory(I);var A=showRatingOfDiffCategory(L);var E=showRatingOfDiffCategory(M);F+="<div class='goodAmen'><div class='sRating'>";F+=B+"</div><div class='label'>Great Environment</div><div class='popHolder'>";F+="<div class='popInfo'><span></span><div class='popHead'>Great Environment</div><div class='popLocal'>Based on the amenities provided in this project</div></div></div></div>";F+="<div class='goodAmen goodLoc'><div class='sRating'>"+A+"</div>";F+="<div class='label'>Great Commuting</div><div class='popHolder'><div class='popInfo'><span></span><div class='popHead'>Great Commuting</div>";F+="<div class='popLocal'>Based on the facilities available in the locality of the Project</div></div></div></div>";F+="<div class='goodAmen avgConnect'><div class='sRating'>"+E+"</div><div class='label'>Average Facilities Nearby</div>";F+="<div class='popHolder'><div class='popInfo'><span></span><div class='popHead'>Facilities Nearby</div>";F+="<div class='popLocal'>Based on how well the project is connected to the major </div></div></div></div>";return F}function generateProjParamRating(E){var C="<div class='rateBlockR'>";for(var A in E){if(E[A]){var D=E[A];C+="<div class='rateBlocks "+A.replace(/ /g,"").toLowerCase()+"'><div class='rateHeading'>"+A+"</div><div class='rateRate'><ul>";for(var F in D){if(D[F]){var B=parseInt(D[F]);C+="<li><div class='rLabel'>"+F+"</div><div class='rStar'>";if(B>0){C+="<span class='plus1' />";if(B>=2){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=3){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=4){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=5){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}}else{C+="<span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' />"}C+="</div></li>"}}C+="</ul><div class='clearAll'></div></div></div>"}}C+="</div>";return C}function generateProjParamRating1(E){var C="<div class='rateBlockR'>";for(var A in E){if(E[A]){var D=E[A];C+="<div class='rateBlocks "+A.replace(/ /g,"").toLowerCase()+"'><div class='rateHeading'><div class='hLabel'>"+A+"</div> <div id='"+A+"_id' class='rStar'>";C+=categRate(E,A);C+="</div> <div class='clearAll'></div></div><div class='rateRate'><ul>";for(var F in D){if(D[F]){var B=parseInt(D[F]);C+="<li><div class='rLabel'>"+F+"</div><div class='rStar'>";if(B>0){C+="<span class='plus1' />";if(B>=2){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=3){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=4){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}if(B>=5){C+="<span class='plus1' />"}else{C+="<span class='gray1' />"}}else{C+="<span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' />"}C+="</div></li>"}}C+="</ul><div class='clearAll'></div></div></div>"}}C+="</div>";return C}function categRate(E,B){var D="";var I=0;for(var C in E){if(E[C]){var H=E[C];var G=0;var F=0;for(var A in H){F=F+1;if(H[A]){var J=parseInt(H[A]);G=G+J}}if(C==B){I=parseInt(G/(F))}}}D=showRatingOfDiffCategory1(I);return D}function showRatingOfDiffCategory1(A){var B="";if(A>0){B+="<span class='plus1' ></span>";if(A>=2){B+="<span class='plus1' ></span>"}else{B+="<span class='gray1'></span>"}if(A>=3){B+="<span class='plus1' ></span>"}else{B+="<span class='gray1' ></span>"}if(A>=4){B+="<span class='plus1' ></span>"}else{B+="<span class='gray1' ></span>"}if(A>=5){B+="<span class='plus1' ></span>"}else{B+="<span class='gray1' ></span>"}}else{B+="<span class='gray1' ></span><span class='gray1' ></span><span class='gray1' ></span><span class='gray1' ></span><span class='gray1' ></span>"}return B}function showRatingOfDiffCategory(A){var B="";if(A>0){B+="<span class='pRate' />";if(A>=2){B+="<span class='pRate' />"}else{B+="<span class='nRate' />"}if(A>=3){B+="<span class='pRate' />"}else{B+="<span class='nRate' />"}if(A>=4){B+="<span class='pRate' />"}else{B+="<span class='nRate' />"}if(A>=5){B+="<span class='pRate' />"}else{B+="<span class='nRate' />"}}else{B+="<span class='nRate' /><span class='nRate' /><span class='nRate' /><span class='nRate' /><span class='nRate' />"}return B}function propDetailRatingAndReviewResponse(K,I){var C="";var B=$("#"+I.resultDiv);if(B){var J="";if(I.extTest!=""||I.extTest!=null){J="<div class='propertyDetail'><h2 style='margin-bottom: 0px; padding-bottom: 0px;'>Rating &amp; Review of "+I.localityName+", "+I.cityName+"</h2>";J+="<div style='margin-bottom:20px;'>"+I.extTest+"</div>"}else{J="<div class='propertyDetail'><h2>Rating &amp; Review of "+I.localityName+", "+I.cityName+"</h2>"}if(K&&(K.avgRating||(K.reviewCount&&K.reviewCount>0))){if(K.avgRating){J+="<div class='localityRatingCont'>";J+="<div class='radingRow'><div class='bigStart'>"+K.avgRating+"</div><div class='bigStartRating'>";J+="<p>Rating <strong>"+K.avgRating+"</strong>/5 from "+K.ratedByUser+" users ";if(K.reviewCount&&K.reviewCount>0){J+="| &nbsp;<a class='gotoreviews' href='"+I.viewAllReviewUrl+"' >"+K.reviewCount+" Reviews</a></p> "}else{J+="</p>"}if(K.categoryRatingMap){J+=generateParamRating(K.categoryRatingMap)}J+="<div class='clr'></div></div><div class='clr'></div></div>";if(K.recommendedFor&&K.recommendedFor!=""&&K.recommendedFor!=undefined){var H=K.recommendedFor;if(H){J+="<div class='recommendLocality'><div class='recommendLeft'>Locality Recommended For:</div><div class='recommendCenter'>";for(var L in H){var D=H[L];var G=imgPath+"localityIcon"+D+".png";J+="<span><img alt='' src='"+G+"'> "+D+"</span>"}J+="</div></div>"}}}if(K.lastReviewResultList){J+="<div class='reviewsSearchList'><ul>";for(var F in K.lastReviewResultList){if(F<2){var E=K.lastReviewResultList[F];J+=prepareReviewHtml(E,I);C+=E.reviewUbiIdUnencrypted+","}}J+="</ul></div>"}J+="<div class='clickAction'>";if(K.overallRatingByUser){J+="<div class='yourRating' onmouseover='showRatingToolTip(this);' onmouseout='showRatingToolTip(this);'><div class='ratingTooltip'>Please login to My Magicbox to update your review for "+K.codeDesc+", "+K.cityDesc+"<b class='tooltipArrow'></b></div><div class='yourRatingText'>Your Rating Of This Locality</div><span class='"+K.overallRatingByUser+"Rating''></span></div>"}else{J+="<a class='myBrightBtn' href='javascript:void(0);' onclick='javascript:showPostReviewGrayBox();'>Rate &amp; Review This Locality</a>"}J+="<a class='grayActionButton' href='"+I.viewAllReviewUrl+"' >View All Posted Reviews</a></div><div class='clr'></div>";J+="</div>";J+="</div>"}else{J+="<div style='padding:0px 0px 10px 0px; font-size:12px;'>There are no locality reviews posted for "+I.localityName+".Be the first one to post a review for this locality.</div>";J+="<div class='clickAction'>";J+="<a class='myBrightBtn' href='javascript:void(0);' onclick='javascript:showPostReviewGrayBox();'>Rate &amp; Review This Locality</a>";J+="</div><div class='clr'></div>";J+="</div>"}document.getElementById(I.resultDiv).style.display="";B.html(J);if(C){var A=C.length;C=C.substring(0,A-1);fillReviewdUserBadges(C,"2","reviewedUserBadges")}}}function ratingAndReviewResponseLocality(B,C){var D="";var E=$("#"+C.resultDiv);if(E&&B&&(B.avgRating||(B.reviewCount&&B.reviewCount>0))){var A="";if(B&&(B.avgRating||(B.reviewCount&&B.reviewCount>0))){if(B.avgRating){A+="<div class='eveRating'><div class='eveStar'><div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><span class='rateVal' itemprop='ratingValue'>"+B.avgRating+"</span><span class='rateLabel'>on 5</span> </div> </div>";A+="<div class='rateHead'>Overall Rating <br />Based on "+B.ratedByUser+"  ratings </div>";A+="<div class='popHolder'><div class='popInfo'><span></span><div class='popHead'>Overall Rating</div>";A+="<div class='popLocal'>Based on the amenities, locality and connectivity rating of the Project</div></div></div></div>";if(B.categoryRatingMap){A+=generateProjParamRatingForLocality(B.categoryRatingMap)}}}else{A+="<div style='padding:0px 0px 10px 0px; font-size:12px;'>There are no locality reviews posted for "+C.localityName+".Be the first one to post a review for this locality.</div>";A+="<div class='clearAll'></div>"}document.getElementById(C.resultDiv).style.display="";E.html(A)}}function recommendationLocality(C,D){var F="";var G=$("#"+D.resultDiv);if(G&&C&&(C.avgRating||(C.reviewCount&&C.reviewCount>0))){var B="";if(C&&(C.avgRating||(C.reviewCount&&C.reviewCount>0))){if(C.avgRating){if(C.recommendedFor&&C.recommendedFor!=""&&C.recommendedFor!=undefined){var E=C.recommendedFor;if(E){var A=E.toString();B+=A.replace(/,/g,", ")}$("#recomContainer").show()}}}document.getElementById(D.resultDiv).style.display="";if(D.extTest&&D.extTest!=""&&D.extTest!=undefined&&D.extTest=="localityRecomForTop"&&B.length>1){document.getElementById(D.extTest).style.display="block"}G.html(B)}}function projDetailRatingAndReviewResponseLocality(I,G){var B="";var A=$("#"+G.resultDiv);var H="";if(A&&I&&(I.avgRating||(I.reviewCount&&I.reviewCount>0))){H="<div class='ratingReviewHeading'>Rating &amp; Reviews of "+G.localityName+", "+G.cityName+"</div>";if(I&&(I.avgRating||(I.reviewCount&&I.reviewCount>0))){if(I.avgRating){if(I.recommendedFor&&I.recommendedFor!=""&&I.recommendedFor!=undefined){var F=I.recommendedFor;if(F){H+="<div class='recomLabel'><span>This Locality is recommended for</span>";for(var J in F){var C=F[J];H+="<span><span class='icon"+F[J].replace(/ /g,"").toLowerCase()+"'></span>"+C+"</span>"}H+="</div>"}}H+="<div class='revComBlock'><div class='rateBlock'>";H+="<div class='rateBlockL'>";H+="<div class='eveRating'><div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><span itemprop='ratingValue'>"+I.avgRating+"</span><span>on 5</span></div></div><div class='eveRatingLabel'>Locality Rating</div>";H+="<div class='eveRatingRef'>Based on "+I.ratedByUser+" ratings</div>";H+="</div>";if(I.categoryRatingMap){H+=generateProjParamRating1(I.categoryRatingMap)}H+="<div class='clearAll'></div></div>"}if(I.lastReviewResultList){H+="<div class='reviewBlock'>";for(var E in I.lastReviewResultList){if(E<1){var D=I.lastReviewResultList[E];H+=prepareProjReviewHtmlLocality(D,G,E);B+=D.reviewUbiIdUnencrypted+","}}H+="<div class='clearAll'></div><div id='moreReviewBtn' class='readAll'><a href='javascript:void(0);' onclick=\"showHide('moreReviewBox', 'moreReviewBtn')\">View More Reviews</a></div></div>";H+="<div class='reviewBlock' id='moreReviewBox' style='display:none'>";for(var E in I.lastReviewResultList){if(E>0){var D=I.lastReviewResultList[E];H+=prepareProjReviewHtmlLocality(D,G,E);B+=D.reviewUbiIdUnencrypted+","}}H+="<div class='clearAll'></div></div>"}}else{H+="<div style='padding:0px 0px 10px 0px; font-size:12px;'>There are no locality reviews posted for "+G.localityName+".Be the first one to post a review for this locality.</div>";H+="<div class='clearAll'></div>"}document.getElementById(G.resultDiv).style.display="";A.html(H)}else{$("#locNavRatinngReview").hide();$("#rating_review_tab").hide()}}function projDetailRatingAndReviewResponse(I,G){var B="";var A=$("#"+G.resultDiv);if(A&&I&&(I.avgRating||(I.reviewCount&&I.reviewCount>0))){var H="";if(G.extTest!=""||G.extTest!=null){H="<div class='subHead'>Rating &amp; Review of "+G.localityName+", "+G.cityName+"</div>"}else{H="<div class='subHead'>Rating &amp; Review of "+G.localityName+", "+G.cityName+"</div>"}if(I&&(I.avgRating||(I.reviewCount&&I.reviewCount>0))){if(I.avgRating){if(I.recommendedFor&&I.recommendedFor!=""&&I.recommendedFor!=undefined){var F=I.recommendedFor;if(F){H+="<div class='recomLabel'><span>This Locality is recommended for</span>";for(var J in F){var C=F[J];H+="<span><span class='icon"+F[J].replace(/ /g,"").toLowerCase()+"'></span>"+C+"</span>"}H+="</div>"}}H+="<div class='revComBlock'><div class='rateBlock'>";H+="<div class='rateBlockL'>";H+="<div class='eveRating'> <div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><span itemprop='ratingValue' >"+I.avgRating+"</span><span>on 5</span></div></div><div class='eveRatingLabel'>Locality Rating</div>";H+="<div class='eveRatingRef'>Based on "+I.ratedByUser+" ratings</div>";H+="</div>";if(I.categoryRatingMap){H+=generateProjParamRating(I.categoryRatingMap)}H+="<div class='clearAll'></div></div>"}if(I.lastReviewResultList){H+="<div class='reviewBlock'>";for(var E in I.lastReviewResultList){if(E<1){var D=I.lastReviewResultList[E];H+=prepareProjReviewHtml(D,G);B+=D.reviewUbiIdUnencrypted+","}}H+="<div class='clearAll'></div><div class='readAll'><a href='"+G.viewAllReviewUrl+"' target='_blank'>Read all "+(I.reviewCount)+" Reviews</a></div></div>"}}else{H+="<div style='padding:0px 0px 10px 0px; font-size:12px;'>There are no locality reviews posted for "+G.localityName+".Be the first one to post a review for this locality.</div>";H+="<div class='clearAll'></div>"}document.getElementById(G.resultDiv).style.display="";A.html(H)}}function newDetailsRatingAndReviewWidget(I,G){var B="";var A=$("#"+G.resultDiv);if(A&&I&&(I.avgRating||(I.reviewCount&&I.reviewCount>0))){var H="";if(I.avgRating){if(I.recommendedFor&&I.recommendedFor!=""&&I.recommendedFor!=undefined){var F=I.recommendedFor;if(F){H+="<div class='recomLabel'><span>This Locality is recommended for</span>";for(var J in F){var C=F[J];H+="<span><span class='icon"+F[J].replace(/ /g,"").toLowerCase()+"'></span>"+C+"</span>"}H+="</div>"}}H+="<div class='revComBlock'><div class='rateBlock'>";H+="<div class='rateBlockL'>";H+="<div class='eveRating'> <div itemprop='aggregateRating' itemscope itemtype='http://schema.org/AggregateRating'><span itemprop='ratingValue' >"+I.avgRating+"</span><span>on 5</span></div></div><div class='eveRatingLabel'>Locality Rating</div>";H+="<div class='eveRatingRef'>Based on "+I.ratedByUser+" ratings</div>";H+="</div>";if(I.categoryRatingMap){H+=generateProjParamRating(I.categoryRatingMap)}H+="<div class='clearAll'></div></div>"}if(I.lastReviewResultList){H+="<div class='reviewBlock'>";for(var E in I.lastReviewResultList){if(E<1){var D=I.lastReviewResultList[E];H+=newPrepareProjReviewHtml(D,G);B+=D.reviewUbiIdUnencrypted+","}}H+="<div class='clearAll'></div><div class='readAll'><a href='"+G.viewAllReviewUrl+"' target='_blank'>Read all "+(I.reviewCount)+" Reviews</a></div></div>"}document.getElementById(G.resultDiv).style.display="";A.html(H)}else{$("#ratingId").hide();$("#poionMapId").click()}}function compareProjectsRatingAndReviewWidget(D,F){var G="";var H=$("#"+F.resultDiv);var E=false;if(H&&D&&(D.avgRating||(D.reviewCount&&D.reviewCount>0))){var C="";C="<div class='innerCol colBotBorder'><div class='compareLocalityRating'><div class='localityRatingCont'><div class='compareRank'><div class='rankData'><div class='rankHeading'>Ranked 11</div><div class='rankText'>out of 121 projects in "+F.localityName+", "+F.cityName+"</div></div></div>";if(D&&(D.avgRating||(D.reviewCount&&D.reviewCount>0))){if(D.avgRating){C+="<div class='compareRating'><div class='raingData'><div class='bigRating'><span class='compareBigStar'><span class='ratedRating'>"+D.avgRating+"</span><span class='ratingOutOf'>on 5</span></span><span class='basedReview'>based on "+D.ratedByUser+" reviews</span></div>";if(D.categoryRatingMap){C+=generateCompareProjectParamRating(D.categoryRatingMap)}C+="</div></div>";if(JSON.stringify(D.categoryRatingMap)!="{}"){C+="<div class='seeDetails'><a onclick='showDetailedRating();' href='javascript://'>See Detailed Ratings <span class='arrowDown'></span></a></div>"}C+="</div></div></div>"}if($(".ratingMoreBox").size()!=0&&$(".ratingMoreBox")[0].style.display=="block"){E=true}C+="<div class='innerCol colBotBorder'><div class='compareLocalityReview'>";if(D.lastReviewResultList){C+="<div class='localityReviewsData'><div class='localityReviewsHeading'>"+D.reviewCount+" Reviews</div>";for(var B in D.lastReviewResultList){if(B<1){var A=D.lastReviewResultList[B];C+=prepareCompareProjectReviewHtml(A,F);G+=A.reviewUbiIdUnencrypted+","}}C+="<div class='localityReviewsLink'><a href='"+F.viewAllReviewUrl+"' target='_blank'>View "+D.reviewCount+" Reviews</a></div></div>"}else{C+="<span class='mdash'>&mdash;</span>"}C+="</div></div>"}document.getElementById(F.resultDiv).style.display="";H.html(C);if(E){showDetailedRating()}}}function localityCompare1RatingAndReviewWidget(B,D){var E="";var F=$("#"+D.resultDiv);var C=false;if(F){var A="";if(B&&(B.avgRating||(B.reviewCount&&B.reviewCount>0))&&B.avgRating){A+="<div class='compareRating'><div class='raingData'><div class='bigRating'><span class='compareBigStar'><span class='ratedRating'>"+B.avgRating+"</span><span class='ratingOutOf'>on 5</span></span><span class='basedReview'>based on "+B.ratedByUser+" reviews</span></div>";if(B.categoryRatingMap){A+=generateCompareProjectParamRating(B.categoryRatingMap)}A+="</div></div>";if(JSON.stringify(B.categoryRatingMap)!="{}"){A+="<div class='seeDetails'><a onclick='showDetailedRating();' href='javascript://'>See Detailed Ratings <span class='arrowDown'></span></a></div>"}}else{A+="<div class='localityReviewsData'><div class='localityReviewsHeading'><span class='mdash'>N/A</span></div></div>"}if($(".ratingMoreBox").size()!=0&&$(".ratingMoreBox")[0].style.display=="block"){C=true}document.getElementById(D.resultDiv).style.display="";F.html(A);if(C){showDetailedRating()}}}function localityCompare2RatingAndReviewWidget(D,E){var F="";var G=$("#"+E.resultDiv);if(G){var C="";C+="<div class='innerCol colBotBorder'><div class='compareLocalityReview'>";if(D&&(D.avgRating||(D.reviewCount&&D.reviewCount>0))&&D.lastReviewResultList){C+="<div class='localityReviewsData'><div class='localityReviewsHeading'>"+D.reviewCount+" Reviews</div>";for(var B in D.lastReviewResultList){if(B<1){var A=D.lastReviewResultList[B];C+=prepareCompareProjectReviewHtml(A,E);F+=A.reviewUbiIdUnencrypted+","}}C+="<div class='localityReviewsLink'><a href='"+E.viewAllReviewUrl+"' target='_blank'>View "+D.reviewCount+" Reviews</a></div></div>"}else{C+="<div class='localityReviewsData'><span class='mdash'>N/A</span></div>"}C+="</div></div>";document.getElementById(E.resultDiv).style.display="";G.html(C)}}function myMagicboxResponse(K,H){var A=$("#"+H.latestReviewDiv);if(A&&K){if(K.errorMsg&&K.errorMsg!=""){A.html(K.errorMsg)}else{if(K.lastReviewResultList){for(var I in K.lastReviewResultList){if(I<1){var F=K.lastReviewResultList[I];var D=prepareViewAllReviewUrl(K.codeDesc,K.cityDesc,H.reviewContextRoot,"localityReviews");var J="<div class='mmbrightWrapBdr marginbotm10'><div class='mmbSmlHeading'>Locality Reviews</div><div class='mmb1ContentBox mmblocalityReview'>";if(K.codeDesc){J+="<p><strong>"+K.codeDesc+", "+K.cityDesc+"</strong></p>"}J+="<div class='mmbpostedLRBox'>";if(F.userName){J+="<p><b>Posted by: </b>";if(F.agentLink&&H.agentLink){J+="<a href="+H.agentLink+">";J+="<a class='link' href="+H.agentLink+">"}J+="<b>"+F.userName+" ("+F.userType+")</b>";if(F.agentLink&&H.agentLink){J+="</a>"}J+="</p>"}if(F.overAllRating){J+="<div class='overAll'><div class='ratingHead'>Overall Rating:</div><div class='starRate'><div class='ratedstars'>";var P=parseInt(F.overAllRating);if(P>0){J+="<span class='selected' lang='Terrible'></span><span ";if(P>=2){J+="class='selected'"}J+=" lang='Poor'></span><span ";if(P>=3){J+="class='selected'"}J+=" lang='Average'></span><span ";if(P>=4){J+="class='selected'"}J+=" lang='Good'></span><span ";if(P>=5){J+="class='selected'"}J+=" lang='Excellent'></span></div></div><div class='outOff'>"+P+"/5</div>";if(F.categoryRatingMap&&Object.size(F.categoryRatingMap)>0&&H.modelAreaDivId){J+="<div class='rateMore agentReviewClass' id='moreRated'><a href='javascript:void(0);' class='overAllMoreRated' onclick=\"showModelWindow('ratingModelBox' , 'moreRated');\">More</a></div>"}J+="</div>"}}if(F.recommendedFor){var G=F.recommendedFor;var E=true;J+="<div class='recommend'> <div class='recommendHead'>Recommends Locality For: </div> <div class='recommendFor'>";for(var M in G){if(!E){J+="<b>|</b>"}var C=G[M];J+=C;E=false}J+=" </div></div>"}if(F.reviewTitle){var O=F.reviewTitle;if(O.length>60){O=O.substring(0,60)+" ..."}J+="<p class='red format'>"+O+"</p>"}if(F.reviewDescription){var L=F.reviewDescription;if(L.length>120){L=L.substring(0,120)+" ..."}J+="<p>"+L+"</p>"}J+="</div>";J+="<div class='clr'><span class='fleft'><a href='"+D+"'>View All</a></span>";J+="<span class='fright'><a href='javascript:void(0);' id='postReviewAnchor' onclick='javascript:showPostReviewForm();'>Post Another Review</a></span></div>";A.html(J);document.getElementById(H.latestReviewDiv).style.display="";if(F.categoryRatingMap&&Object.size(F.categoryRatingMap)>0&&H.modelAreaDivId){var N=$("#"+H.modelAreaDivId);if(N){var B="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";B+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";B+=generateUserParamRating(F.categoryRatingMap);B+="<div class='clr'></div></div></div>";N.html(B)}}}}}else{var J="<div class='mmbrightWrapBdr marginbotm10'><div class='mmbSmlHeading'>Locality Reviews</div><div class='mmb1ContentBox mmblocalityReview'>";J+="<div class='mmbpostLRContent'>";J+="<textarea class='mmbpostLRArea' name='descriptionTXT' id='locCommentTxtArea' onkeypress='javascript:showPostReviewFormPrePopulated(this.value);' onfocus=\"javascript:if(this.value=='Post Locality Review') this.value = '';\" onblur=\"javascript:if(this.value=='') this.value = 'Post Locality Review';\">Post Locality Review</textarea>";J+="</div>";J+="<div class='clr'><span class='fleft'><a href='javascript:void(0);' class='mmbtnLink' id='postReviewAnchor' onclick='javascript:showPostReviewForm();'>Post Now</a></span></div>";A.html(J)}}}}function agentDetailsResponse(J,G){var A=$("#"+G.latestReviewDiv);if(A&&J){if(J.errorMsg&&J.errorMsg!=""){A.html(J.errorMsg)}else{if(J.lastReviewResultList){for(var H in J.lastReviewResultList){if(H<4){var E=J.lastReviewResultList[H];var I="<div class='mmbrightWrapBdr marginbotm10'><div class='mmbSmlHeading'>Locality Reviews</div><div class='mmb1ContentBox mmblocalityReview'>";if(J.codeDesc){I+="<p><strong>"+J.codeDesc+", "+J.cityDesc+"</strong></p>"}I+="<div class='mmbpostedLRBox'>";if(E.userName){I+="<p><b>Posted by: </b>";if(E.agentLink&&G.agentLink){I+="<a href="+G.agentLink+">";I+="<a class='link' href="+G.agentLink+">"}I+="<b>"+E.userName+" ("+E.userType+")</b>";if(E.agentLink&&G.agentLink){I+="</a>"}I+="</p>"}if(E.overAllRating){I+="<div class='overAll'><div class='ratingHead'>Overall Rating:</div><div class='starRate'><div class='ratedstars'>";var O=parseInt(E.overAllRating);if(O>0){I+="<span class='selected' lang='Terrible'></span><span ";if(O>=2){I+="class='selected'"}I+=" lang='Poor'></span><span ";if(O>=3){I+="class='selected'"}I+=" lang='Average'></span><span ";if(O>=4){I+="class='selected'"}I+=" lang='Good'></span><span ";if(O>=5){I+="class='selected'"}I+=" lang='Excellent'></span></div></div><div class='outOff'>"+O+"/5</div>";if(E.categoryRatingMap&&Object.size(E.categoryRatingMap)>0&&G.modelAreaDivId){I+="<div class='rateMore agentReviewClass' id='moreRated'><a href='javascript:void(0);' class='overAllMoreRated agentReviewClass' onclick=\"showModelWindow('ratingModelBox' , 'moreRated');\">More</a></div>"}I+="</div>"}}if(E.recommendedFor){var F=E.recommendedFor;var D=true;I+="<div class='recommend'> <div class='recommendHead'>Recommends Locality For: </div> <div class='recommendFor'>";for(var L in F){if(!D){I+="<b>|</b>"}var C=F[L];I+=C;D=false}I+=" </div></div>"}if(E.reviewTitle){var N=E.reviewTitle;if(N.length>60){N=N.substring(0,60)+" ..."}I+="<p class='red format'>"+N+"</p>"}if(E.reviewDescription){var K=E.reviewDescription;if(K.length>120){K=K.substring(0,120)+" ..."}I+="<p>"+K+"</p>"}I+="</div>";I+="<div class='clr'><span class='fleft'><a href='"+G.viewAllReviewUrl+"'>View All</a></span>";I+="<span class='fright'><a href='javascript:void(0);' id='postReviewAnchor' onclick='javascript:showPostReviewForm();'>Post Another Review</a></span></div>";A.html(I);document.getElementById(G.latestReviewDiv).style.display="";if(E.categoryRatingMap&&Object.size(E.categoryRatingMap)>0&&G.modelAreaDivId){var M=$("#"+G.modelAreaDivId);if(M){var B="<div id='ratingModelBox' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";B+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox');\"></div>";B+=generateUserParamRating(E.categoryRatingMap);B+="<div class='clr'></div></div></div>";M.html(B)}}}}}else{var I="<div class='mmbrightWrapBdr marginbotm10'><div class='mmbSmlHeading'>Locality Reviews</div><div class='mmb1ContentBox mmblocalityReview'>";I+="<div class='mmbpostLRContent'>";I+="<textarea class='mmbpostLRArea' name='descriptionTXT' id='locCommentTxtArea' onkeypress='javascript:showPostReviewFormPrePopulated(this.value);' onfocus=\"javascript:if(this.value=='Post Locality Review') this.value = '';\" onblur=\"javascript:if(this.value=='') this.value = 'Post Locality Review';\">Post Locality Review</textarea>";I+="</div>";I+="<div class='clr'><span class='fleft'><a href='javascript:void(0);' class='mmbtnLink' id='postReviewAnchor' onclick='javascript:showPostReviewForm();'>Post Now</a></span></div>";A.html(I)}}}}function prepareReviewHtml(K,D){var E="<li><div class='detailCont'>";if(K.overAllRating||K.reviewedOn){E+="<div class='overAll'>";var M=parseInt(K.overAllRating);if(M>0){E+="<div class='ratingHead'>Overall Rating:</div><div class='starRate'><div class='ratedstars'><span class='selected' lang='Terrible'></span><span ";if(M>=2){E+="class='selected'"}E+=" lang='Poor'></span><span ";if(M>=3){E+="class='selected'"}E+=" lang='Average'></span><span ";if(M>=4){E+="class='selected'"}E+=" lang='Good'></span><span ";if(M>=5){E+="class='selected'"}E+=" lang='Excellent'></span></div></div><div class='outOff'><strong>"+M+"</strong>/5</div>";if(K.categoryRatingMap&&Object.size(K.categoryRatingMap)>0&&D.modelAreaDivId){E+="<div class='rateMore' id='moreRated'><a href='javascript:void(0);' class='overAllMoreRated' onclick=\"showModelWindow('ratingModelBox"+K.reviewId+"', 'moreRated');\">More</a></div>"}}if(K.reviewedOn){E+="<div class='reviewed'>Reviewed on "+K.reviewedOn+"</div>"}E+="</div>"}if(K.reviewTitle){var I=K.reviewTitle;if(I.length>60){I=I.substring(0,60)+" ..."}E+="<h5>"+I+"</h5>"}if(K.reviewUbiIdUnencrypted){E+="<div class='reviewedUserBadges"+K.reviewUbiIdUnencrypted+"'></div>"}if(K.reviewDescription){var G=K.reviewDescription;if(G.length>200){var J=G;var C=G.substring(0,200)+"... ";E+="<div class='reviewDetailCont'><div class='reviewDetail'>";var L="<span id='"+K.reviewId+"_less'>"+C;L+="<a class='moreReview' id='moreReview"+K.reviewId+"' href='javascript:void(0);' onclick=\"showHide('"+K.reviewId+"_more', '"+K.reviewId+"_less');\">more</a>";L+="</span>";E+=L+"</div>";var F="<span id='"+K.reviewId+"_more' style='display:none;'>"+J;F+=" <a class='moreReview' id='lessReview"+K.reviewId+"' href='javascript:void(0);' onclick=\"showHide('"+K.reviewId+"_less', '"+K.reviewId+"_more');\">less</a>";F+="</span></div>";E+=F}else{E+="<div class='reviewDetailCont'><div class='reviewDetail'>"+G+"</div></div>"}}if(K.userName){E+="<p>Posted by: ";if(K.agentLink&&D.agentLink&&K.reviewUbiId){var B=D.agentLink+K.reviewUbiId;E+="<a href="+B+">"}E+=K.userName;if(K.agentLink&&D.agentLink){E+="</a>"}if(K.userRelation){E+=", "+K.userRelation}E+="</p>"}E+="</div><div class='clr'></div></li>";if(K.categoryRatingMap&&Object.size(K.categoryRatingMap)>0&&D.modelAreaDivId){var H=$("#"+D.modelAreaDivId);if(H){var A="<div id='ratingModelBox"+K.reviewId+"' class='localityTopRelatedPopupBox'><div class='localityTopRelatedPopupBoxInner'>";A+="<div class='topratedClose' onclick=\"closeModelWindow('ratingModelBox"+K.reviewId+"');\"></div>";A+=generateUserParamRating(K.categoryRatingMap,K.reviewId);A+="<div class='clr'></div></div></div>";H.append(A)}}return E}function prepareProjReviewHtmlLocality(P,G,J){var H="";if(P.userName||P.reviewedOn){H+="<div class='leftBlock'>";if(P.userName){H+="<div class='firstChar'>"+P.userName.substring(0,1).toUpperCase()+"</div>";H+="<div class='revName'>"+P.userName+"</div>";if(P.userRelation){H+="<div class='revType'>"+P.userRelation+"</div>"}}if(P.reviewedOn){var B=P.reviewedOn;var D=B.substring(0,B.indexOf("/"));var K=B.substring(B.indexOf("/")+1,B.lastIndexOf("/"));var M=B.substring(B.lastIndexOf("/")+1,B.length);var L=new Date(K+"/"+D+"/"+M);var A=["January","February","March","April","May","June","July","August","September","October","November","December"];var E=A[L.getMonth()]+" "+L.getDate()+", "+L.getFullYear();H+="<div class='revDate'>"+E+"</div>"}H+="</div>"}H+="<div class='rightBlock'><div class='revArrow'></div>";var F="";var O="";if(P.overAllRating){var Q=parseInt(P.overAllRating);F+="<div class='revRat'><div class='rStar'>";if(Q>0){O="Terrible Location";F+="<span class='plus1' />";if(Q>=2){O="Poor Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(Q>=3){O="Average Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(Q>=4){O="Good Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(Q>=5){O="Excellent Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}}else{O="Terrible Location";F+="<span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' />"}F+="</div><div class='clearAll'></div></div>"}H+="<div class='revHead'>"+O+"</div>";H+=F;if(P.reviewDescription){var I=P.reviewDescription;if(I.length>200){var N=I;var C=I.substring(0,200)+"... ";H+="<div class='revShort' id='revShort_less"+J+"'><table cellspacing='0' cellpadding='0' border='0'><tr><td>"+C+"</td></tr></table>";H+="<div class='moreCont'><a href='javascript:void(0);' class='moreReview' onclick=\"showHide('revShort_more"+J+"', 'revShort_less"+J+"')\">+ more</a></div></div>";H+="<div class='revShort' id='revShort_more"+J+"' style='display: none;'>"+N+"</div>"}else{H+="<div class='revShort'>"+I+"</div>"}}H+="</div><div class='clearAll'></div>";return H}function prepareProjReviewHtml(O,G){var H="";if(O.userName||O.reviewedOn){H+="<div class='leftBlock'>";if(O.userName){H+="<div class='firstChar'>"+O.userName.substring(0,1).toUpperCase()+"</div>";H+="<div class='revName'>"+O.userName+"</div>";if(O.userRelation){H+="<div class='revType'>"+O.userRelation+"</div>"}}if(O.reviewedOn){var B=O.reviewedOn;var D=B.substring(0,B.indexOf("/"));var J=B.substring(B.indexOf("/")+1,B.lastIndexOf("/"));var L=B.substring(B.lastIndexOf("/")+1,B.length);var K=new Date(J+"/"+D+"/"+L);var A=["January","February","March","April","May","June","July","August","September","October","November","December"];var E=A[K.getMonth()]+" "+K.getDate()+", "+K.getFullYear();H+="<div class='revDate'>"+E+"</div>"}H+="</div>"}H+="<div class='rightBlock'><div class='revArrow'></div>";var F="";var N="";if(O.overAllRating){var P=parseInt(O.overAllRating);F+="<div class='revRat'><div class='rStar'>";if(P>0){N="Terrible Location";F+="<span class='plus1' />";if(P>=2){N="Poor Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(P>=3){N="Average Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(P>=4){N="Good Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}if(P>=5){N="Excellent Location";F+="<span class='plus1' />"}else{F+="<span class='gray1' />"}}else{N="Terrible Location";F+="<span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' /><span class='gray1' />"}F+="</div><div class='clearAll'></div></div>"}H+="<div class='revHead'>"+N+"</div>";H+=F;if(O.reviewDescription){var I=O.reviewDescription;if(I.length>200){var M=I;var C=I.substring(0,200)+"... ";H+="<div class='revShort' id='revShort_less'><table cellspacing='0' cellpadding='0' border='0'><tr><td>"+C+"</td></tr></table>";H+="<div class='moreCont'><a href='javascript:void(0);' class='moreReview' onclick=\"showHide('revShort_more', 'revShort_less')\">+ more</a></div></div>";H+="<div class='revShort' id='revShort_more' style='display: none;'>"+M+"</div>"}else{H+="<div class='revShort'>"+I+"</div>"}}H+="</div><div class='clearAll'></div>";return H}function newPrepareProjReviewHtml(O,G){var H="";if(O.userName||O.reviewedOn){H+="<div class='leftBlock'>";if(O.userName){H+="<div class='firstChar'>"+O.userName.substring(0,1).toUpperCase()+"</div>";H+="<div class='revName'>"+O.userName+"</div>";if(O.userRelation){H+="<div class='revType'>"+O.userRelation+"</div>"}}if(O.reviewedOn){var B=O.reviewedOn;var D=B.substring(0,B.indexOf("/"));var J=B.substring(B.indexOf("/")+1,B.lastIndexOf("/"));var L=B.substring(B.lastIndexOf("/")+1,B.length);var K=new Date(J+"/"+D+"/"+L);var A=["January","February","March","April","May","June","July","August","September","October","November","December"];var E=A[K.getMonth()]+" "+K.getDate()+", "+K.getFullYear();H+="<div class='revDate'>"+E+"</div>"}H+="</div>"}H+="<div class='rightBlock'>";var F="";var N="";if(O.overAllRating){var P=parseInt(O.overAllRating);F+="<div class='revRat'><div class='rStar'>";if(P>0){F+=P+"<span class='plus1' />";N="Terrible Location";if(P>=2){N="Poor Location"}if(P>=3){N="Average Location"}if(P>=4){N="Good Location"}if(P>=5){N="Excellent Location"}}else{N="Terrible Location"}F+="</div></div>"}H+="<div class='revHead'>"+F+N+"<div class='clearAll'></div></div>";if(O.reviewDescription){var I=O.reviewDescription;if(I.length>200){var M=I;var C=I.substring(0,200)+"... ";H+="<div class='revShort' id='revShort_less'><table cellspacing='0' cellpadding='0' border='0'><tr><td>"+C+"</td></tr></table>";H+="<div class='moreCont'><a href='javascript:void(0);' class='moreReview' onclick=\"showHide('revShort_more', 'revShort_less')\">+ more</a></div></div>";H+="<div class='revShort' id='revShort_more' style='display: none;'>"+M+"</div>"}else{H+="<div class='revShort'>"+I+"</div>"}}H+="</div><div class='clearAll'></div>";return H}function prepareCompareProjectReviewHtml(A,D){var B="";if(A.reviewDescription){var E=A.reviewDescription;if(E.length>125){var C=E.substring(0,120)+"... ";B+="<div class='localityReviewsText'>\""+C+'"</div>'}else{B+="<div class='localityReviewsText'>\""+E+'"</div>'}}if(A.userName){B+="<div class='localityReviewsName'>"+A.userName+"</div>"}return B}function getReviewCities(C,E){var D=$("#"+E.parentDiv);var B="<select class='input' id='reviewDrp' onchange=\"pickLocExpertComment(this.value,'reviewDrp');\">";for(var A in C){if(A==E.cityCode){B=B+"<option value="+A+" selected='true'>"+C[A]+"</option>"}else{B=B+"<option value="+A+">"+C[A]+"</option>"}}B=B+"</select>";D.html(B)}function fillRating(C,B){for(var A=0;A<(5-C);A++){B+="<span  lang='Excellent'></span>"}return B}function prepareViewAllReviewUrl(A,E,D,C){var B="";if(D&&A&&E){var F="";A=A.replace(/ /g,"-");E=E.replace(/ /g,"-");if(E.indexOf("--")>-1){reviewCityAraay=E.split("--");F+=A+"-in"+reviewCityAraay[1]+"-area-"+reviewCityAraay[0]}else{F+=A+"-in-"+E}B=D+"real-estate-property-reviews/"+F+"#reviewResult"}return B}function equalHeight(A){var B=0;A.each(function(){var C=$(this).height();if(C>B){B=C}});$(A).css("minHeight",B)}function showRatingToolTip(A){if($(A).find(".ratingTooltip").is(":hidden")){$(A).find(".ratingTooltip").show()}else{$(A).find(".ratingTooltip").hide()}}Object.size=function(B){var A=0;for(key in B){if(B.hasOwnProperty(key)){A++}}return A};