"use strict";function isBlank(e){return e?""===e.trim()?!0:!1:!0}function isEmpty(e){return e?""===e?!0:!1:!0}function escapeHTML(e){return e+="",e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}function titleize(e){return e?e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).join(" "):""}function moveKeyToNewParams(e,t,n){return t[n]&&(e[n]=t[n],delete t[n]),[e,t]}function scrollToTop(){document.body.scrollTop=0}var naSearchApp=null;try{angular.module("uiGmapgoogle-maps"),naSearchApp=angular.module("naSearchApp",["nouislider","uiGmapgoogle-maps","willPaginate"])}catch(e){naSearchApp=angular.module("naSearchApp",["nouislider"])}naSearchApp.constant("MAX_BED_CNT",20),naSearchApp.constant("DEFAULT_RADIUS",5e3),naSearchApp.config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!")}]),naSearchApp.config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="AngularXMLHttpRequest"}]),naSearchApp.controller("naSearchCtrl",["$scope","$sce","$http","$location","$timeout","$injector","MAX_BED_CNT","DEFAULT_RADIUS","searchService",function(e,t,n,i,r,a,o,s,l){function u(e){var t={eventName:"Individual Houses",data:{"House Name":e.title,Address:e.locality,"No. Of BHKs":e.bhk_details,"Room Availability":e.private,"House For":e.gender,Price:e.min_rent},page:"Individual House"};utils.tracker(t)}function c(t){p(),e.isPaginated=e.isSeoUrl();var r=f(),a={},o={};a.page=e.willPaginateCollection.currentPage;var s=moveKeyToNewParams(a,r,"offer");a=s[0],r=s[1],r.per_page=e.willPaginateCollection.perPage,t||(e.isPaginated?i.search(a):i.path("/search_new").search($.extend(r,a)),e.isPaginated=!1),e.loading=!0,o=$.extend(r,a),o.engine="v3",n.get("/search_new.json",{params:o}).then(function(t){t.data&&Array.isArray(t.data.houses)?(t.data.no_results?e.houses=[]:(e.houses=t.data.houses,e.groupUrl=e.getCurrentUrl()),e.popularLocalities=t.data.popular_localities?t.data.popular_localities:[],t.data.tq_enabled&&(e.filterOptions.textQuery=""),t.data.page_headers&&(e.filterOptions.isGroup||$("h1").text(t.data.page_headers.h1_tag),t.data.page_headers.title&&(window.document.title=t.data.page_headers.title,$("meta[property='og\\:title']").attr("content",t.data.page_headers.title)),t.data.page_headers.meta_description&&($("meta[name=description]").attr("content",t.data.page_headers.meta_description),$("meta[property='og\\:description']").attr("content",t.data.page_headers.meta_description)),t.data.page_headers.meta_keywords&&$("meta[name=keywords]").attr("content",t.data.page_headers.meta_keywords)),e.prepareFilterTags(t.data.filters),e.prepareOfferDeals(t.data.deals),e.setMobileWebHiddenParam(),e.updateOfferBanner(t.data),v(t.data),g(t.data)):e.houses=[],e.loading=!1},function(){e.houses=[],e.loading=!1})}function d(){e.isInitializer=!0;var t=i.search();for(var n in t)t.hasOwnProperty(n)&&(t[n]=escapeHTML(t[n]));e.setMobileWebHiddenParam();var r=S();if(e.isPgRoom=r.indexOf("/pg-room-")>-1||"bed"==t.bed_type,e.isFlatHouse=r.indexOf("flat-house-")>-1||"house"==t.bed_type||"family"==t.gender,e.isPgRoom&&!e.isFlatHouse&&(t.bed_type="room"===(t.bed_type||"").toLowerCase()?"room":"bed",r.indexOf("-rent-only-boys")>-1||r.indexOf("-rent-only-boys-in-")>-1?t.gender="boys":(r.indexOf("-rent-only-girls")>-1||r.indexOf("-rent-only-girls-in-")>-1)&&(t.gender="girls")),(r.indexOf("-in-")>-1||r.indexOf(t.city+"/properties-in-")>-1)&&r.split("/").length>2&&(t.locality=r.split("in-")[1].replace(/-/g," ").replace("/","").trim(),2==t.locality.split(",").length&&(t.locality=t.locality.split(",")[1]+","+t.locality.split(",")[0])),!e.isPgRoom&&e.isFlatHouse&&(t.bed_type="house",r.indexOf("-bhk-flat-house-")>-1&&(t.bedroom=parseInt(r.split("-bhk")[0].split("/")[r.split("-bhk")[0].split("/").length-1]))),-1==r.indexOf("search_new")&&(t.city=(0==r.indexOf("/properties-in-")?r.split("-in-")[1].replace("/",""):r.split("/")[1]).replace(/-/g," "),isBlank(t.city)&&(t.city="bangalore")),t.locality==t.city&&(t.locality=""),e.filtercount=0,e.filterOptions.latitude=isEmpty(t.latitude)?"":parseFloat(t.latitude),e.filterOptions.longitude=isEmpty(t.longitude)?"":parseFloat(t.longitude),e.filterOptions.locality=isBlank(t.locality)?"":t.locality,e.filterOptions.city=isBlank(t.city)?"":t.city,isBlank(t.gender)||"any"==t.gender?e.filterOptions.gender="":(e.filtercount++,e.filterOptions.gender=t.gender),e.filter.gender=e.filterOptions.gender,e.filterOptions.min_price=isEmpty(t.min_price)?e.defaultMinRent:parseInt(t.min_price),e.filter.min_price=e.filterOptions.min_price,e.filterOptions.max_price=isEmpty(t.max_price)?e.defaultMaxRent:parseInt(t.max_price),e.filter.max_price=e.filterOptions.max_price,(e.defaultMinRent!=e.filterOptions.min_price||e.defaultMaxRent!=e.filterOptions.max_price)&&(e.filtercount++,e.rentOption.isRichkid="no"),"yes"==e.rentOption.isRichkid)e.filterOptions.max_price=e.defaultMaxRent,e.filterOptions.min_price=e.defaultMinRent;else{var a=(e.filterOptions.min_price+e.filterOptions.max_price)/2;a=1e3*Math.round(a/1e3),e.rentOption.rent=a}e.rentOption.minRent=e.filterOptions.min_price,e.rentOption.maxRent=e.filterOptions.max_price,e.filterOptions.roomtype=isBlank(t.roomtype)?"":t.roomtype,e.filter.roomtype=e.filterOptions.roomtype,(isEmpty(t.distance)||""===e.filterOptions.locality)&&(t.distance=s),e.filterOptions.distance=parseFloat(t.distance),e.filter.distance=e.filterOptions.distance,-1!=e.searchRadius.indexOf(e.filterOptions.distance)&&e.filtercount++,e.filterOptions.order_by=isBlank(t.order_by)?"":t.order_by,e.filter.order_by=e.filterOptions.order_by,e.filterOptions.order=isBlank(t.order)?"":t.order,e.filter.order=e.filterOptions.order,e.willPaginateCollection.currentPage=isEmpty(t.page)?1:parseInt(t.page),e.willPaginateCollection.perPage=isEmpty(t.per_page)?10:parseInt(t.per_page),e.filter.house_type={},t.house_type&&(e.filter.house_type.apartment=-1!=t.house_type.indexOf("apartment"),e.filter.house_type.apartment&&e.filtercount++,e.filter.house_type.independent=-1!=t.house_type.indexOf("independent"),e.filter.house_type.independent&&e.filtercount++,e.filter.house_type.villa=-1!=t.house_type.indexOf("villa"),e.filter.house_type.villa&&e.filtercount++),e.filterOptions.house_type=isBlank(t.house_type)?"":t.house_type,e.filter.furnishing={},t.furnishing&&(e.filter.furnishing.fullyfurnished=-1!=t.furnishing.indexOf("fully-furnished"),e.filter.furnishing.fullyfurnished&&e.filtercount++,e.filter.furnishing.semifurnished=-1!=t.furnishing.indexOf("semifurnished"),e.filter.furnishing.semifurnished&&e.filtercount++,e.filter.furnishing.unfurnished=-1!=t.furnishing.indexOf("unfurnished"),e.filter.furnishing.unfurnished&&e.filtercount++),e.filterOptions.furnishing=isBlank(t.furnishing)?"":t.furnishing,isBlank(t.bed_type)&&(t.bed_type="bed"),e.filterOptions.bed_type=t.bed_type,"family"===e.filterOptions.gender&&"house"!==e.filterOptions.bed_type&&(e.filterOptions.bed_type="house",e.filterOptions.roomtype=""),e.filterOptions.roomtype="bed"===e.filterOptions.bed_type?"shared":"room"===e.filterOptions.bed_type?"private":"","bed"!==e.filterOptions.bed_type&&e.filtercount++,e.filter.bed_type=e.filterOptions.bed_type,isEmpty(t.bedroom)?(e.filter.bedrooms=0,e.filterOptions.bedroom=0):(e.filterOptions.bedroom=parseInt(t.bedroom),e.filterOptions.bedroom>0&&e.filtercount++,e.filter.bedrooms=e.filterOptions.bedroom),e.filterOptions.bed_count=isEmpty(t.bed_count)?1:parseInt(t.bed_count),e.filter.bed_count=e.filterOptions.bed_count,e.filterOptions.max_bed_count=isEmpty(t.max_bed_count)?o:parseInt(t.max_bed_count),e.filter.max_bed_count=e.filterOptions.max_bed_count,e.filterOptions.offer=isEmpty(t.offer)?0:parseInt(t.offer),e.filter.offer=e.filterOptions.offer,e.filterOptions.nql=isEmpty(t.nql)?"":t.nql,"house"!=e.filterOptions.bed_type&&0!=e.filterOptions.bed_count&&e.filtercount++,0!=e.filterOptions.offer&&e.filtercount++,isBlank(t.max_movein_date)?(e.filter.max_movein_date="",e.filter.formatted_max_movein_date=""):(e.filterOptions.max_movein_date=t.max_movein_date,e.filter.max_movein_date=e.filterOptions.max_movein_date,e.filter.formatted_max_movein_date=e.getFormattedDate(e.filterOptions.max_movein_date),e.filtercount++),isBlank(t.source)||(e.filterOptions.source=t.source),isBlank(t.platform)||(e.filterOptions.platform=t.platform),e.isSeoUrl()&&isBlank(t.isgrid)&&(t.isgrid="true"),e.hasmap?($("#distance").val(e.filterOptions.distance),e.filterOptions.isgrid=isBlank(t.isgrid)?"false":t.isgrid,e.willPaginateCollection.perPage=30):e.filterOptions.isgrid="true","true"==t.showgroup&&(e.willPaginateCollection.currentPage=1),"true"==t.showgroup||"true"==t.isgroup?(e.filterOptions.isGroup=!0,e.filterOptions.group=t.group):(e.filterOptions.isGroup=!1,e.filterOptions.group=""),e.filterOptions.td=t.td,e.filterOptions.offers=t.offers,e.filterOptions.tags=t.nql,e.filterOptions.nql=t.nql,e.filterOptions.textQuery=t.tq||""}function h(){if("true"==e.filterOptions.isgrid){var t=e.filterOptions,n=S();e.isPgRoom=["bed","shared","room"].indexOf(t.bed_type)>-1||n.indexOf("pg-room")>-1||["shared","private"].indexOf(t.roomtype)>-1,e.isFlatHouse="house"==t.bed_type||"family"==t.gender||n.indexOf("flat-house")>-1;var i=isBlank(t.gender)?"":t.gender.toLowerCase().indexOf("boy")>-1?" only boys":t.gender.toLowerCase().indexOf("girl")>-1?" only girls":"",r={"pg room for rent":"Room on rent","pg room for rent?bed_type=room":"Single rooms on rent","flat house for rent":"Flat for rent"},a="";a=C()||k()?k()?r["pg room for rent?bed_type=room"]:r["pg room for rent"]:e.isFlatHouse?r["flat house for rent"]:"";var o,s,l=isBlank(t.locality)?"":" in "+titleize(t.locality)+", ",u=isBlank(t.gender)?"":" for "+titleize(t.gender),c=isBlank(t.gender)?"":t.gender.toLowerCase().indexOf("boy")>-1?" for Male":t.gender.toLowerCase().indexOf("girl")>-1?" for Female":"";t.locality=t.locality.replace(/[/,.]/g,"").replace(/-/g," ");var d=getCityInfo(t.city,t.locality);if(t.locality&&d.alias&&d.alias.indexOf(t.locality.toLowerCase())>-1&&(t.city=d.city,t.locality=d.locality),o=d.city,e.allBreadcrumbs=[],!(n.indexOf("properties-in-")>-1||n.indexOf("search_new?")>-1)||isBlank(t.locality)&&isBlank(o)||!isBlank(u)||-1!=n.indexOf("pg-room")||-1!=n.indexOf("flat-house")){var h=o+"/"+Object.keys(r).filter(function(e){return r[e]===a})[0];isBlank(t.locality)&&isBlank(t.gender)&&isEmpty(t.bedroom)||(e.allBreadcrumbs.push([titleize(o),(e.origin+"/"+h).toLowerCase().replace(/\s/g,"-")]),isBlank(t.locality)||(isBlank(t.gender)||"family"==t.gender)&&(isEmpty(t.bedroom)||"house"!=t.bed_type)||e.allBreadcrumbs.push([titleize(t.locality),(e.origin+"/"+T(h,"?",l.replace(", ",""),!1)).trim().toLowerCase().replace(/\s/g,"-")])),h.indexOf("flat house")&&t.bedroom>0&&(h=T(h,"/",t.bedroom+" BHK ",!0)),h.indexOf("pg room")>-1&&(h=T(h,"?",i,!1)),s=[(e.isPgRoom?a+c:(isEmpty(t.bedroom)||t.bedroom<1?"":t.bedroom+" BHK ")+a)+(t.locality?l.replace(",",""):" in "+titleize(o)),e.origin+"/"+T(h,"?",l.replace(", ",""),!1).trim().toLowerCase().replace(/\s/g,"-")]}else(n.indexOf("properties-in-"+o.replace(/\s/g,"-").toLowerCase())>-1||isBlank(t.locality))&&!isBlank(o)&&(s=["Properties for rent in "+titleize(o),(e.origin+"/properties-in-"+o).toLowerCase().replace(/\s/g,"-")]),(-1==n.indexOf("properties-in-"+o.replace(/\s/g,"-").toLowerCase())&&n.indexOf("properties-in-"+t.locality.replace(/\s/g,"-").toLowerCase())>-1||!isBlank(o)&&!isBlank(t.locality))&&(e.allBreadcrumbs.push([titleize(o),(e.origin+"/properties-in-"+o).toLowerCase().replace(/\s/g,"-")]),s=["Properties for rent"+l.replace(",",""),(e.origin+"/"+o+"/properties-in-"+t.locality).toLowerCase().replace(/\s/g,"-")]);e.allBreadcrumbs.push(s)}}function f(){var t={city:e.filterOptions.city,locality:e.filterOptions.locality,latitude:e.filterOptions.latitude,longitude:e.filterOptions.longitude,isgrid:e.filterOptions.isgrid,min_price:e.filterOptions.min_price,max_price:e.filterOptions.max_price};return isBlank(e.filterOptions.gender)||(t.gender=e.filterOptions.gender),isBlank(e.filterOptions.roomtype)||(t.roomtype=e.filterOptions.roomtype),isEmpty(e.filterOptions.distance)||-1==e.searchRadius.indexOf(e.filterOptions.distance)||(t.distance=e.filterOptions.distance),isBlank(e.filterOptions.furnishing)||(t.furnishing=e.filterOptions.furnishing),isBlank(e.filterOptions.order_by)||(t.order_by=e.filterOptions.order_by),isBlank(e.filterOptions.order)||(t.order=e.filterOptions.order),isBlank(e.filterOptions.house_type)||(t.house_type=e.filterOptions.house_type),isBlank(e.filterOptions.bed_type)||(t.bed_type=e.filterOptions.bed_type,"house"!==t.bed_type&&e.filterOptions.max_bed_count>0&&(t.max_bed_count=e.filterOptions.max_bed_count)),t.bed_count=e.filterOptions.bed_count,e.filterOptions.bedroom>0&&(t.bedroom=e.filterOptions.bedroom),t.max_movein_date=isBlank(e.filterOptions.max_movein_date)?"":e.filterOptions.max_movein_date,isBlank(e.filterOptions.source)||(t.source=e.filterOptions.source),isBlank(e.filterOptions.platform)||(t.platform=e.filterOptions.platform),isBlank(e.filterOptions.textQuery)||(t.tq=e.filterOptions.textQuery),e.filterOptions.isGroup&&(t.isgroup=!0,t.group=e.filterOptions.group),"1"==e.filterOptions.td&&(t.td=e.filterOptions.td),t.nql=e.getNQLParam(),e.isOfferClicked&&(e.isOfferClicked=!1,_.size(e.filterTags)>0?t.nql=e.prepareOfferAndTagParams():_.size(e.offerDeals.options)>0&&(t.nql=e.prepareOfferDealParams())),t}function p(){e.hasmap?($(".filter-popup-widget").removeClass("modal-on"),$(".nest-overlay").fadeOut(200)):$("#filter").removeClass("filter-open")}function m(){var t=0;e.filter.min_price=e.filterOptions.min_price,e.filter.max_price=e.filterOptions.max_price,(e.defaultMinRent!=e.filterOptions.min_price||e.defaultMaxRent!=e.filterOptions.max_price)&&t++,e.filter.gender=e.filterOptions.gender,isBlank(e.filterOptions.gender)||t++,e.filter.distance=e.filterOptions.distance,isEmpty(e.filterOptions.distance)||-1==e.searchRadius.indexOf(e.filterOptions.distance)||t++,isBlank(e.filterOptions.house_type)||(-1!=e.filterOptions.house_type.indexOf("apartment")&&t++,-1!=e.filterOptions.house_type.indexOf("independent")&&t++,-1!=e.filterOptions.house_type.indexOf("villa")&&t++),isBlank(e.filterOptions.furnishing)||(-1!=e.filterOptions.furnishing.indexOf("fully-furnished")&&t++,-1!=e.filterOptions.furnishing.indexOf("semifurnished")&&t++,-1!=e.filterOptions.furnishing.indexOf("unfurnished")&&t++),"bed"!==e.filterOptions.bed_type&&t++,"house"===e.filterOptions.bed_type?e.filterOptions.bedroom>0&&t++:e.filterOptions.bed_count>0&&t++,e.filterOptions.offer>0&&t++,isBlank(e.filterOptions.max_movein_date)||t++,t+=b(),t+=y(),e.filtercount=t}function g(t){t&&(t.no_results?(e.willPaginateCollection.perPage=t.per_page,e.willPaginateCollection.totalEntries=0,e.willPaginateCollection.totalPages=1,e.willPaginateCollection.offset=t.offset,e.willPaginateCollection.currentPage=1):(e.willPaginateCollection.perPage=t.per_page,e.willPaginateCollection.totalEntries=t.total_entries,e.willPaginateCollection.totalPages=t.total_pages<=0?1:t.total_pages,e.willPaginateCollection.offset=t.offset,e.willPaginateCollection.currentPage=parseInt(t.page)))}function v(t){{var n=t.houses,i=t.similar_searches;e.popularLocalities}if(n){var r=e.allBreadcrumbs,a="";if(r){a+='<script type="application/ld+json"> {          "@context": "http://schema.org",          "@type": "BreadcrumbList",          "itemListElement": [{           "@type": "ListItem",            "position":  0,            "item": {               "@id": "https://'+window.location.hostname+'",               "name": "Home"}},';for(var o=0;o<r.length;o++)a+='{"@type": "ListItem",                "position": '+(o+1)+',                "item": {'+(r[o][1]?'"@id": "'+r[o][1]+'",':"")+'"name": "'+r[o][0]+'"}}',a+=o+1<r.length?",":"]} </script>"}for(var s,o=0;o<n.length;o++){var l="";n[o].bhk_details.length>0&&(n[o].bhk_details.toLowerCase().indexOf("studio")>-1?l="1":n[o].bhk_details.toLowerCase().indexOf("bhk")>-1&&(l=parseInt(n[o].bhk_details||0).toString())),s=["independent","villa"].indexOf(n[o].house_type.toLowerCase())>-1,a+='<script type="application/ld+json"> {           "@context": "http://schema.org",           "@type": "'+(s?"SingleFamilyResidence":"Apartment")+'",           "image": "'+n[o].image_url+'",           "url": "https://'+window.location.hostname+"/houses/"+n[o].slug+'",           "name": "'+n[o].title+'",           "geo": {             "@type": "GeoCoordinates",             "latitude": "'+(n[o].lat_double||"")+'",             "longitude": "'+(n[o].long_double||"")+'" },           "address": {             "@type": "PostalAddress",             "addressLocality": "'+(n[o].locality||"")+'",             "addressCountry": "India"},             "numberOfRooms": "'+l+'",             "floorSize" :  {               "@type": "QuantitativeValue",               "value": "'+(n[o].area||"")+'",                "unitText": "FTK"}         } </script>'}if(i){i=i.flats.concat(i.roommates);for(var o=0;o<i.length;o++)a+='<script type="application/ld+json">             { "@context": "http://schema.org",               "@type": "SiteNavigationElement",               "url": "'+i[o][0]+'",               "name": "'+i[o][1]+'"             } </script>'}angular.element(".mainContainer.search-main-container").length>0&&angular.element(".mainContainer.search-main-container").append(a),angular.element(".structured-data").length>0&&angular.element(".structured-data").append(a)}}function y(){return"undefined"!=typeof e.offerDeals?1:0}function b(){var t=0,n=e.filterTags;if(n instanceof Array)for(var i=0;i<n.length;i++)for(var r=0;r<n[i].options.length;r++)1==n[i].options[r].selected&&t++;return t}function w(){var t=e.filterOptions;return S().indexOf("flat-house-")>-1||"house"==t.bed_type||"family"==t.gender||!isBlank(t.bedroom)}function x(){var t=e.filterOptions;return["bed","shared","room"].indexOf(t.bed_type)>-1||["shared","private"].indexOf(t.roomtype)>-1}function C(){return["bed","shared"].indexOf(e.filterOptions.bed_type)>-1||["shared"].indexOf(e.filterOptions.room_type)>-1}function k(){return["room"].indexOf(e.filterOptions.bed_type)>-1||["private"].indexOf(e.filterOptions.room_type)>-1}function S(){return window.location.pathname.toLowerCase()}function D(){return{bachelor:"pg-room-for-rent",family:"flat-house-for-rent"}}function T(e,t,n,i){var r=i?1:0;return e.indexOf(t)>-1?[e.slice(0,e.indexOf(t)+r),n,e.slice(e.indexOf(t)+r)].join(""):e+n}e.$on("$locationChangeStart",function(){e.loading||e.init()}),e.trustAsHtml=function(e){return t.trustAsHtml(e)},e.defaultMinRent=2e3,e.defaultMaxRent=2e5,e.filterTags={},e.offerDeals={},e.isOfferClicked=!1,e.isInitializer=!1,e.showsoldout=!0,e.filterOptions={},e.hasmap=!1,e.hasdistance=!1,e.loading=!1,e.savLoading=!1,e.filter={},e.houses=[],e.iscitysearch=!1,e.filtercount=0,e.price_opts=[5e3,7500,1e4,12500,15e3,2e4,25e3,3e4,4e4,5e4,75e3,1e5,15e4],e.similarSearch={},e.origin=window.location.origin,e.rentOption={rent:6e3,maxLimit:3e4,minLimit:5e3,maxRent:6900,minRent:5100,showRangeText:!0,isRichkid:"yes"},e.isASearch=!1,e.isListSearch=!1,e.groupUrl="",e.showFilter=!0,e.bindSideAutocomplete=!0,e.bindMainAutocomplete=!0,e.searchRadius=[2500,3e3,3500,4e3,4500,5e3],e.init=function(t){if(t&&(e.hasmap=!0),d(),e.hasmap?(e.initSearchText(),e.houseUpdator(!0)):c(!0),e.filterOptions.isGroup){var n=f();return n.page=e.willPaginateCollection.currentPage,n.per_page=e.willPaginateCollection.perPage,i.path("/search_new").search(n),void scrollToTop()}},e.resetFilter=function(){e.filter={min_price:e.defaultMinRent,max_price:e.defaultMaxRent,gender:"",roomtype:"",distance:""===e.filterOptions.locality?"":s,house_type:{apartment:!1,independent:!1,villa:!1},furnishing:{fullyfurnished:!1,semifurnished:!1,unfurnished:!1},bed_type:"bed",order_by:"",order:"",bedrooms:0,bed_count:0,filterTags:{},offerDeals:{},isOfferClicked:!1,max_bed_count:o,max_movein_date:"",offer:0},e.resetMovein(),e.isASearch?e.resetExpFilters():(e.resetTagsOffers("all",!0),e.resetOfferDeal(!0)),$("#distance_sort").prop("checked",!0)},e.soldout=function(){e.filter.bed_count=0==e.filter.bed_count?1:0},e.minusBed=function(){0!=e.filter.bed_count&&e.filter.bed_count--},e.plusBed=function(){o!=e.filter.bed_count&&e.filter.bed_count++},e.showHouseOffers=function(t){0==e.filter.offer?e.filter.offer=1:1==e.filter.offer&&(e.filter.offer=0),"outside"==t&&e.applyFilter()},e.minusMinBedCount=function(){0!=e.filter.bed_count&&e.filter.bed_count--},e.plusMinBedCount=function(){o==e.filter.bed_count||e.filter.bed_count>=e.filter.max_bed_count||e.filter.bed_count++},e.minusMaxBedCount=function(){0==e.filter.max_bed_count||e.filter.bed_count>=e.filter.max_bed_count||e.filter.max_bed_count--},e.plusMaxBedCount=function(){o!=e.filter.max_bed_count&&e.filter.max_bed_count++},e.minusBedrooms=function(){0!=e.filter.bedrooms&&e.filter.bedrooms--},e.plusBedrooms=function(){10!=e.filter.bedrooms&&e.filter.bedrooms++},e.setDistance=function(){e.filter.order="",e.filter.order_by=""},e.setPriceLowToHigh=function(){e.filter.order="asc",e.filter.order_by="price"},e.setPriceHighToLow=function(){e.filter.order="desc",e.filter.order_by="price"},e.setBedCountLowToHigh=function(){e.filter.order="asc",e.filter.order_by="bed_count"},e.setBedCountHighToLow=function(){e.filter.order="desc",e.filter.order_by="bed_count"},e.isGroupedHouse=function(t){for(var n,i=e.getCurrentUrl(),r=i.split("&"),a=0;a<r.length;a++)if(n=r[a].split("="),n[0]===t&&""!=n[1])return!0;return!1},e.gotoMobileBrowserHouseDetails=function(t,n){utils.gaEventTracker("Houses","View Details","Lastbed_exp("+e.button_exp+"), offer_clicked("+e.filterOptions.offr+")"),e.houses[t].group&&!e.isGroupedHouse("group")?(window.open(e.getCurrentUrl()+e.houses[t].group.id,"_blank"),u(e.houses[t]),e.filterOptions.isGroup=!0):(e.gotoHouseDetails(t,n),e.filterOptions.isGroup=!1)},e.gotoHouseDetails=function(t,n){utils.gaEventTracker("Houses","View Details","Lastbed_exp("+e.button_exp+"), offer_clicked("+e.filterOptions.offr+")"),n&&window.open("/houses/"+e.houses[t].slug+(e.filterOptions.max_movein_date.length>0?"?max_movein_date="+e.filterOptions.max_movein_date:""),"_blank"),u(e.houses[t])},e.formatMoveInDate=function(t){var n=$("#"+t).val(),i="",r=[];e.formatted_max_movein_date=n,n&&n.length>0&&(r=n.split("-"),i=r[2]+"-"+r[1]+"-"+r[0]),e.setMaxMoveInDate(i)},e.getFormattedDate=function(e){var t=new Date(e),n="",i=t.getDate(),r=t.getMonth()+1,a=t.getFullYear();return 10>i&&(i="0"+i),10>r&&(r="0"+r),n=i+"-"+r+"-"+a},e.resetMovein=function(){{var e=$("#moveIn");$("#move-in-calendar .datepicker-days .day")}e.val(""),$("#move-in-calendar").datepicker("update",""),$("#movein-datepicker-filter").datepicker("update","")},e.applyFilter=function(){var t=e.getNQLParam();e.filterOptions.nql=t,e.filter.nql=t;var n=0;if(e.price_validate()||(e.filterOptions.min_price=e.filter.min_price,e.filterOptions.max_price=e.filter.max_price,(e.defaultMinRent!=e.filter.min_price||e.defaultMaxRent!=e.filter.max_price)&&n++),e.filterOptions.gender=e.filter.gender,isBlank(e.filter.gender)||n++,e.filterOptions.distance=e.filter.distance,$("#distance").val(e.filterOptions.distance),isEmpty(e.filter.distance)||-1==e.searchRadius.indexOf(e.filterOptions.distance)||n++,e.filterOptions.roomtype=e.filter.roomtype,e.filterOptions.bed_type="family"===e.filter.gender&&"house"!==e.filter.bed_type?"house":e.filter.bed_type,e.filterOptions.roomtype="",e.filterOptions.roomtype="bed"===e.filter.bed_type?"shared":"room"===e.filter.bed_type?"private":"",isBlank(e.filter.bed_type)||"bed"===e.filter.bed_type||n++,e.filterOptions.bedroom=e.filter.bedrooms,e.filterOptions.bed_count=e.filter.bed_count,e.filterOptions.max_bed_count=e.filter.max_bed_count,e.filterOptions.offer=e.filter.offer,e.filterOptions.bedroom>0&&n++,"house"!==e.filterOptions.bed_type&&e.filterOptions.bed_count>0&&n++,e.filterOptions.offer>0&&n++,e.filterOptions.order_by=e.filter.order_by,e.filterOptions.order=e.filter.order,e.filterOptions.house_type="",e.filter.house_type.apartment&&(e.filterOptions.house_type="apartment",n++),e.filter.house_type.independent&&(n++,e.filter.house_type.apartment?e.filterOptions.house_type+="|independent":e.filterOptions.house_type="independent"),e.filter.house_type.villa&&(n++,e.filter.house_type.apartment||e.filter.house_type.independent?e.filterOptions.house_type+="|villa":e.filterOptions.house_type="villa"),e.filterOptions.furnishing="",e.filter.furnishing.fullyfurnished&&(e.filterOptions.furnishing="fully-furnished",n++),e.filter.furnishing.semifurnished&&(n++,e.filter.furnishing.fullyfurnished?e.filterOptions.furnishing+="|semifurnished":e.filterOptions.furnishing="semifurnished"),e.filter.furnishing.unfurnished&&(n++,e.filter.furnishing.fullyfurnished||e.filter.furnishing.semifurnished?e.filterOptions.furnishing+="|unfurnished":e.filterOptions.furnishing="unfurnished"),isBlank(e.filter.max_movein_date)?e.filterOptions.max_movein_date="":(e.filterOptions.max_movein_date=e.filter.max_movein_date,n++),n+=b(),n+=y(),e.filtercount=n,e.willPaginateCollection.currentPage=1,p(),e.hasmap?e.houseUpdator():c(),e.isSeoUrl()){var r=f();r.page=e.willPaginateCollection.currentPage,r.per_page=e.willPaginateCollection.perPage,i.path("/search_new").search(r),scrollToTop()}h()},e.prepage=function(){1!=e.willPaginateCollection.currentPage&&(e.willPaginateCollection.currentPage--,e.hasmap?e.houseUpdator():c(),scrollToTop())},e.nextpage=function(){e.willPaginateCollection.totalPages!=e.willPaginateCollection.currentPage&&(e.willPaginateCollection.currentPage++,e.hasmap?e.houseUpdator():c(),scrollToTop())},e.getNQLParam=function(){var e=i.search(),t="";return e&&e.nql&&(e.nql=escapeHTML(e.nql),t=e.nql),t},e.getTDParam=function(){var e=i.search(),t="";return e&&e.td&&(e.td=escapeHTML(e.td),t=e.td),t},e.setMobileWebHiddenParam=function(){$("#nql-param").val(e.getNQLParam()),$("#td-param").val(e.getTDParam())},e.prepareOfferDealParams=function(){var t="",n=e.offerDeals;if("undefined"!=typeof n.options){t+=n.param_key+"=";for(var i=0;i<n.options.length;i++)n.options[i].selected&&(t+=n.options[i].code)}return t=encodeURIComponent(t.replace(/&$/,"")),e.offerDeals=n,t},e.prepareOfferAndTagParams=function(){for(var t="",n=e.filterTags,i=_.size(e.filterTags),r=0;i>r;r++){t+=n[r].param_key+"=";for(var a=0;a<n[r].options.length;a++)n[r].options[a].selected&&(t+=n[r].options[a].code+",");t=t.replace(/,$/,"")+"&"}return t=encodeURIComponent(t.replace(/&$/,"")),e.filterTags=n,t},e.inst=null;try{var A=a.get("uiGmapIsReady");A&&(e.hasmap=!0,A.promise(1).then(function(t){t.forEach(function(t){e.inst=t})}))}catch(E){e.hasmap=!1}e.$on("$locationChangeStart",function(){e.loading||e.init()}),e.loading=!0,e.houses={},e.keyword="",e.centermarker=void 0,e.showcenter=!0,e.showmessage=!0,e.togglecenter=function(){e.showcenter=!e.showcenter},e.ignorezoom=!1,e.filterOptions={latitude:"",longitude:"",locality:"",city:"",min_price:e.defaultMinRent,max_price:e.defaultMaxRent,gender:"",roomtype:"",distance:"",isgrid:"true",max_movein_date:"",isGroup:!1,group:"",td:"0",textQuery:""},e.houseMarkers=[],e.willPaginateCollection={currentPage:1,perPage:30,totalEntries:0,totalPages:1,offset:0},e.willPaginateConfig={previousLabel:"Prev",nextLabel:"Next"},e.windowOptions={visible:!0},e.checked=!1,e.options={scrollwheel:!1,streetViewControl:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}},e.getcenter=function(){if(""===e.filterOptions.latitude||""===e.filterOptions.longitude||isNaN(parseFloat(e.filterOptions.latitude))||isNaN(parseFloat(e.filterOptions.longitude))){var t=getCityInfo(e.filterOptions.city);return t.lat||(t=getCityInfo("bangalore")),{lat:t.lat,lng:t.lng}}return{lat:parseFloat(e.filterOptions.latitude),lng:parseFloat(e.filterOptions.longitude)}},e.map={center:{latitude:12.9715987,longitude:77.59456269999998},zoom:12,bounds:{},geocoder:new google.maps.Geocoder,events:{center_changed:function(){},zoom_changed:function(){},dragend:function(){if(e.inst){var t=e.inst.map.getCenter();e.map.geocoder.geocode({location:{lat:t.lat(),lng:t.lng()}},e.handleReverseGeocode)}}},control:{},window:{model:{},house:{},show:!1,template:"/assets/map_pin.html",options:{position:{},pixelOffset:new google.maps.Size(-165,-255),disableAutoPan:!0,boxClass:".gm-style-iw",boxStyle:{maxHeight:"379px",maxWidth:"330px",pane:"floatPane"},closeBoxURL:"",disableDefaultUI:!0}},markersEvents:{click:function(t,n,i){i&&-1!=i.index&&(e.map.window.model.icon="/assets/icon/map_icon.png",e.map.window.model.index!=i.index?(e.map.window.model.icon="/assets/icon/map_icon.png",e.map.window.model.show=!1,e.map.window.model=i,e.map.window.house=e.houses[i.index],e.map.window.house.bed_type=e.filterOptions.bed_type,e.map.window.options.position={lat:i.latitude,lng:i.longitude},e.map.window.model.show=!0,e.map.window.model.icon="/assets/icon/map_icon_active.png",e.applyinfowindowdesign(),e.map.window.show=!0):(e.map.window.house.bed_type=e.filterOptions.bed_type,e.map.window.show?(e.map.window.model.show=!1,e.map.window.model.icon="/assets/icon/map_icon.png",e.map.window.show=!1):(e.map.window.model.show=!0,e.map.window.model.icon="/assets/icon/map_icon_active.png",e.map.window.show=!0)))}}},e.populate_max_price=function(t){return t>=e.filter.min_price},e.sel_price_range=function(t,n){e.filter.min_price==t&&e.filter.max_price==n?(e.filter.min_price=e.filterOptions.min_price,e.filter.max_price=e.filterOptions.max_price):(e.filter.min_price=t,e.filter.max_price=n)},e.set_default_Max_Rent=function(){},e.price_validate=function(){return(e.filterOptions.min_price%100||e.filter.min_price%100)&&(e.filterOptions.min_price=100*parseInt(e.filterOptions.min_price/100),e.filter.min_price=100*parseInt(e.filter.min_price/100)),(e.filterOptions.max_price%100||e.filter.max_price%100)&&(e.filterOptions.max_price=100*parseInt(e.filterOptions.max_price/100),e.filter.max_price=100*parseInt(e.filter.max_price/100)),e.filterOptions.min_price>e.filterOptions.max_price||e.filterOptions.max_price>e.defaultMaxRent||e.filterOptions.min_price<e.defaultMinRent?(e.filterOptions.min_price=e.filter.min_price,e.filterOptions.max_price=e.filter.max_price,!0):e.filter.min_price>e.filter.max_price||e.filter.max_price>e.defaultMaxRent||e.filter.min_price<e.defaultMinRent?(e.filter.min_price=e.filterOptions.min_price,e.filter.max_price=e.filterOptions.max_price,!0):!1},e.slidestop=function(){e.price_validate()||(e.willPaginateCollection.currentPage=1,e.houseUpdator(),m())},e.getPage=function(t){e.willPaginateCollection.currentPage!==t&&(e.willPaginateCollection.currentPage=t,e.isPaginated=e.isSeoUrl(),e.houseUpdator(),utils.tracker({eventName:"Next Page",data:{},page:"House List"}),e.isSeoUrl()&&scrollToTop())},e.prepareOfferDeals=function(t){t&&(e.offerDeals=t,e.filterOptions.offerDeals="")},e.prepareFilterTags=function(t){t&&(e.filterTags=t,e.filterOptions.filterTags="")},e.updateOfferBanner=function(e){var t=e.offer_heading;t&&($(".offer-desc").text(t.offer_desc),t.offer_code?($(".offer-code-seperator").text(" Offer Code : "),$(".offer-code").text(t.offer_code)):($(".tnc-wrap").hide(),$(".offer-code-seperator").text(""),$(".offer-code").text("")))},e.resetOfferDeal=function(t){var n=e.offerDeals;if("undefined"!=typeof n&&n.options instanceof Array){for(var i=n.options,r=0;r<i.length;r++)i[r].selected=!1;e.offerDeals.options=i}t||e.filterchanged()},e.resetTagsOffers=function(t,n){var i=e.filterTags;if(i instanceof Array)for(var r=0;r<i.length;r++)for(var a=0;a<i[r].options.length;a++)(t==i[r].title||"all"==t)&&(i[r].options[a].selected=!1);e.filterTags=i,n||e.filterchanged()},e.offerAndTagsfilterchanged=function(t,n,i){var r=e.filterTags;if(r instanceof Array)for(var a=0;a<r.length;a++)for(var o=0;o<r[a].options.length;o++)t==r[a].title&&n==r[a].options[o].display_value?"select"!=i||r[a].options[o].selected||(r[a].options[o].selected=!r[a].options[o].selected):t==r[a].title&&"select"==i&&(r[a].options[o].selected=!1);e.filterTags=r,e.filterchanged()},e.loadSelectedOffers=function(t){e.isOfferClicked=!0;var n=e.offerDeals.options;e.loading=!0;for(var i=0;i<n.length;i++)n[i].selected=t==n[i].code;e.offerDeals.options=n,e.filterchanged()},e.updatePagination=function(t){if(t){t.no_results?(e.willPaginateCollection.perPage=t.per_page,e.willPaginateCollection.totalEntries=0,e.willPaginateCollection.totalPages=1,e.willPaginateCollection.offset=t.offset,e.willPaginateCollection.currentPage=1):(e.willPaginateCollection.perPage=t.per_page,e.willPaginateCollection.totalEntries=t.total_entries,e.willPaginateCollection.totalPages=t.total_pages<=0?1:t.total_pages,e.willPaginateCollection.offset=t.offset,e.willPaginateCollection.currentPage=parseInt(t.page));var n=angular.element("#mapPaginate");n&&angular.element("#mapPaginate").isolateScope().render();
var i=angular.element("#gridPaginate");i&&angular.element("#gridPaginate").isolateScope().render()}},e.closeClick=function(){e.windowOptions.visible=!1},e.mapUpdator=function(){for(var t=[],n=(e.getcenter(),0);n<e.houses.length;n++){var i={latitude:e.houses[n].lat_double,longitude:e.houses[n].long_double,title:e.houses[n].title,id:e.houses[n].id,slug:e.houses[n].slug?e.houses[n].slug:"assets/no_pic.jpg",idkey:"id",icon:"/assets/icon/map_icon.png",index:n,show:!0};i.onClick=function(){i.show=!i.show,e.houses[i.index]},e.houses[n].model=i,t.push(i)}e.houseMarkers=t,e.updatezoom()},e.applyinfowindowdesign=function(){var t=$(".gm-style-iw");if(t&&t.length>0){var n=t.prev();n.detach()}else r(function(){e.applyinfowindowdesign()},50)},e.houseUpdator=function(t,r){if(e.map.window.show=!1,e.map.window.options.position=null,e.loading=!0,r&&(e.filterOptions.latitude=e.map.center.latitude,e.filterOptions.longitude=e.map.center.longitude),e.houses=[],e.keyword=isEmpty(e.filterOptions.locality)?e.filterOptions.city:e.filterOptions.locality,e.filterOptions.city){var a=getCityInfo(e.filterOptions.city);a.lat?("bengaluru"==e.filterOptions.city.toLowerCase()&&(e.filterOptions.city="bangalore"),Cookies.set("selected_city",e.filterOptions.city.toLowerCase().replace(" ","-"),{expires:7300}),isEmpty(e.filterOptions.locality)?(e.filterOptions.latitude="",e.filterOptions.longitude=""):e.filterOptions.city.toLowerCase()===e.filterOptions.locality.toLowerCase()&&(e.filterOptions.latitude="",e.filterOptions.longitude="",e.filterOptions.locality="")):!e.filterOptions.city&&e.filterOptions.locality&&(e.filterOptions.city=e.filterOptions.locality)}else e.filterOptions.city=e.filterOptions.locality,e.filterOptions.locality="";isNaN(parseFloat(e.filterOptions.latitude))||isNaN(parseFloat(e.filterOptions.longitude))||""!==e.filterOptions.distance||(e.filterOptions.distance=s);var o=f(),l={},u={};l.page=e.willPaginateCollection.currentPage;var c=moveKeyToNewParams(l,o,"offer");l=c[0],o=c[1],o.per_page=e.willPaginateCollection.perPage,o.distance=e.filterOptions.distance,t||(e.isPaginated?i.search(l):i.path("/search_new").search($.extend(o,l)),e.isPaginated=!1),e.update_recommendation_filters(),u=$.extend(o,l),u.engine="v3",n.get("/search_new.json",{params:u}).then(function(t){e.loading=!1,t.data&&Array.isArray(t.data.houses)?(t.data.no_results?e.houses=[]:(e.houses=t.data.houses,e.groupUrl=e.getCurrentUrl()),t.data.tq_enabled&&(e.filterOptions.textQuery=""),e.prepareFilterTags(t.data.filters),e.prepareOfferDeals(t.data.deals),e.setMobileWebHiddenParam(),e.updateOfferBanner(t.data),e.updatePagination(t.data),t.data.seo_latlng&&(e.filterOptions.latitude=t.data.seo_latlng.latitude,e.filterOptions.longitude=t.data.seo_latlng.longitude),t.data.similar_searches&&(e.similarSearch=t.data.similar_searches),t.data.page_headers&&(e.filterOptions.isGroup||$("h1").text(t.data.page_headers.h1_tag),t.data.page_headers.title&&(window.document.title=t.data.page_headers.title,$("meta[property='og\\:title']").attr("content",t.data.page_headers.title)),t.data.page_headers.meta_description&&($("meta[name=description]").attr("content",t.data.page_headers.meta_description),$("meta[property='og\\:description']").attr("content",t.data.page_headers.meta_description)),t.data.page_headers.meta_keywords&&$("meta[name=keywords]").attr("content",t.data.page_headers.meta_keywords)),e.popularLocalities=t.data.popular_localities?t.data.popular_localities:[],v(t.data),e.updatePagination(t.data)):(e.houses=[],e.similarSearch=[]),e.mapUpdator(),e.setsearchhits(),e.enable_disable_distance(),e.showHideSearchBox(),e.bindSearchAutocomplete()},function(){e.setErrorMessage("Unable to show results")}),h()},e.update_recommendation_filters=function(){var t={recommendation:{bed_type:e.filterOptions.bed_type,room_type:e.filterOptions.roomtype,city:e.filterOptions.city,min_price:e.filterOptions.min_price,max_price:e.filterOptions.max_price,bed_count:e.filterOptions.bed_count,gender:e.filterOptions.gender,distance:e.filterOptions.distance,bedroom:e.filterOptions.bedroom,locality_value:e.filterOptions.locality,house_type:e.filterOptions.house_type,furnishing_type:e.filterOptions.furnishing,max_bed_count:e.filterOptions.max_bed_count}},n=JSON.stringify(t);localStorage.setItem("recommendation",n),localStorage.getItem("recommendation")},e.listmousehover=function(t,n){e.map.window.model.icon="/assets/icon/map_icon.png",n&&n.model&&-1!=n.model.index&&e.map.window.model&&(n.model.index!=e.map.window.model.index&&(e.map.window.model=n.model,e.map.window.house=n,e.map.window.house.bed_type=e.filterOptions.bed_type,e.map.window.options.position={lat:n.model.latitude,lng:n.model.longitude}),e.map.window.model.icon="/assets/icon/map_icon_active.png",e.applyinfowindowdesign(),e.map.window.show=!0)},e.listmouseleave=function(t,n){n&&n.model&&-1!=n.model.index&&e.map.window.model&&n.model.index==e.map.window.model.index&&(e.map.window.show=!1,e.map.window.model=n.model,e.map.window.house=n,e.map.window.house.bed_type=e.filterOptions.bed_type,e.map.window.options.position={lat:n.model.latitude,lng:n.model.longitude},e.map.window.model.icon="/assets/icon/map_icon.png")},e.closeinfowindow=function(){e.map.window.model.icon="/assets/icon/map_icon.png",e.map.window.show=!1},e.showSearchBox=!0,e.enableSearchBox=function(){e.showSearchBox=!1},e.showSoldOutChanged=function(){e.mapUpdator()},e.filterchanged=function(t){e.loading=!0,e.willPaginateCollection.currentPage=1,"family"===e.filterOptions.gender&&"house"!==e.filterOptions.bed_type&&(e.filterOptions.bed_type="house",e.filterOptions.roomtype=""),e.filterOptions.roomtype="bed"===e.filterOptions.bed_type?"shared":"room"===e.filterOptions.bed_type?"private":"",e.filter.bed_type=e.filterOptions.bed_type,e.calculateRent(t),e.houseUpdator(),e.updateFilterObj(),m(),h()},e.calculateRent=function(t){var n,i;e.isASearch&&(i=e.rentOption.rent+parseInt(.15*e.rentOption.rent),n=e.rentOption.rent-parseInt(.15*e.rentOption.rent),e.rentOption.maxRent=100*Math.ceil(i/100),e.rentOption.minRent=100*Math.ceil(n/100),t&&(e.rentOption.isRichkid="no"),"yes"===e.rentOption.isRichkid?(e.filterOptions.max_price=e.defaultMaxRent,e.filterOptions.min_price=e.defaultMinRent,e.rentOption.maxRent=e.filterOptions.max_price,e.rentOption.minRent=e.filterOptions.min_price):e.rentOption.rent==e.rentOption.maxLimit?(e.filterOptions.max_price=e.defaultMaxRent,e.filterOptions.min_price=e.rentOption.maxLimit,e.rentOption.maxRent=e.defaultMaxRent):e.rentOption.rent==e.rentOption.minLimit?(e.filterOptions.max_price=e.rentOption.maxRent,e.filterOptions.min_price=e.rentOption.minLimit,e.rentOption.minRent=e.rentOption.minLimit):(e.filterOptions.max_price=e.rentOption.maxRent,e.filterOptions.min_price=e.rentOption.minRent),e.filter.max_price=e.filterOptions.max_price,e.filter.min_price=e.filterOptions.max_price)},e.updateFilterObj=function(){e.filter.bedrooms=e.filterOptions.bedroom,e.filter.gender=e.filterOptions.gender,e.filter.bed_type=e.filterOptions.bed_type,e.filter.roomtype=e.filterOptions.roomtype},e.resetRent=function(){e.rentOption.isRichkid="yes",e.rentOption.maxRent=e.defaultMaxRent,e.rentOption.minRent=e.defaultMinRent,e.rentOption.rent=6e3},e.resetGender=function(){e.filterOptions.gender=""},e.resetBookingType=function(){e.filterOptions.bed_type="bed"},e.resetBedRooms=function(){e.filterOptions.bedroom=0},e.resetExpFilters=function(){e.resetTagsOffers("all",!0),e.resetOfferDeal(!0),e.resetRent(),e.resetGender(),e.resetBookingType(),e.resetBedRooms(),e.filterchanged()},e.openFilter=function(){$(".filter-link")&&$(".filter-link").trigger("click")},e.viewchanged=function(){e.filterOptions.isgrid="false"===e.filterOptions.isgrid?"true":"false",e.isgrid=e.filterOptions.isgrid,e.loading=!0;var t=f(),n={};n.page=e.willPaginateCollection.currentPage||"",t.per_page=e.willPaginateCollection.perPage,e.isSeoUrl()?i.search(n):(t.page=e.willPaginateCollection.currentPage,i.search(t)),"false"===e.filterOptions.isgrid&&e.inst?(utils.gaEventTracker("Search Page","Button Clicked","Map"),r(function(){e.map.control.refresh(e.map.center),e.map.zoom=12,e.loading=!1},500),$(".search-footer").hide()):(utils.gaEventTracker("Search Page","Button Clicked","Grid"),$(".search-footer").show(),r(function(){e.loading=!1},500)),h(),e.showHideSearchBox(),e.bindSearchAutocomplete(),e.updatezoom()},e.initSearchText=function(){$("#autocomplete").keypress(function(e){return 13==e.which?(e.preventDefault(),$("#autocomplete").trigger("focus"),!1):void 0}),$("#sideAutocomplete").keypress(function(e){return 13==e.which?(e.preventDefault(),$("#sideAutocomplete").trigger("focus"),!1):void 0}),e.initialize(),$("#distance").off("change").on("change",function(){e.filterOptions.distance=$("#distance").val(),e.houseUpdator(),m()}),e.enable_disable_distance()},e.enable_disable_distance=function(){!e.filterOptions.latitude||e.filterOptions.latitude<=0?$("#distance_details").hide():$("#distance_details").show()},e.showHideSearchBox=function(){e.filterOptions.isGroup?$("#inlineSearchForm").css("visibility","hidden"):$("#inlineSearchForm").css("visibility","inherit")},e.bindSearchAutocomplete=function(){e.bindSideAutocomplete&&document.getElementById("sideAutocomplete")&&(e.bindSideAutocomplete=!1,e.gmapsAutocomplete(document.getElementById("sideAutocomplete")),e.initSearchText()),e.bindMainAutocomplete&&(e.bindMainAutocomplete=!1,e.gmapsAutocomplete(document.getElementById("autocomplete")),e.initSearchText()),!e.bindMainAutocomplete&&!e.bindSideAutocomplete},e.gmapsAutocomplete=function(t){var n={componentRestrictions:{country:"in"}},i=new google.maps.places.Autocomplete(t,n);google.maps.event.addListener(i,"place_changed",function(){var t=i.getPlace();if(!t.geometry)return void utils.gaEventTracker("Location Search Term : User Input","Search Page",t.name);if(e.filterOptions.locality=t.name,e.filterOptions.latitude=t.geometry.location.lat(),e.filterOptions.longitude=t.geometry.location.lng(),e.filterOptions.max_bed_count=o,e.filterOptions.city="",t.address_components&&angular.isArray(t.address_components))for(var n=0;n<t.address_components.length;n++){var r=t.address_components[n];if(r&&r.hasOwnProperty("types")&&angular.isArray(r.types)&&-1!=r.types.indexOf("locality")&&-1!=r.types.indexOf("political"))e.filterOptions.city=r.long_name;else if(r&&r.hasOwnProperty("types")&&angular.isArray(r.types)&&-1!=r.types.indexOf("administrative_area_level_2")&&-1!=r.types.indexOf("political")){var a=getCityInfo(r.long_name);a.lat&&(e.filterOptions.city=a.city)}}e.filterOptions.city.toLowerCase()===e.filterOptions.locality.toLowerCase()&&(e.filterOptions.locality="");var s=getCityInfo(e.filterOptions.city,e.filterOptions.locality);e.filterOptions.city=s.city,e.filterOptions.locality=s.locality,e.map.center.latitude=t.geometry.location.lat(),e.map.center.longitude=t.geometry.location.lng(),e.willPaginateCollection.currentPage=1,e.houseUpdator(),utils.gaEventTracker("Location Search Term : Autocomplete","Search Page",t.name)})},e.popularLocalitiesLink=function(t){var n=x()?D().bachelor:w()?D().family:"",i=isBlank(t.name)?"":"-in-"+t.name.replace(/\s/g,"-").toLowerCase(),r=getCityInfo(e.filterOptions.city).city.replace(/\s/g,"-");return"/"+r+"/"+n+i+(k()?"?bed_type=room":"")},e.setsearchhits=function(){var t="";e.filterOptions.order&&"asc"===e.filterOptions.order?order_of_sort=" Ascending":e.filterOptions.order&&"desc"===e.filterOptions.order&&(t=" Descending");var n={eventName:"Search Houses",data:{City:e.filterOptions.city,Locality:e.isASearch?$("#sideAutocomplete").val():$("#autocomplete").val(),"Tenant Type":e.filterOptions.gender,"Monthly Rent Min":e.filterOptions.min_price,"Monthly Rent Max":e.filterOptions.max_price,"Move In Date":e.filterOptions.max_movein_date,"House Type":e.filterOptions.house_type,"Furnishing Type":e.filterOptions.furnishing,"No. of Bedrooms":e.filterOptions.bedroom,"No. of Beds":e.filterOptions.bed_count,"Booking Type":e.filterOptions.bed_type,Sort:e.filterOptions.order_by+t,"Distance From Selected Location":e.filterOptions.distance},page:"Search Homes"};utils.tracker(n),$("#autocomplete").val(e.keyword),$("#sideAutocomplete").val(e.keyword),$("#results_msg>.keyword").html(e.keyword),$("#results_msg>.result-count").html("( "+e.willPaginateCollection.totalEntries+" houses)"),$("#results_msg").show(),$("#search-result-msg>.keyword").html(e.keyword),$("#search-result-msg>.result-count").html("( "+e.willPaginateCollection.totalEntries+" houses)"),$("#search-result-msg").show()},e.initialize=function(){$("#results_msg").click(function(){$(this).hide(),$("#autocomplete").focus(),$("#autocomplete").select()}),$("#search-result-msg").on("click",function(){$(this).hide(),$("#sideAutocomplete").focus(),$("#sideAutocomplete").select()}),$("#autocomplete").focusout(function(){$("#results_msg").show()}),$("#autocomplete").focus(function(){$("#results_msg").hide()}),$("#sideAutocomplete").focusout(function(){$("#search-result-msg").show()}),$("#sideAutocomplete").focus(function(){$("#search-result-msg").hide()}),"false"===e.filterOptions.isgrid?$(".search-footer").hide():$(".search-footer").show(),e.filterOptions.city&&""!==e.filterOptions.city.trim()||(e.filterOptions.city="");var t=e.getcenter();e.map.center.latitude=t.lat,e.map.center.longitude=t.lng},e.updatezoom=function(){if(isEmpty(e.filterOptions.locality))isEmpty(e.map.control.getGMap())||e.map.control.getGMap().setZoom(12);else{for(var t=new google.maps.LatLngBounds(new google.maps.LatLng(e.filterOptions.latitude,e.filterOptions.longitude),new google.maps.LatLng(e.filterOptions.latitude,e.filterOptions.longitude)),n=e.houseMarkers.length-1;n>=0;n--){var i=new google.maps.LatLng(e.houseMarkers[n].latitude,e.houseMarkers[n].longitude);t.extend(i)}if(!isEmpty(e.map.control.getGMap())){e.map.control.getGMap().fitBounds(t);var r=e.map.control.getGMap().getZoom();r>16&&e.map.control.getGMap().setZoom(12),e.map.control.getGMap().setCenter(new google.maps.LatLng(e.filterOptions.latitude,e.filterOptions.longitude))}}e.ignorezoom=!0},e.setErrorMessage=function(t){$(".errormessage").each(function(e,n){$(n).html(t)}),r(function(){e.clearErrorMessage()},1e4)},e.clearErrorMessage=function(){$(".errormessage").each(function(e,t){$(t).html("")})},e.searchPlaces=function(){var t=$(".pac-item:first").children(),n=t[1].textContent,i=t[2].textContent;e.map.geocoder.geocode({address:n+", "+i},e.handleGeocode)},e.handleGeocode=function(t,n){if(n===google.maps.GeocoderStatus.OK){if(e.filterOptions.city=e.getCity(t[0].address_components),e.filterOptions.city){var i=getCityInfo(e.filterOptions.city);i.lat||e.setErrorMessage("We dont have presence at '"+e.filterOptions.city+"'")}else e.setErrorMessage("We dont have presence in your search place ");e.filterOptions.locality=e.getLocality(t[0].address_components),e.filterOptions.locality&&""!==e.filterOptions.locality.trim()||(e.filterOptions.locality=e.filterOptions.city&&""!==e.filterOptions.city.trim()?e.filterOptions.city:t[0].formatted_address);{e.inst.map.getCenter()}e.map.center.latitude=t[0].geometry.location.lat(),e.map.center.longitude=t[0].geometry.location.lng(),e.willPaginateCollection.currentPage=1,e.filterOptions.latitude=t[0].geometry.location.lat(),e.filterOptions.longitude=t[0].geometry.location.lng(),e.houseUpdator(!1,!0)}},e.handleReverseGeocode=function(t,n){if(n===google.maps.GeocoderStatus.OK){if(e.filterOptions.city=e.getCity(t[0].address_components),e.filterOptions.city){var i=getCityInfo(e.filterOptions.city);i.lat||e.setErrorMessage("We dont have presence at '"+e.filterOptions.city+"'")}else e.setErrorMessage("We dont have presence in your search city ");var r=e.inst.map.getCenter();e.map.center.latitude=r.lat(),e.map.center.longitude=r.lng(),e.filterOptions.locality=e.getLocality(t[0].address_components),e.filterOptions.latitude=e.map.center.latitude,e.filterOptions.longitude=e.map.center.longitude,e.willPaginateCollection.currentPage=1,e.houseUpdator(!1,!0)}},e.checkBedType=function(){"family"===e.filter.gender&&"house"!==e.filter.bed_type&&(e.filter.bed_type="house")},e.getCity=function(e){if(e&&angular.isArray(e))for(var t="",n=0;n<e.length;n++){var i=e[n];i&&i.hasOwnProperty("types")&&angular.isArray(i.types)&&-1!=i.types.indexOf("locality")&&(t=i.long_name)}return t},e.getLocality=function(e){var t="";if(e&&angular.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];if(i&&i.hasOwnProperty("types")&&angular.isArray(i.types)&&-1!=i.types.indexOf("sublocality")&&-1!=i.types.indexOf("political"))if(-1!=i.types.indexOf("sublocality_level_2"))t=i.long_name;else if(-1!=i.types.indexOf("sublocality_level_1"))return""===t?i.long_name:i.long_name+","+t}return t},e.isSeoUrl=function(){var e=S();return(e.indexOf("-for-rent")>-1||e.indexOf("properties-")>-1)&&-1==e.indexOf("search_new")},e.setMaxMoveInDate=function(t){e.filter.max_movein_date=t},e.openGroupPage=function(t){e.filterOptions.group=t,window.open(e.getCurrentUrl()+t,"_blank")},e.getCurrentUrl=function(){return-1===window.location.href.indexOf("?")?window.location.href+"?showgroup=true&group=":window.location.href+"&showgroup=true&group="},e.selectedObj={},e.showSav=!1,e.currentTab=0,e.apiError=!1,e.user={name:"",email:"",phone:"",userId:""},e.openSav=function(t,n){e.houseId=n,e.slots=[],e.timeSlotsObj=[],e.successObj={},e.apiError=!1,e.serverError="",e.step=1,e.resetSelectedTimeSlot(),$(".list-view-card").removeClass("show-sav"),$(t.target).closest(".list-view-card").addClass("show-sav"),e.showSav=!0,e.savLoading=!0,utils.gaEventTracker("List View","Individual Card","Schedule a free tour"),l.getSavData(n).success(function(t){t?(t.calendar&&(e.slots=t.calendar,e.getSelectedDayTimeSlots()),t.user_details&&(e.isAdminSavCreator=t.user_details.admin,t.user_details.admin?(e.user.name="",e.user.email="",e.user.phone="",e.user.userId=""):(e.user.name=t.user_details.name,e.user.email=t.user_details.email,e.user.phone=t.user_details.phone,e.user.userId=t.user_details.id)),t.slot_types&&(e.slotsConfig=t.slot_types,e.btnLabel=e.slotsConfig.sav.btn_label,e.tooltip=e.slotsConfig.sav.tooltip),t.experiments&&(e.isGreenGoblin=1==t.experiments.goblin)):e.apiError=!0,e.savLoading=!1}).error(function(){e.apiError=!0,e.savLoading=!1})},e.getSelectedDayTimeSlots=function(){var t=!1;e.step=1,angular.forEach(e.slots,function(n){return n.selected?(e.selectedObj.selectedDay=n.text,e.timeSlotsObj=n.slots,e.legendObj=n.legends,void(t=!0)):void 0}),t||(e.selectedObj.selectedDay=e.slots[0].text,e.timeSlotsObj=e.slots[0].slots,e.legendObj=e.slots[0].legends)},e.updateTimeSlots=function(){e.currentTab=0,e.resetSelectedTimeSlot(),angular.forEach(e.slots,function(t){return t.text==e.selectedObj.selectedDay?(e.timeSlotsObj=t.slots,void(e.legendObj=t.legends)):void 0})},e.resetSelectedTimeSlot=function(){e.selectedTimeSlot={text:"",slot_id:"",slot_type:"",enabled:!1},e.btnLabel="Schedule a Visit",e.connectTenant=!1,e.slotInfo=""},e.setTab=function(t){e.currentTab=t},e.isCurrentTab=function(t){return e.currentTab==t},e.closeSavSection=function(t){$(t.target).closest(".list-view-card").removeClass("show-sav"),e.showSav=!1,utils.gaEventTracker("List View","Individual Card","Close sav")},e.selectTimeSlot=function(t){if("disabled"!=t.slot_type){utils.gaEventTracker("List View","Individual Card","SAV Time Slot"),e.selectedTimeSlot=t;var n=e.slotsConfig[t.slot_type];e.btnLabel=n.btn_label,e.connectTenant=n.connect_tenant,e.slotInfo=n.msg,e.tooltip=n.tooltip,e.step++}},e.previousStep=function(){e.step--;var t={eventName:"SAV Back Button",data:{category:"SAV flow",label:e.step},page:"House Details Page"};utils.tracker(t),utils.gaEventTracker("List View","Individual Card","Back Button")},e.validateSavForm=function(t){if(t){e.step++,e.createSav();var n={eventName:"User details submit",data:{category:"SAV flow",label:e.step},page:"House Details Page"};utils.tracker(n),utils.gaEventTracker("List View","Individual Card","Form submit")}},e.verifyAndSchedule=function(){e.createSav();var t={eventName:"SAV Otp Submit",data:{category:"SAV flow",label:e.step},page:"House Details Page"};utils.tracker(t),utils.gaEventTracker("List View","Individual Card","OTP verify")},e.createSav=function(t){e.savLoading=!0;var n={schedule:{house_id:e.houseId,slot_id:e.selectedTimeSlot.slot_id,slot_type:e.selectedTimeSlot.slot_type,email:e.user.email,phone:e.user.phone,name:e.user.name}};e.showOtp&&!t&&(n.otp=e.user.savOtp),e.connectTenant&&(n.connect_tenant=e.connectTenant.selected),l.createSav(n).success(function(t){e.serverError="",e.savLoading=!1,t&&t.confirm_otp?(e.showOtp=t.confirm_otp,e.otpMessage=t.message):t&&(e.showOtp=!1,e.successObj={},e.successObj=t,adobe({key:"ev_lead",value:Cookies.get("u_source")?1:0,ev_transid:t.data.id}))}).error(function(t){e.savLoading=!1,e.serverError=t.error||"Something went wrong. Please try later.",e.secondaryMessage=t.secondary_message})},e.trimString=function(e){return"string"==typeof e&&(e=e.replace(/\s/g,"")),e},e.getHouseTitle=function(){var t="";return t="bed"==e.filterOptions.bed_type?"Shared Rooms in ":"room"==e.filterOptions.bed_type?"Rooms in ":""},e.getCityInfo=function(e){return getCityInfo(e)},e.titleize=function(e){return titleize(e)}}]),naSearchApp.filter("capitalize",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}),naSearchApp.filter("toSentence",function(){return function(e){var t=e.split(",");return 1==t.length?t[0]:t.slice(0,t.length-1).join(", ")+" and "+t.slice(-1)}}),naSearchApp.factory("searchService",["$http",function(e){return{getSavData:function(t){return e.get("/api/v2/area_manager_calenders/slots.json?house_id="+t+"&single_window=1&open=1")},createSav:function(t){return t.is_lv=1,e.post("/api/v3/schedule_visits",t)}}}]),naSearchApp.directive("singlesearchbox",function(){return{restrict:"E",replace:!0,scope:{house:"=",listmousehover:"=",listmouseleave:"=",filteroptions:"=",gotohousedetails:"=",opengrouppage:"=",groupurl:"="},templateUrl:"/assets/search_list.html"}}),naSearchApp.directive("gridsearchbox",function(){return{restrict:"E",replace:!0,scope:{house:"=",filteroptions:"=",gotohousedetails:"=",opengrouppage:"=",groupurl:"="},templateUrl:"/assets/search.html"}}),naSearchApp.directive("listSearchBox",function(){return{restrict:"E",replace:!0,scope:"=",templateUrl:"/assets/list-view.html"}}),naSearchApp.directive("listSav",function(){return{restrict:"E",replace:!0,scope:"=",templateUrl:"/assets/list-view-sav.html"}}),naSearchApp.directive("owlItemRender",function(){return function(e,t){e.$last&&$(t).parent().owlCarousel({slideSpeed:400,items:2,navigation:!0,pagination:!1,loop:!0,navigationText:["<i class='icon-uniE6A0'></i>","<i class='icon-uniE6AD'></i>"]})}}),naSearchApp.directive("mobilehousebox",function(){return{restrict:"E",replace:!0,scope:{house:"=",filteroptions:"="},templateUrl:"/assets/mobile/housebox.html"}}),naSearchApp.directive("moveindatepicker",function(){return{restrict:"A",require:"ngModel",link:function(e,t){var n=new Date,i=(new Date).setDate(n.getDate()+2),r=(new Date).setDate(n.getDate()+47);$(t).datepicker({format:"dd-mm-yyyy",startDate:new Date(i),endDate:new Date(r)}).on("changeDate",function(n){n.stopPropagation(),$("#moveIn").val(n.format(0,"dd-mm-yyyy")),e.setMaxMoveInDate(n.format(0,"yyyy-mm-dd")),$(t).hide()})}}});