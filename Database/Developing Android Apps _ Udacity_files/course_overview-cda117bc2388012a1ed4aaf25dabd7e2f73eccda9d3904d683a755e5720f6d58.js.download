!function(e){"use strict";function t(e){$.ajax({url:[o,"api/users/",window.account.key,"/enrollments"].join(""),method:"POST",data:{node_keys:[e],state:"enrolled"},xhrFields:{withCredentials:!0},dataType:"text",dataFilter:function(e){return JSON.parse(e.split("\n").slice(-1).pop())}}).done(function(){i.toCourse(e)}).fail(function(){i.toAuthAndEnroll(e)})}var o="https://www.udacity.com/",n="https://auth.udacity.com/",a="https://classroom.udacity.com/courses/",r="autoenroll=true",i={toAuthAndEnroll:function(){var e=-1===window.location.href.indexOf("?")?"?":"&";window.location.href=n+"sign-in?next="+encodeURIComponent(window.location.href+e+r)},toCourse:function(e){window.location.href=a+encodeURIComponent(e)}};$(document).ready(function(){$(".lessons .more").readmore({lessLink:'<a href="#">View Fewer Lessons</a>',moreLink:'<a href="#">View All Lessons</a>'});var o=$("[data-course-key]"),n=$("[data-related-course]"),a=$("[data-popular-course]"),s=o.data("course-key"),c=$("[data-remodal-id=redirect-to-classroom]").remodal(),u=$("#notify-me-form"),d=$("#notify-me-success").remodal();u.parsley(parsleyConfig),u.on("submit",function(e){e.preventDefault();var t=$(this),o={name:t.find('input[name="first_name"]').val(),email:t.find('input[name="email"]').val(),course_key:t.find('input[name="course_key"]').val(),interested_in:t.find('input[name="interested_in"]').val()};analytics.track("Course Interested",{category:"Course Interested",label:"Course Interested - Notify Me - "+o.course_key,name:o.name,email:o.email,degree:o.course_key,interested_in:o.interested_in}),d.open()}),-1!==window.location.search.indexOf(r)&&(c.open(),e.getAccount().then(function(e){return e.account.registered?t(s):void c.close()})),o.click(function(e){e.preventDefault(),analytics.track("Course CTA Clicked",{cta_message:"Start Free Course",cta_type:"button",cta_destination:"self",cta_location:"COP",category:"Course CTA",label:"Course CTA - Course Enroll - "+s,page_course_key:s}),window.account&&window.account.registered&&window.account.key?t(s):i.toAuthAndEnroll()}),-1===window.location.search.indexOf(r)&&(n.each(function(){var e=$(this).data("related-course"),t=$(this).data("ranking"),o=$(this).data("variation_id"),n=$(this).data("pmi");analytics.track("Course CTA Displayed",{display_type:"card",cta_location:"COP",category:"Course CTA",label:"Course CTA - Learn More - "+e,page_course_key:s,destination_course_key:e,course_section:"related",course_ranking:t,variation_id:o,pmi:n,nonInteraction:1})}),a.each(function(e){var t=$(this).data("popular-course");analytics.track("Course CTA Displayed",{display_type:"card",cta_location:"COP",category:"Course CTA",label:"Course CTA - Learn More - "+t,page_course_key:s,destination_course_key:t,course_section:"popular",course_ranking:e+1,nonInteraction:1})}))})}(services.users);